(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[513],{53124:function(e,t,s){(window.__NEXT_P=window.__NEXT_P||[]).push(["/[locale]",function(){return s(36507)}])},23857:function(e,t,s){"use strict";var n=s(79264),a=s(91463),l=s.n(a);t.Z=(0,n.Z)({supportedLngs:l().i18n.locales,fallbackLng:l().i18n.defaultLocale})},91463:function(e){"use strict";e.exports={i18n:{defaultLocale:"en",locales:["en","fr","es","sv"]}}},36507:function(e,t,s){"use strict";s.r(t),s.d(t,{__N_SSG:function(){return t7},default:function(){return t9}});var n,a,l,i,r,o,c,d,u,p,m,y,x,h,f=s(85893),b=s(47318),g=s(66692),v=s(35880),A=s(31836),w=s(96445);let j=function(){for(var e=arguments.length,t=Array(e),s=0;s<e;s++)t[s]=arguments[s];return t.filter(Boolean).join(" ")},N=function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"USD";return new Intl.NumberFormat("en-US",{style:"currency",currency:t,useGrouping:!0}).format(e)};var T=s(83957),k=s(28126),S=s(67294);let C=()=>{let[e,t]=(0,S.useContext)(T.wP),[s,n]=(0,S.useState)(k.d.NONE),[a,l]=(0,S.useState)(""),[i,r]=(0,S.useState)(""),[o,c]=(0,S.useState)(""),[d,u]=(0,S.useState)(!1);return(0,S.useEffect)(()=>{let{title:t,message:s,type:a,hash:i}=e.alertShower;n(a),r(t),l(s),c(i),a!==k.d.NONE&&u(!0),a===k.d.NONE&&u(!1)},[e.alertShower]),(0,f.jsx)(b.u,{as:S.Fragment,show:d,enter:"transition duration-200 transform ease",enterFrom:"opacity-0 scale-90",enterTo:"opacity-100",leave:"transition duration-200 transform ease",leaveFrom:"opacity-100",leaveTo:"opacity-0 scale-90",children:(0,f.jsx)("div",{className:"max-w-screen fixed bottom-10 drop-shadow-2xl mx-auto z-30",children:(0,f.jsxs)("div",{className:j(s===k.d.INFO?"flex flex-wrap items-center justify-start space-y-1 md:space-y-0 bg-blue-100 rounded-lg p-4 mb-4 text-sm text-blue-700":s===k.d.WARNING?"flex flex-wrap items-center justify-start space-y-1 md:space-y-0 bg-yellow-100 rounded-lg p-4 mb-4 text-sm text-yellow-700":s===k.d.ERROR?"flex flex-wrap items-center justify-start space-y-1 md:space-y-0 bg-red-100 rounded-lg p-4 mb-4 text-sm text-red-700":s===k.d.SUCCESS?"flex flex-wrap items-center justify-start space-y-1 md:space-y-0 bg-green-100 rounded-lg p-4 mb-4 text-sm text-green-700":"flex flex-wrap items-center justify-start space-y-1 md:space-y-0 bg-slate-100 rounded-lg p-4 mb-4 text-sm text-slate-700"),role:"alert",children:[s===k.d.INFO?(0,f.jsx)(g.Z,{className:"h-5 w-5"}):s===k.d.SUCCESS?(0,f.jsx)(v.Z,{className:"h-5 w-5"}):s===k.d.WARNING?(0,f.jsx)(A.Z,{className:"h-5 w-5"}):s===k.d.ERROR?(0,f.jsx)(A.Z,{className:"h-5 w-5"}):s===k.d.LOADING?(0,f.jsx)("div",{className:"h-5 w-5 border-4 border-slate-700 border-t-transparent rounded-full animate-spin"}):"",(0,f.jsxs)("div",{className:"md:ml-2",children:[s!==k.d.LOADING&&(0,f.jsx)("span",{className:"font-medium",children:i})," ",a]}),s===k.d.LOADING&&o&&(0,f.jsx)("a",{className:"font-medium text-slate-800 underline md:ml-auto",href:"https://polygonscan.com/tx/".concat(o),children:"check status"}),s!==k.d.LOADING&&(0,f.jsx)("button",{className:"text-slate-800 hover:text-slate-700 ml-auto",onClick:()=>u(!d),children:(0,f.jsx)(w.Z,{className:"h-6 w-6"})})]})})})};var E=s(69077),I=s(24484);let D=e=>{let{tokenAddress:t,showSymbol:s}=e,{address:n}=(0,E.mA)(),{chain:a}=(0,E.LN)(),{data:l}=(0,E.KQ)({address:n,chainId:(null==a?void 0:a.id)||I.yu.id,token:t});return l?(0,f.jsxs)(f.Fragment,{children:[(0,f.jsx)("span",{children:Number(null==l?void 0:l.formatted).toFixed(2)}),s&&(0,f.jsx)("span",{children:null==l?void 0:l.symbol})]}):(0,f.jsx)("div",{className:"animate-pulse",children:(0,f.jsx)("div",{className:"h-4 rounded bg-slate-700"})})};var F=s(49808);(n=d||(d={})).Withdraw="withdraw",n.Deposit="deposit",n.Swap="swap";var _=s(7974),R=s(84034),O=s(60662),M=s(22536),L=s(58033),U=s(78),B=s(30531),Z=s(59175),W=s(93074),P=s(24639);let G=[{coin:B.sN.RIC,tokenAddress:Z.Nw,superTokenAddress:Z.cZ,multi:1e6,key:"hasUsdcApprove"},{coin:B.sN.StIbAlluoUSD,tokenAddress:Z.n0,superTokenAddress:Z.$v,multi:1e18,key:"hasIbAlluoUSDApprove"},{coin:B.sN.StIbAlluoETH,tokenAddress:Z.$G,superTokenAddress:Z.EV,multi:1e18,key:"hasIbAlluoETHApprove"},{coin:B.sN.StIbAlluoBTC,tokenAddress:Z.Mv,superTokenAddress:Z.HT,multi:1e18,key:"hasIbAlluoBTCApprove"},{coin:B.sN.USDC,tokenAddress:Z.QA,superTokenAddress:Z.V8,multi:1e6,key:"hasUsdcApprove"},{coin:B.sN.DAI,tokenAddress:Z.P0,superTokenAddress:Z.ho,multi:1e18,key:"hasDaiApprove"},{coin:B.sN.WETH,tokenAddress:Z.Yw,superTokenAddress:Z.gp,multi:1e18,key:"hasWethApprove"},{coin:B.sN.WBTC,tokenAddress:Z.ci,superTokenAddress:Z.kE,multi:1e8,key:"hasWbtcApprove"},{coin:B.sN.MATIC,tokenAddress:Z.gU,superTokenAddress:Z.s,multi:1e18,key:"hasMaticApprove"}],Q=[{coin:B.sN.FUSDC,tokenAddress:W.E8,superTokenAddress:W.AG,multi:1e6,key:"hasFUsdcApprove"},{coin:B.sN.FDAI,tokenAddress:W.SQ,superTokenAddress:W.jT,multi:1e18,key:"hasFDaiApprove"}],H=[{coin:B.sN.OPUSDC,tokenAddress:P.q4,superTokenAddress:P.NR,multi:1e6,key:"hasOpUsdcApprove"},{coin:B.sN.OPDAI,tokenAddress:P.r,superTokenAddress:P.bE,multi:1e18,key:"hasOpDaiApprove"},{coin:B.sN.OP,tokenAddress:P.Zx,superTokenAddress:P.oJ,multi:1e18,key:"hasOPApprove"}];var z=s(81689),V=s(7365);let $=[...Z.ow,...W.Jg,...P.L6];var K=s(2593);let q=K.O$.from(0),Y=K.O$.from(-1);function J(e,t){let s=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{pad:!1,commify:!1},n=K.O$.from(e),a=n.lt(q),l=K.O$.from(10).pow(K.O$.from(t));a&&(n=n.mul(Y));let i=n.mod(l).toString();for(;i.length<t;)i="0".concat(i);if(!s.pad){let r=i.match(/^([0-9]*[1-9]|0)(0*)/);r&&(i=r[1])}let o=n.div(l).toString();s.commify&&(o=o.replace(/\B(?=(\d{3})+(?!\d))/g,","));let c="".concat(o).concat("0"==i?"":".".concat(i));return a&&(c="-".concat(c)),c}let X=e=>{let t={},s=$.map(async t=>{try{let s=await (0,U.a4)({address:t,abi:V.e,functionName:"balanceOf",args:[e]});return{balance:s,tokenAddress:t}}catch(n){return}});return Promise.all(s).then(e=>(e.map(e=>{e&&(e.tokenAddress===Z.ci&&(t[e.tokenAddress]=J(e.balance,8)),(e.tokenAddress===Z.QA||e.tokenAddress===W.E8)&&(t[e.tokenAddress]=J(e.balance,6)),t[e.tokenAddress]=J(e.balance,18))}),t))},ee=(e,t)=>{let{address:s}=(0,U.D0)();return X(s).then(async n=>{let a=await (0,U.uN)({address:e,abi:U.em}),l=await (0,z.M1)(a,s,t),i=G.find(t=>t.tokenAddress===e),r=i?i.multi:1,o=parseFloat(l)>parseFloat(n&&n[e])*r;return o})},et=[{coin:B.sN.USDCx,tokenAddress:Z.V8},{coin:B.sN.DAIx,tokenAddress:Z.ho},{coin:B.sN.WETHx,tokenAddress:Z.gp},{coin:B.sN.WBTCx,tokenAddress:Z.kE},{coin:B.sN.MATICx,tokenAddress:Z.s},{coin:B.sN.StIbAlluoETH,tokenAddress:Z.EV},{coin:B.sN.StIbAlluoUSD,tokenAddress:Z.$v},{coin:B.sN.StIbAlluoBTC,tokenAddress:Z.HT}],es=[{coin:B.sN.FDAIx,tokenAddress:W.jT},{coin:B.sN.FUSDCx,tokenAddress:W.AG}],en=[{coin:B.sN.OPUSDCx,tokenAddress:P.NR},{coin:B.sN.OPDAIx,tokenAddress:P.bE},{coin:B.sN.OPx,tokenAddress:P.oJ}];var ea=s(61744),el=s(30963);let ei=e=>{let{action:t,type:s,form:n,icon:a,loading:l,primary:i,disabled:r,handleClick:o}=e;return(0,f.jsxs)("button",{type:s,form:n,disabled:r,className:j(i?"btn-rounded bg-primary-500 hover:bg-primary-300 disabled:bg-primary-200 disabled:text-slate-500 text-slate-800":"btn-rounded bg-slate-100 hover:bg-slate-300"),onClick:o,children:[l?"":a,l&&!a&&(0,f.jsxs)("svg",{className:"animate-spin -ml-1 mr-2 h-4 w-4 text-slate-800",xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",children:[(0,f.jsx)("circle",{className:"opacity-25",cx:"12",cy:"12",r:"10",stroke:"currentColor",strokeWidth:"4"}),(0,f.jsx)("path",{className:"opacity-75",fill:"currentColor",d:"M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z"})]}),(0,f.jsx)("span",{children:t})]})},er=e=>{let{action:t,type:s,disabled:n,handleClick:a}=e;return(0,f.jsx)("button",{type:s,className:"address-link",disabled:n,onClick:a,children:(0,f.jsx)("span",{children:t})})},eo=e=>{let{action:t,type:s,disabled:n,handleClick:a}=e;return(0,f.jsx)("button",{type:s,className:"btn-pill-outline",disabled:n,onClick:a,children:(0,f.jsx)("span",{children:t})})},ec=e=>{let{action:t,type:s,primary:n,disabled:a,loading:l,handleClick:i}=e;return(0,f.jsxs)("button",{type:s,disabled:a,className:j(n?"btn-pill-solid":"btn-pill-solid bg-slate-100 hover:bg-slate-300 disabled:bg-primary-200 disabled:text-slate-500"),onClick:i,children:[l&&(0,f.jsxs)("svg",{className:"animate-spin -ml-1 mr-2 h-4 w-4 text-slate-800",xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",children:[(0,f.jsx)("circle",{className:"opacity-25",cx:"12",cy:"12",r:"10",stroke:"currentColor",strokeWidth:"4"}),(0,f.jsx)("path",{className:"opacity-75",fill:"currentColor",d:"M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z"})]}),(0,f.jsx)("span",{children:t})]})};var ed=s(25675),eu=s.n(ed);let ep=e=>{let{classNames:t,value:s,coins:n,handleChange:a}=e;return(0,f.jsx)(R.R,{value:s,onChange:a,children:(0,f.jsxs)("div",{className:j(t||"relative w-full z-10"),children:[(0,f.jsxs)(R.R.Button,{className:"relative w-full cursor-default rounded-lg bg-slate-700 py-2 pl-3 pr-10 text-left text-slate-200 shadow-md focus:outline-none focus-visible:border-slate-500 focus-visible:ring-2 focus-visible:ring-slate-100 focus-visible:ring-opacity-75 focus-visible:ring-offset-2 focus-visible:ring-offset-slate-300 sm:text-sm",children:[(0,f.jsxs)("div",{className:"flex items-center whitespace-nowrap space-x-2",children:[s!==B.sN.SELECT&&(0,f.jsx)("span",{children:(0,f.jsx)(eu(),{width:"22",height:"22",src:B.mk[s],alt:s})}),(0,f.jsx)("span",{className:"block truncate",children:s})]}),(0,f.jsx)("span",{className:"pointer-events-none absolute inset-y-0 right-0 flex items-center pr-2",children:(0,f.jsx)(O.Z,{className:"h-5 w-5 text-slate-100","aria-hidden":"true"})})]}),(0,f.jsx)(b.u,{as:S.Fragment,leave:"transition ease-in duration-100",leaveFrom:"opacity-100",leaveTo:"opacity-0",children:(0,f.jsx)(R.R.Options,{className:"absolute mt-1 max-h-60 w-full overflow-auto rounded-md bg-slate-700 py-1 text-base shadow-lg ring-1 ring-black ring-opacity-5 focus:outline-none sm:text-sm",children:n.map((e,t)=>(0,f.jsx)(R.R.Option,{className:e=>{let{active:t}=e;return"relative cursor-default select-none py-2 pl-10 pr-4 ".concat(t?"bg-slate-800 text-slate-200":"text-slate-200")},value:e,children:t=>{let{selected:s}=t;return(0,f.jsxs)(f.Fragment,{children:[(0,f.jsxs)("div",{className:"flex items-center whitespace-nowrap space-x-2",children:[e!==B.sN.SELECT&&(0,f.jsx)("span",{children:(0,f.jsx)(eu(),{width:"22",height:"22",src:B.mk[e],alt:e})}),(0,f.jsx)("span",{className:"block truncate ".concat(s?"font-medium":"font-normal"),children:e})]}),s?(0,f.jsx)("span",{className:"absolute inset-y-0 left-0 flex items-center pl-3 text-green-600",children:(0,f.jsx)(M.Z,{className:"h-5 w-5","aria-hidden":"true"})}):null,s?(0,f.jsx)("span",{className:"absolute inset-y-0 left-0 flex items-center pl-3 text-green-600",children:(0,f.jsx)(M.Z,{className:"h-5 w-5","aria-hidden":"true"})}):null]})}},t))})})]})})},em=["0.02%","0.03%","0.05%"],ey=[...B.ix,...B.Qo],ex=e=>{let{type:t,close:s,setClose:n,balanceList:a}=e,{t:l}=(0,_.$G)("home"),{address:i}=(0,E.mA)(),{chain:r}=(0,E.LN)(),[o,c]=(0,S.useContext)(T.wP),[u,p]=(0,S.useState)(!1),[m,y]=(0,S.useState)(),[x,h]=(0,S.useState)(),[g,v]=(0,S.useState)(B.sN.SELECT),[A,w]=(0,S.useState)(B.sN.SELECT),[j,N]=(0,S.useState)(B.sN.SELECT),[k,C]=(0,S.useState)(""),[I,D]=(0,S.useState)(!1),[F,Z]=(0,S.useState)(),[W,P]=(0,S.useState)(""),[z]=el.Z.useLazyUpgradeQuery(),[V]=el.Z.useLazyApproveQuery(),[$]=el.Z.useLazyDowngradeQuery(),[K,q]=(0,S.useState)(),[Y,J]=(0,S.useState)(),[er,eo]=(0,S.useState)(),[ec,ed]=(0,S.useState)();(0,S.useEffect)(()=>{if(r){if(137===r.id){let e=et.map(e=>e.coin),t=G.map(e=>e.coin);q(e),J(t),ed(G),eo(et)}if(80001===r.id){let s=es.map(e=>e.coin),n=Q.map(e=>e.coin);q(s),J(n),ed(Q),eo(es)}if(10===r.id){let a=en.map(e=>e.coin),l=H.map(e=>e.coin);q(a),J(l),ed(H),eo(en)}}},[r]),(0,S.useEffect)(()=>{if(t===d.Withdraw&&g!==B.sN.SELECT){let e=null==er?void 0:er.find(e=>e.coin===g);h(e)}else if(t===d.Deposit&&g!==B.sN.SELECT){let s=null==ec?void 0:ec.find(e=>e.coin===g);ee(null==s?void 0:s.tokenAddress,null==s?void 0:s.superTokenAddress).then(e=>p(e)),y(s)}},[g]),(0,S.useEffect)(()=>{d.Deposit&&m&&(async()=>{let e=await (0,U.EG)({address:i,chainId:null==r?void 0:r.id,token:null==m?void 0:m.tokenAddress}).then(e=>null==e?void 0:e.formatted);P(e)})()},[m]);let eu=()=>{if(m){D(!0);let e=V({tokenAddress:null==m?void 0:m.tokenAddress,superTokenAddress:null==m?void 0:m.superTokenAddress});e.then(e=>{D(!1),ee(null==m?void 0:m.tokenAddress,null==m?void 0:m.superTokenAddress).then(e=>p(e))})}},ex=()=>{d.Withdraw&&a&&C(null==a?void 0:a[null==x?void 0:x.tokenAddress]),d.Deposit&&W&&C(W)},eh=e=>{null==e||e.preventDefault(),g!==B.sN.SELECT&&(c(L.Z.showLoadingAlert("Waiting for your transaction to be confirmed...","")),t===d.Withdraw?X(i).then(e=>{if(0>=Number(k)||Object.keys(e).length&&0===Number(e[null==x?void 0:x.tokenAddress]))return;let t=ea.parseEther(k);D(!0);let s=$({value:t.toString(),tokenAddress:null==x?void 0:x.tokenAddress});s.then(e=>{e.isSuccess&&c(L.Z.showSuccessAlert("Success","Transaction confirmed \uD83D\uDC4C")),D(e.isLoading),e.isError&&c(L.Z.showErrorAlert("Error","".concat(null==e?void 0:e.error))),setTimeout(()=>{c(L.Z.hideAlert())},5e3)}).catch(e=>c(L.Z.showErrorAlert("Error","".concat(e||(null==e?void 0:e.message)))))}):t===d.Deposit&&X(i).then(e=>{if(!(0>Number(k))&&(!Object.keys(e).length||!m||0!==Number(e[m.tokenAddress]))&&u){let t=ea.parseEther(k);D(!0);let s=z({value:t.toString(),tokenAddress:null==m?void 0:m.superTokenAddress});s.then(e=>{e.isSuccess&&c(L.Z.showSuccessAlert("Success","Transaction confirmed \uD83D\uDC4C")),D(e.isLoading),e.isError&&c(L.Z.showErrorAlert("Error","".concat(null==e?void 0:e.error))),setTimeout(()=>{c(L.Z.hideAlert())},5e3)}).catch(e=>c(L.Z.showErrorAlert("Error","".concat(e||(null==e?void 0:e.message)))))}}))};return(0,f.jsx)("div",{className:"flex flex-col items-start",children:(0,f.jsxs)("form",{onSubmit:eh,className:"flex flex-col items-start w-full space-y-6",children:[(t===d.Withdraw||t===d.Deposit)&&K&&Y&&(0,f.jsxs)(f.Fragment,{children:[(0,f.jsxs)("label",{className:"text-slate-100",children:[l("token-action")," ",l(t),"?"]}),(0,f.jsx)(ep,{value:g,coins:t===d.Withdraw?K:t===d.Deposit?Y:[],handleChange:v}),g!==B.sN.SELECT&&(0,f.jsxs)("p",{children:["Balance:"," ",d.Withdraw&&a&&x?parseFloat(null==a?void 0:a[null==x?void 0:x.tokenAddress]).toFixed(3):d.Deposit&&W&&m?parseFloat(W).toFixed(3):0," ",g]})]}),t===d.Swap&&(0,f.jsxs)(f.Fragment,{children:[(0,f.jsxs)("label",{className:"text-slate-100",children:[l(t===d.Swap?"tokens-action":"token-action")," ",l(t),"?"]}),(0,f.jsxs)("div",{className:"flex items-center space-x-2 w-full",children:[(0,f.jsxs)("span",{className:"text-slate-100",children:[l("from"),": "]}),(0,f.jsx)(ep,{classNames:"relative w-full z-30",value:A,coins:ey,handleChange:w})]}),(0,f.jsxs)("div",{className:"flex items-center space-x-2 w-full",children:[(0,f.jsxs)("span",{className:"text-slate-100",children:[l("to"),": "]}),(0,f.jsx)(ep,{classNames:"relative w-full z-20",value:j,coins:ey,handleChange:N})]})]}),(0,f.jsxs)("label",{className:"text-slate-100",children:[l("amount-action")," ",l(t),"?"]}),(0,f.jsxs)("div",{className:"relative w-full",children:[(0,f.jsx)("input",{type:"number",className:"input-outline",value:k,step:"any",onChange:e=>C(e.target.value),placeholder:t===d.Swap?"".concat(l(A!==B.sN.SELECT?"amount-in":"amount")," ").concat(A!==B.sN.SELECT?A:""):l("amount")}),(0,f.jsx)("button",{type:"button",className:"pr-8 text-primary-500 hover:text-primary-300 hover:font-bold absolute right-2.5 bottom-2.5 font-medium text-sm",onClick:ex,children:"Max"})]}),t===d.Swap&&(0,f.jsxs)(f.Fragment,{children:[(0,f.jsxs)("label",{className:"text-slate-100",children:[l("slippage-tolerance"),":"]}),(0,f.jsx)(R.R,{value:F,onChange:Z,children:(0,f.jsxs)("div",{className:"relative w-full z-10",children:[(0,f.jsxs)(R.R.Button,{className:"relative w-full cursor-default rounded-lg bg-slate-700 py-2 pl-3 pr-10 text-left text-slate-200 shadow-md focus:outline-none focus-visible:border-slate-500 focus-visible:ring-2 focus-visible:ring-slate-100 focus-visible:ring-opacity-75 focus-visible:ring-offset-2 focus-visible:ring-offset-slate-300 sm:text-sm",children:[(0,f.jsx)("span",{className:"block truncate",children:F||"Select slippage tolerance"}),(0,f.jsx)("span",{className:"pointer-events-none absolute inset-y-0 right-0 flex items-center pr-2",children:(0,f.jsx)(O.Z,{className:"h-5 w-5 text-slate-100","aria-hidden":"true"})})]}),(0,f.jsx)(b.u,{as:S.Fragment,leave:"transition ease-in duration-100",leaveFrom:"opacity-100",leaveTo:"opacity-0",children:(0,f.jsx)(R.R.Options,{className:"absolute mt-1 max-h-60 w-full overflow-auto rounded-md bg-slate-700 py-1 text-base shadow-lg ring-1 ring-black ring-opacity-5 focus:outline-none sm:text-sm",children:em.map((e,t)=>(0,f.jsx)(R.R.Option,{className:e=>{let{active:t}=e;return"relative cursor-default select-none py-2 pl-10 pr-4 ".concat(t?"bg-slate-800 text-slate-200":"text-slate-200")},value:e,children:t=>{let{selected:s}=t;return(0,f.jsxs)(f.Fragment,{children:[(0,f.jsx)("span",{className:"block truncate ".concat(s?"font-medium":"font-normal"),children:e}),s?(0,f.jsx)("span",{className:"absolute inset-y-0 left-0 flex items-center pl-3 text-green-600",children:(0,f.jsx)(M.Z,{className:"h-5 w-5","aria-hidden":"true"})}):null]})}},t))})})]})}),(0,f.jsxs)("p",{className:"text-slate-100",children:[l("min-output-amt"),": ...",j!==B.sN.SELECT?j:""]})]}),(0,f.jsxs)("div",{className:"flex space-x-4 w-full justify-end",children:[(0,f.jsx)("button",{type:"button",className:"text-slate-100 underline",onClick:()=>n(!s),children:l("cancel")}),(t===d.Withdraw||t===d.Swap)&&(0,f.jsx)(ei,{type:"submit",loading:I,disabled:I,action:I?"".concat(l("confirming"),"..."):"".concat(l("confirm")," ").concat(l(t))}),u&&t===d.Deposit&&(0,f.jsx)(ei,{type:"submit",loading:I,disabled:I,action:I?"".concat(l("confirming"),"..."):"".concat(l("confirm")," ").concat(l(t))}),!u&&t===d.Deposit&&(0,f.jsx)(ei,{type:"button",loading:I,action:I?"".concat(l("approving"),"..."):"".concat(l("approve")),disabled:g===B.sN.SELECT||I,handleClick:eu})]})]})})},eh=e=>{let{close:t,setClose:s,action:n,balanceList:a}=e,{t:l}=(0,_.$G)("home"),[i,r]=(0,S.useState)(0);return(0,S.useEffect)(()=>{r(n)},[n]),(0,f.jsxs)(F.O.Group,{selectedIndex:i,onChange:r,children:[(0,f.jsxs)(F.O.List,{className:"flex items-center justify-between border-b-2 border-primary-900 border-opacity-30 mb-8 mt-4",children:[(0,f.jsx)(F.O,{as:S.Fragment,children:e=>{let{selected:t}=e;return(0,f.jsx)("button",{className:t?"text-slate-100 border-b-2 border-primary-500":"text-slate-400 border-none",children:l("withdraw")})}}),(0,f.jsx)(F.O,{as:S.Fragment,children:e=>{let{selected:t}=e;return(0,f.jsx)("button",{className:t?"text-slate-100 border-b-2 border-primary-500":"text-slate-400 border-none",children:l("deposit")})}}),(0,f.jsx)("button",{className:"text-slate-400 hover:text-slate-100",onClick:()=>s(!t),children:(0,f.jsx)(w.Z,{className:"h-4 w-4"})})]}),(0,f.jsxs)(F.O.Panels,{children:[(0,f.jsx)(F.O.Panel,{children:(0,f.jsx)(ex,{type:d.Withdraw,close:t,setClose:s,balanceList:a})}),(0,f.jsx)(F.O.Panel,{children:(0,f.jsx)(ex,{type:d.Deposit,close:t,setClose:s,balanceList:a})}),(0,f.jsx)(F.O.Panel,{children:(0,f.jsx)(ex,{type:d.Swap,close:t,setClose:s,balanceList:a})})]})]})},ef=new Map([[P.NR,"usd-coin"],[P.bE,"dai"],[W.jT,"dai"],[W.AG,"usd-coin"],[Z.ho,"dai"],[Z.V8,"usd-coin"],[Z.gp,"weth"],[Z.kE,"wrapped-bitcoin"],[Z.s,"matic-network"],[Z.cZ,"richochet"],[Z.EV,"weth"],[Z.$v,"usd-coin"],[Z.HT,"wrapped-bitcoin"],[P.oJ,"optimism"]]);var eb=s(60179);let eg=()=>{let[e]=eb.Z.useLazyGetPricesQuery(),[t,s]=(0,S.useState)(new Map);return(0,S.useEffect)(()=>{let t=[...ef.values()],n=e(t.join(","));n.then(e=>{let t=[...ef.keys()],n=new Map;t.forEach(t=>{var s,a;let l=null==ef?void 0:ef.get(t),i=null==e?void 0:null===(s=e.data)||void 0===s?void 0:s.filter(e=>e.id===l);void 0===i?(n.set(t,0),console.warn("Could not fetch price for token ",t)):n.set(t,null===(a=i[0])||void 0===a?void 0:a.current_price)}),s(n)})},[]),t};(a=u||(u={})).ETH="#B3FFFF",a.WBTC="#FF8D8F",a.RIC="#7B7EFF",a.USDC="#2775CA",a.StIbAlluoETH="#75E276",a.StIbAlluoUSD="#E9DF89",a.OP="#ff0000",a.OPx="#ff0000",a.DAI="#d5b608",a.OPDAI="#d5b608",a.OPDAIx="#d5b608";let ev={[B.sN.ETH]:u.ETH,[B.sN.WBTC]:u.WBTC,[B.sN.RIC]:u.RIC,[B.sN.USDC]:u.USDC,[B.sN.StIbAlluoUSD]:u.StIbAlluoUSD,[B.sN.StIbAlluoETH]:u.StIbAlluoETH,[B.sN.OP]:u.OP,[B.sN.OPx]:u.OPx,[B.sN.OPDAI]:u.OPDAI,[B.sN.DAI]:u.DAI},eA={USDC:"usd-coin",MATIC:"matic-network",ETH:"ethereum",BTC:"bitcoin",WBTC:"wrapped-bitcoin",DAI:"dai",RIC:"richochet",IbAlluoETH:"ethereum",IbAlluoBTC:"wrapped-bitcoin",IbAlluoUSD:"usd-coin",StIbAlluoETH:"ethereum",StIbAlluoBTC:"wrapped-bitcoin",StIbAlluoUSD:"usd-coin",FUSDC:"usd-coin",FDAI:"dai",OP:"optimism"},ew=e=>{let[t]=eb.Z.useLazyGetTokenHistoryQuery(),[s,n]=(0,S.useState)(new Map),a=(0,S.useRef)(!1);return(0,S.useEffect)(()=>{if(e.size>0){let s=new Map;for(let[l,i]of e)if(i[0]!==B.sN.SELECT&&i[1]!==B.sN.SELECT){let r=[eA[i[0]],eA[i[1]]],o=r.map(async e=>await t(e));Promise.all(o).then(e=>{e.map(e=>{e&&s.set(null==e?void 0:e.originalArgs,(null==e?void 0:e.data.prices)||"")})}).finally(()=>{n(s),a.current=!0})}}},[e]),(0,S.useEffect)(()=>{a.current&&(a.current=!1)},[a]),s},ej=e=>{let t=[],s=[];return e&&e.length&&(s=[...t=[...e].sort((e,t)=>+e[0]-+t[0])].sort((e,t)=>+e[1]-+t[1])),{tSort:t,priceSorted:s}};var eN=s(67421),eT=s(9253),ek=s(46888),eS=s(3023),eC=s(75358),eE=s(14888),eI=s(86108);let eD=e=>{let{pairs:t,position:s}=e,{t:n}=(0,eN.$G)("home"),a=ew(t),[l,i]=(0,S.useState)([]),[r,o]=(0,S.useState)([]),[c,d]=(0,S.useState)([]),[u,p]=(0,S.useState)(["0","0"]),m=e=>"auto"!==e?new Date(e).toLocaleDateString("en-us",{month:"short",day:"numeric"}):new Date().toLocaleDateString("en-us",{month:"short",day:"numeric"}),y=e=>N(e),x=e=>{let t=e.map(e=>e[0]);d(t)};return(0,S.useEffect)(()=>{if(a.size>0&&t.size>0)for(let[e,s]of t){if(s[0]===B.sN.USDC||s[0]===B.sN.IbAlluoUSD||s[0]===B.sN.StIbAlluoUSD||s[0]===B.sN.DAI){let{tSort:n,priceSorted:l}=ej(a.get(eA[s[1]]));l.length&&n.length&&(p([l[0][1]||"0",l[l.length-1][1]||"0"]),i(n))}if(s[1]===B.sN.USDC||s[1]===B.sN.IbAlluoUSD||s[1]===B.sN.StIbAlluoUSD||s[1]===B.sN.DAI){let{tSort:r,priceSorted:o}=ej(a.get(eA[s[0]]));o.length&&r.length&&(p([o[0][1]||"0",o[o.length-1][1]||"0"]),i(r))}}},[a,t]),(0,S.useEffect)(()=>{l&&l.length&&x(l)},[l]),(0,S.useEffect)(()=>{if(l&&l.length&&c.length){let e=[];c.map((t,s)=>{e.push({name:t,price:l[s][1]})}),o(e)}},[c,l]),(0,f.jsxs)(f.Fragment,{children:[(0,f.jsx)("div",{className:"h-52 min-h-full w-52 min-w-full",children:(0,f.jsx)(eT.h,{height:"100%",width:"100%",children:(0,f.jsxs)(ek.T,{margin:{top:0,right:10,left:40,bottom:20},data:r,children:[(0,f.jsx)(eS.K,{dataKey:"name",tickFormatter:e=>m(e),interval:"preserveEnd",tickMargin:5,minTickGap:10}),(0,f.jsx)(eC.B,{dataKey:"y",tickMargin:5,orientation:"left",tickFormatter:e=>y(e),interval:"preserveEnd",domain:[u[0],u[1]]}),(0,f.jsx)(eE.u,{}),(0,f.jsx)(eI.u,{type:"monotone",dataKey:"price",stroke:"#81a8ce",fill:"#81a8ce"})]})})}),s&&(0,f.jsxs)("p",{className:"text-slate-100 my-2 pl-14",children:[(0,f.jsxs)("span",{className:"text-slate-400",children:[n("average-buy-price"),":"]})," 1 ",s.coinB," ="," ",((+u[0]+ +u[1])/2).toFixed(3)," ",s.coinA]})]})};var eF=s(73604),e_=s(46208),eR=s(43815);let eO=e=>{let{tokens:t,geckoPriceList:s,balances:n}=e,{t:a}=(0,_.$G)("home"),[l,i]=(0,S.useState)(0),[r,o]=(0,S.useState)([]),[c,d]=(0,S.useState)([]),{chain:u}=(0,E.LN)();return(0,S.useEffect)(()=>{u&&((null==u?void 0:u.id)===80001&&d(Q),(null==u?void 0:u.id)===137&&d(G),(null==u?void 0:u.id)===10&&d(H))},[u]),(0,S.useEffect)(()=>{let e=[];t.filter(e=>!!e.color).map(t=>{e.push({name:t.token,color:t.color,value:parseFloat(t.ricAmount)})}),o(e)},[t]),(0,S.useEffect)(()=>{let e=c.reduce((e,t)=>{let a=Object.keys(n).length&&Object.keys(s).length&&Object.keys(eA).length&&(parseFloat(n[t.superTokenAddress])*parseFloat(s[eA[t.coin]].usd)).toFixed(6);return e+parseFloat(a)},0);i(e)},[t,n,s,eA]),(0,f.jsx)("div",{className:"h-52 w-52",children:(0,f.jsx)(eT.h,{height:"100%",width:"100%",children:(0,f.jsxs)(eF.u,{children:[(0,f.jsx)("text",{fill:"#81a8ce",x:100,y:80,textAnchor:"middle",dominantBaseline:"middle",children:a("total")}),l&&(0,f.jsx)("text",{fill:"white",x:100,y:110,fontWeight:600,textAnchor:"middle",dominantBaseline:"middle",children:N(l)}),(0,f.jsx)(e_.b,{data:r,innerRadius:80,outerRadius:100,fill:"#81a8ce",paddingAngle:0,nameKey:"name",dataKey:"value",children:r.map(e=>(0,f.jsx)(eR.b,{fill:e.color},"cell-".concat(e.name)))})]})})})};var eM=s(45485),eL=s(44414);let eU=e=>{let{contentPerPage:t=0,count:s=0}=e,[n,a]=(0,S.useState)(1),[l,i]=(0,S.useState)({before:!1,paginationGroup:[],after:!0}),r=Math.ceil(s/t),o=n*t,[c,d]=(0,S.useState)([]);(0,S.useEffect)(()=>{if(r>2){let e=Array(r-2).fill(1).map((e,t)=>t+2);d(e)}},[r]),(0,S.useEffect)(()=>{let e=c.indexOf(n),t=[],s=!1,a=!1;t=1===n?c.slice(0,3):n===r||n===r-1||n===r-2?c.slice(-3,r):2===n?c.slice(e,e+3):[n-1,n,n+1],r<=5?(s=!1,a=!1):(s=!1,a=!1,t[0]>2&&(s=!0),t[2]<r-1&&(a=!0)),i({paginationGroup:t,before:s,after:a})},[n,c,r]);let u=e=>{a(t=>e?t===r?t:t+1:1===t?t:t-1)},p=e=>{e>r?a(r):e<1?a(1):a(e)};return{totalPages:r,nextPage:()=>u(!0),prevPage:()=>u(!1),setPage:p,firstContentIndex:o-t,lastContentIndex:o,page:n,gaps:l}};var eB=s(84009);(l=p||(p={})).Position="Position",l.Market="Market",l.Balances="Balances",l.ViewPosition="View Position";let eZ=e=>{let{coinA:t,coinB:s,token:n,type:a}=e;return(a===p.Market||a===p.Position)&&t&&s?(0,f.jsxs)("div",{className:"flex flex-wrap items-center justify-between lg:space-x-2",children:[(0,f.jsxs)("span",{className:"flex items-center space-x-2",children:[(0,f.jsx)(eu(),{width:"24",height:"24",src:B.mk[t],alt:t})," ",(0,f.jsx)("span",{className:"text-sm",children:t})]}),(0,f.jsx)(eB.Z,{className:"h-5 w-5"}),(0,f.jsxs)("span",{className:"flex items-center space-x-2",children:[(0,f.jsx)(eu(),{width:"24",height:"24",src:B.mk[s],alt:s})," ",(0,f.jsx)("span",{className:"text-sm",children:s})]})]}):a===p.Balances&&n?(0,f.jsxs)(f.Fragment,{children:[(0,f.jsx)(eu(),{width:"24",height:"24",src:B.mk[n],alt:n}),(0,f.jsx)("span",{className:j(n===B.sN.ETH?"bg-eth text-slate-800 px-1 py-0":n===B.sN.WBTC?"bg-btc text-slate-800 px-1 py-0":n===B.sN.RIC?"bg-ric text-slate-200 px-1 py-0":n===B.sN.USDC?"bg-usdc text-slate-200 px-1 py-0":n===B.sN.StIbAlluoETH?"bg-stIbAlluoEth text-slate-800 px-1 py-0":n===B.sN.StIbAlluoUSD?"bg-stIbAlluoUsd text-slate-800 px-1 py-0":"bg-transparent","text-sm"),children:n})]}):a===p.ViewPosition&&t&&s?(0,f.jsxs)(f.Fragment,{children:[(0,f.jsxs)("span",{className:"flex items-center space-x-2",children:[(0,f.jsx)(eu(),{width:"40",height:"40",src:B.mk[t],alt:t})," ",(0,f.jsx)("span",{className:"font-medium text-slate-100",children:t})]}),(0,f.jsx)(eB.Z,{className:"h-10 w-16"}),(0,f.jsxs)("span",{className:"flex items-center space-x-2",children:[(0,f.jsx)(eu(),{width:"30",height:"30",src:B.mk[s],alt:s})," ",(0,f.jsx)("span",{className:"font-medium text-slate-100",children:s})]})]}):(0,f.jsx)(f.Fragment,{})},eW=e=>{let{headers:t,rowNumber:s}=e,n=[],a=[];for(let l=0;l<t.length;l++)a.push((0,f.jsx)("td",{className:"h-4 bg-slate-700"},l));for(let i=0;i<s;i++)n.push((0,f.jsx)("tr",{className:"animate-pulse",children:a},i));return(0,f.jsxs)("table",{className:"border-separate border-spacing-2 min-w-full",children:[(0,f.jsx)("thead",{children:(0,f.jsx)("tr",{children:t.map((e,t)=>(0,f.jsx)("th",{scope:"col",className:"font-normal text-slate-400 px-6 py-4 text-start",children:e},t))})}),(0,f.jsx)("tbody",{children:n})]})},eP=e=>!!e.positions||0===e.positions,eG=e=>!!e.streams||0===e.streams,eQ=e=>!!e.token,eH=e=>{let{headers:t,rowData:s,selectable:n,selectData:a,tableLoaderRows:l}=e,{t:i}=(0,_.$G)("home"),{firstContentIndex:r,lastContentIndex:o,nextPage:c,prevPage:d,page:u,gaps:m,setPage:y,totalPages:x}=eU({contentPerPage:6,count:s.length});return(0,f.jsxs)(f.Fragment,{children:[(0,f.jsxs)("div",{className:"overflow-auto",children:[0===s.length&&(0,f.jsx)(eW,{headers:t,rowNumber:l}),s.length>0&&(0,f.jsxs)("table",{className:"table-fixed min-w-full",children:[(0,f.jsx)("thead",{children:(0,f.jsx)("tr",{children:t.map((e,t)=>(0,f.jsx)("th",{scope:"col",className:"font-normal text-slate-400 px-6 py-4 text-start",children:i("".concat(e.toLocaleLowerCase().replace(/\s/g,"-")))},t))})}),(0,f.jsx)("tbody",{children:s.slice(r,o).map((e,t)=>{var s,l;return(0,f.jsx)("tr",{className:j(n?"cursor-pointer":"cursor-auto","text-slate-200 border-b border-slate-600"),onClick:()=>n&&eP(e)?null==a?void 0:a(e):null,children:eP(e)?(0,f.jsxs)(f.Fragment,{children:[(0,f.jsx)("td",{className:"px-2 py-4 whitespace-nowrap",children:(0,f.jsx)("div",{className:"inline-flex items-center gap-2",children:(0,f.jsx)(eZ,{coinA:e.coinA,coinB:e.coinB,type:p.Position})})}),(0,f.jsxs)("td",{className:"px-6 py-4 whitespace-nowrap",children:[(0,f.jsx)("p",{children:N(parseFloat(e.rateUsdValue))}),(0,f.jsxs)("p",{className:"text-slate-400",children:[parseFloat(e.output).toFixed(3)," ",(0,f.jsxs)("span",{className:"text-sm",children:[e.coinA,"x"]})]})]}),(0,f.jsxs)("td",{className:"px-6 py-4 whitespace-nowrap",children:[(0,f.jsx)("p",{children:N(parseFloat(e.input.toFixed(3)))}),(0,f.jsxs)("p",{className:"text-slate-400",children:[e.input.toFixed(3)," ",(0,f.jsxs)("span",{className:"text-sm",children:[e.coinA,"x"]})]})]})]}):eG(e)?(0,f.jsxs)(f.Fragment,{children:[(0,f.jsx)("td",{className:"px-2 py-4 whitespace-nowrap",children:(0,f.jsx)("div",{className:"inline-flex items-center gap-2",children:(0,f.jsx)(eZ,{coinA:e.coinA,coinB:e.coinB,type:p.Market})})}),(0,f.jsx)("td",{className:"px-6 py-4 whitespace-nowrap",children:e.feePercent}),(0,f.jsxs)("td",{className:"px-6 py-4 whitespace-nowrap",children:[(0,f.jsx)("p",{children:N(parseFloat(e.usdValue))}),(0,f.jsxs)("p",{className:"text-slate-400",children:[e.total," ",(0,f.jsxs)("span",{className:"text-sm",children:[e.coinA,"x"]})]})]}),(0,f.jsx)("td",{className:"px-6 py-4 whitespace-nowrap",children:e.streams})]}):eQ(e)?(0,f.jsxs)(f.Fragment,{children:[(0,f.jsx)("td",{className:"flex items-center px-2 py-4 whitespace-nowrap space-x-2",children:(0,f.jsx)(eZ,{token:e.token,type:p.Balances})}),(0,f.jsxs)("td",{className:"px-6 py-4 whitespace-nowrap",children:[(0,f.jsx)("p",{children:e.token===B.sN.WBTC||e.token===B.sN.IbAlluoBTC||e.token===B.sN.StIbAlluoBTC||e.token===B.sN.ETH||e.token===B.sN.IbAlluoETH||e.token===B.sN.StIbAlluoETH?null===(s=parseFloat(e.ricAmount).toFixed(20).match(/^-?\d*\.?0*\d{0,2}/))||void 0===s?void 0:s[0].replace(/(?:\.0+|(\.\d+?)0+)$/,"$1"):parseFloat(e.ricAmount).toFixed(2)}),(0,f.jsx)("p",{className:"text-slate-400",children:N(parseFloat(e.ricUsdAmount))})]}),(0,f.jsxs)("td",{className:"px-6 py-4 whitespace-nowrap",children:[(0,f.jsx)("p",{children:"N/A"===e.walletAmount?e.walletAmount:e.token===B.sN.WBTC||e.token===B.sN.IbAlluoBTC||e.token===B.sN.StIbAlluoBTC||e.token===B.sN.ETH||e.token===B.sN.IbAlluoETH||e.token===B.sN.StIbAlluoETH?null===(l=parseFloat(e.walletAmount).toFixed(20).match(/^-?\d*\.?0*\d{0,2}/))||void 0===l?void 0:l[0].replace(/(?:\.0+|(\.\d+?)0+)$/,"$1"):parseFloat(e.walletAmount).toFixed(2)}),(0,f.jsx)("p",{className:"text-slate-400",children:"N/A"===e.walletUsdAmount?e.walletUsdAmount:N(parseFloat(e.walletUsdAmount))})]})]}):(0,f.jsx)(f.Fragment,{})},t)})})]})]}),s.length>0&&(0,f.jsxs)("div",{className:"flex justify-end text-slate-500 space-x-2 mt-4",children:[(0,f.jsx)("button",{onClick:d,className:"".concat(1!==u&&"hover:text-slate-300"," ").concat(1===u&&"text-slate-600"),disabled:1===u,children:(0,f.jsx)(eM.Z,{className:"h-4 w-4"})}),(0,f.jsx)("button",{onClick:()=>y(1),className:"".concat(1===u&&"text-slate-100"),children:"1"}),m.before?"...":"",m.paginationGroup.map(e=>(0,f.jsx)("button",{onClick:()=>y(e),className:"".concat(u===e?"text-slate-100":""),children:e},e)),m.after?"...":"",x>1&&(0,f.jsx)("button",{onClick:()=>y(x),className:"".concat(u===x&&"text-slate-100"),children:x}),(0,f.jsx)("button",{onClick:c,className:"".concat(u!==x&&"hover:text-slate-300"," ").concat(u===x&&"text-slate-600"),disabled:u===x,children:(0,f.jsx)(eL.Z,{className:"h-4 w-4"})})]})]})},ez=["token","ricochet-balance","wallet-balance"],eV=e=>{let{tokens:t,balances:s}=e,{t:n}=(0,_.$G)("home"),{address:a,isConnected:l}=(0,E.mA)(),{chain:i}=(0,E.LN)(),[r,o]=(0,S.useState)(0),[c,d]=(0,S.useState)(!0),u=eg(),[p,m]=(0,S.useState)(),[y,x]=(0,S.useState)({}),[h,b]=(0,S.useState)([]);return(0,S.useEffect)(()=>{m([]),i&&((null==i?void 0:i.id)===80001&&m(Q),(null==i?void 0:i.id)===137&&m(G),(null==i?void 0:i.id)===10&&m(H))},[null==i?void 0:i.id,s]),(0,S.useEffect)(()=>{l&&(null==i?void 0:i.id)&&(t&&x(t),(async()=>{Object.keys(y).length&&Object.keys(s).length&&await Promise.all(p.map(async e=>{if(!a)return;let t=await (0,U.EG)({address:a,chainId:i.id,token:e.coin!==B.sN.RIC&&e.coin!==B.sN.OpRIC?e.tokenAddress:void 0});return{token:e.coin,ricAmount:s[e.superTokenAddress],ricUsdAmount:(parseFloat(s[e.superTokenAddress])*u.get(e.superTokenAddress)).toFixed(2),walletAmount:e.coin===B.sN.RIC?"N/A":null==t?void 0:t.formatted,walletUsdAmount:e.coin===B.sN.RIC?"N/A":(parseFloat(null==t?void 0:t.formatted)*u.get(e.superTokenAddress)).toFixed(2),color:ev[e.coin]}})).then(e=>{let t=e.sort((e,t)=>parseFloat(t.ricAmount)-parseFloat(e.ricAmount));t.length>0&&b(t)})})())},[l,t,s,y,p]),(0,f.jsxs)(f.Fragment,{children:[(0,f.jsx)("p",{className:"font-light uppercase tracking-widest text-primary-500",children:n("your-balances")}),!c&&s&&(0,f.jsx)(eh,{close:c,setClose:d,action:r,balanceList:s}),c&&(0,f.jsxs)(f.Fragment,{children:[(0,f.jsxs)("div",{className:"flex flex-wrap items-center justify-evenly basis-1/3 my-4",children:[(0,f.jsx)(eo,{type:"button",action:"".concat(n("withdraw")),handleClick:()=>{d(!1),o(0)}}),(0,f.jsx)(ec,{type:"button",action:"".concat(n("deposit")),primary:!0,handleClick:()=>{d(!1),o(1)}})]}),(0,f.jsx)("div",{className:"flex justify-center my-4",children:(0,f.jsx)(eO,{tokens:h,geckoPriceList:y,balances:s})}),h&&(0,f.jsx)(eH,{headers:ez,rowData:h,tableLoaderRows:6})]})]})};var e$={src:"/_next/static/media/launchpad-bg.d3b0fdae.jpg",height:2722,width:4096,blurDataURL:"data:image/jpeg;base64,/9j/4AAQSkZJRgABAQAAAQABAAD/2wCEAAoKCgoKCgsMDAsPEA4QDxYUExMUFiIYGhgaGCIzICUgICUgMy03LCksNy1RQDg4QFFeT0pPXnFlZXGPiI+7u/sBCgoKCgoKCwwMCw8QDhAPFhQTExQWIhgaGBoYIjMgJSAgJSAzLTcsKSw3LVFAODhAUV5PSk9ecWVlcY+Ij7u7+//CABEIAAUACAMBIgACEQEDEQH/xAAnAAEBAAAAAAAAAAAAAAAAAAAABwEBAAAAAAAAAAAAAAAAAAAABP/aAAwDAQACEAMQAAAAnQQv/8QAGxABAAEFAQAAAAAAAAAAAAAAAQIAAwQREiH/2gAIAQEAAT8AhcI4sjgV83X/xAAaEQEAAQUAAAAAAAAAAAAAAAACAQADERIx/9oACAECAQE/ALjS1zPDFf/EABYRAAMAAAAAAAAAAAAAAAAAAAABIf/aAAgBAwEBPwBQ/9k=",blurWidth:8,blurHeight:5};let eK=e=>{let{content:t}=e;return(0,f.jsx)("div",{className:"card",children:t})},eq=e=>{let{content:t}=e;return(0,f.jsx)("div",{className:"card-outline text-center",children:t})},eY=e=>{let{content:t}=e;return(0,f.jsxs)("div",{className:"card text-center relative",children:[(0,f.jsx)("div",{className:"z-10",children:t}),(0,f.jsx)(eu(),{src:e$,className:"object-cover object-bottom absolute inset-0 z-0 rounded-lg",draggable:"false",fill:!0,sizes:"(max-width: 768px) 100vw, (max-width: 1200px) 50vw, 33vw",alt:"Launchpad Background",priority:!0}),(0,f.jsx)("div",{className:"absolute inset-0 bg-gradient-to-b from-slate-700 via-slate-800 to-slate-900 z-0 opacity-60 rounded-lg"})]})},eJ=e=>{let{content:t}=e;return(0,f.jsx)("div",{className:"card-container",children:t})},eX=e=>{let{content:t}=e;return(0,f.jsx)("div",{className:"flex flex-wrap items-center justify-between space-y-4 md:space-y-0 mb-10",children:t})},e0=e=>{let{content:t}=e;return(0,f.jsxs)("div",{className:"card-sm",children:[!t&&(0,f.jsx)("div",{className:"animate-pulse",children:(0,f.jsxs)("div",{className:"grid grid-rows-2 gap-2",children:[(0,f.jsx)("div",{className:"h-5 bg-slate-700 rounded"}),(0,f.jsx)("div",{className:"h-6 bg-slate-700 rounded"})]})}),!!t&&t]})},e1=e=>(0,f.jsxs)("svg",{viewBox:"0 0 50 25",fill:"none",xmlns:"http://www.w3.org/2000/svg",...e,children:[(0,f.jsx)("path",{d:"M37.918 0h-23.78c0-.043 5.913 4.585 5.913 4.585L0 12.083l20.266 7.669-5.87 4.756 23.522-.343A12.068 12.068 0 0 0 50 12.083C50 5.399 43.359-.043 37.918 0Zm0 21.508c-5.227 0-9.426-4.241-9.426-9.425 0-5.185 4.241-9.426 9.426-9.426 5.184 0 9.426 4.241 9.426 9.426 0 5.184-4.242 9.425-9.426 9.425Z",fill:"#fff"}),(0,f.jsx)("path",{d:"M35.947 18.038h-2.185v-6.684s2.185.129 2.185 1.414v5.27ZM33.89 4.842h5.313c1.5 0 4.242.514 4.242 4.113s-3.514 3.813-3.514 3.813l3.342 5.27h-2.185l-2.87-4.542v-2.142s3.17.471 3.17-2.485-2.185-2.185-2.185-2.185l-4.113-.129s-1.114-.3-1.114-1.67l-.086-.043Z",fill:"#fff"})]}),e2=()=>{let{t:e}=(0,_.$G)("footer");return(0,f.jsxs)("div",{className:"flex flex-wrap items-start justify-between bg-footer-500 p-16",children:[(0,f.jsxs)("h6",{className:"flex space-x-2 mb-10 md:mb-0",children:[(0,f.jsx)(e1,{width:"50",height:"25"}),(0,f.jsx)("span",{className:"text-slate-100 font-semibold tracking-wide",children:"Ricochet"})]}),(0,f.jsxs)("section",{className:"flex flex-wrap items-center space-x-8 md:space-x-14 lg:space-x-32",children:[(0,f.jsxs)("article",{className:"flex flex-col space-y-4",children:[(0,f.jsx)("h6",{className:"text-slate-600 font-bold",children:e("support")}),(0,f.jsx)("a",{href:"https://discord.gg/ptqCBnJ9dr",target:"_blank",rel:"noopener noreferrer",className:"text-primary-400 underline",children:e("discord")}),(0,f.jsx)("a",{href:"https://docs.ricochet.exchange/tutorial/using-the-dapp",target:"_blank",rel:"noopener noreferrer",className:"text-primary-400 underline",children:e("tutorials")}),(0,f.jsx)("a",{href:"https://docs.ricochet.exchange/",target:"_blank",rel:"noopener noreferrer",className:"text-primary-400 underline",children:e("documentation")})]}),(0,f.jsxs)("article",{className:"flex flex-col space-y-4",children:[(0,f.jsx)("h6",{className:"text-slate-600 font-bold",children:e("explore")}),(0,f.jsx)("a",{href:"https://medium.com/ricochet-exchange",target:"_blank",rel:"noopener noreferrer",className:"text-primary-400 underline",children:e("medium")}),(0,f.jsx)("a",{href:"https://github.com/Ricochet-Exchange/",target:"_blank",rel:"noopener noreferrer",className:"text-primary-400 underline",children:e("github")}),(0,f.jsx)("a",{href:"https://twitter.com/ricochetxchange",target:"_blank",rel:"noopener noreferrer",className:"text-primary-400 underline",children:e("twitter")})]})]})]})};var e5=s(62367),e4=s(13012),e3=s(56466);let e6=()=>{let{t:e}=(0,_.$G)("home"),[t,s]=(0,S.useContext)(T.wP),{isConnected:n}=(0,E.mA)(),{chain:a}=(0,E.LN)(),[l,i]=(0,S.useState)(!1),[r,o]=(0,S.useState)(e3.YK[0]),[c,d]=(0,S.useState)(1e3),[u]=el.Z.useLazyStartStreamQuery(),p=()=>{let e="https://app.uniswap.org/#/swap?theme=dark&inputCurrency=".concat(Z.QA,"&outputCurrency=").concat(Z.cZ,"&exactAmount=100000&exactField=output");window.open(e,"_blank")};(0,S.useEffect)(()=>{a&&(80001===a.id&&o(e3.nh[0]),10===a.id&&o(e3.kO[0]))},[a]);let m=()=>{if(!r||!c){s(L.Z.showErrorAlert("Oops!","We were unable to find the selected position. Please try another one.")),setTimeout(()=>{s(L.Z.hideAlert())},5e3);return}if(i(!0),s(L.Z.showLoadingAlert("Waiting for your transaction to be confirmed...","")),!c)return;let e="20";if((null==r?void 0:r.type)===e3.Z6.launchpad){let t=new e4.Z(e),n=t.div(2592e3).times(1e18).div(c).round(0,0).times(c).div(1e18).times(259200).div(3600).div(24).div(30).times(10);e=n.toFixed()}let a=u({amount:e,config:r});a.then(e=>{e.isSuccess&&s(L.Z.showSuccessAlert("Success","Transaction confirmed \uD83D\uDC4C")),i(e.isLoading),e.isError&&s(L.Z.showErrorAlert("Error","".concat(null==e?void 0:e.error))),setTimeout(()=>{s(L.Z.hideAlert())},5e3)}).catch(e=>s(L.Z.showErrorAlert("Error","".concat(e||(null==e?void 0:e.message)))))};return(0,f.jsxs)("div",{className:"flex flex-col space-y-4",children:[(0,f.jsxs)("div",{className:"flex items-center justify-center text-slate-100 space-x-3",children:[(0,f.jsx)(e5.Z,{className:"h-6 w-6"}),(0,f.jsx)("p",{className:"uppercase tracking-widest",children:"Rexpro"})]}),(0,f.jsx)("p",{className:"text-slate-100",children:e("start-a-position")}),n&&(0,f.jsx)(ec,{type:"button",primary:!0,loading:l,disabled:l,action:l?"".concat(e("confirming"),"..."):e("start-20-position"),handleClick:m}),(0,f.jsx)(ec,{type:"button",primary:!1,action:"".concat(e("buy")," 100,000 RIC"),handleClick:p})]})};var e8=s(89396);let e7=function(e,t,s){var n;let a=arguments.length>3&&void 0!==arguments[3]?arguments[3]:0;return(s.size>0&&t.size>0?parseFloat(null===(n=t.get(e.flowKey))||void 0===n?void 0:n.flowsOwned)*s.get(e.tokenA):0).toFixed(a)},e9=function(e,t){let s=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0;return(parseFloat(e)*t).toFixed(s)},te=["market","fee percent","total value streaming","currently streaming"],tt=e=>{let{coingeckoPrices:t,sortedList:s,queries:n}=e,{t:a}=(0,_.$G)("home"),[l,i]=(0,S.useState)(""),[r,o]=(0,S.useState)([]),[c,d]=(0,S.useState)([]),{chain:u}=(0,E.LN)();(0,S.useEffect)(()=>{if(s.length>0&&n.size>0){let e=[];s.map(s=>{var a,l;return e.push({...s,total:parseFloat(null===(a=n.get(s.flowKey))||void 0===a?void 0:a.flowsOwned)||0,usdValue:e7(s,n,t),feePercent:s.coinA.includes("IbAlluo")?"0.5%":"2%",streams:(null===(l=n.get(s.flowKey))||void 0===l?void 0:l.totalFlows)||0})});let a=e.sort((e,t)=>t.total-e.total);o(a)}},[n,t,s]);let p=e=>{let{value:t}=e.target;i(t),r.filter(e=>e.coinA.toUpperCase().includes(t.toUpperCase())||e.coinB.toUpperCase().includes(t.toUpperCase()))};return(0,f.jsxs)(f.Fragment,{children:[(0,f.jsx)(eX,{content:(0,f.jsxs)("div",{className:"w-full flex flex-wrap items-center justify-between space-y-4 lg:space-y-0",children:[(0,f.jsx)("p",{className:"text-slate-400 uppercase",children:a("markets")}),(0,f.jsxs)("label",{className:"relative block w-max",children:[(0,f.jsx)("span",{className:"sr-only",children:"Search"}),(0,f.jsx)("span",{className:"absolute inset-y-0 right-0 flex items-center pr-2",children:(0,f.jsx)(e8.Z,{className:"h-4 w-4 fill-slate-400",viewBox:"0 0 20 20"})}),(0,f.jsx)("input",{className:"input-search",placeholder:a("search"),type:"text",name:"search",value:l,onChange:p})]})]})}),u&&(0,f.jsx)(eH,{headers:te,rowData:l?c:r,tableLoaderRows:12})]})};var ts=s(6512),tn=s(44149),ta=s(82847),tl=s(47145);let ti=e=>(0,f.jsxs)("svg",{viewBox:"0 0 66 33",fill:"none",xmlns:"http://www.w3.org/2000/svg",...e,children:[(0,f.jsx)("path",{d:"M50.051 0H18.663c0-.056 7.805 6.052 7.805 6.052L0 15.949l26.75 10.123-7.747 6.278 31.048-.452C58.874 31.898 66 24.772 66 15.949S57.234-.056 50.051 0Zm0 28.391c-6.9 0-12.442-5.599-12.442-12.442s5.6-12.442 12.442-12.442c6.844 0 12.443 5.599 12.443 12.442s-5.6 12.442-12.443 12.442Z",fill:"url(#a)"}),(0,f.jsx)("path",{d:"M47.45 23.81h-2.885v-8.822s2.885.17 2.885 1.866v6.956ZM44.735 6.391h7.013c1.98 0 5.599.679 5.599 5.43 0 4.75-4.638 5.033-4.638 5.033l4.412 6.956h-2.885l-3.789-5.995v-2.828s4.185.623 4.185-3.28c0-3.902-2.884-2.884-2.884-2.884l-5.43-.17s-1.47-.396-1.47-2.205l-.113-.057Z",fill:"#C5C2C6"}),(0,f.jsx)("defs",{children:(0,f.jsxs)("linearGradient",{id:"a",x1:0,y1:16.175,x2:66,y2:16.175,gradientUnits:"userSpaceOnUse",children:[(0,f.jsx)("stop",{stopColor:"#6194C3"}),(0,f.jsx)("stop",{offset:1,stopColor:"#B5CBE2"})]})})]});var tr=s(11163),to=s.n(tr),tc=s(91463),td=s.n(tc),tu=s(41664),tp=s.n(tu),tm=s(23857);let ty=e=>{let{locale:t,...s}=e,n=(0,tr.useRouter)(),a=s.href||n.asPath,l=n.pathname;return Object.keys(n.query).forEach(e=>{if("locale"===e){l=l.replace("[".concat(e,"]"),t);return}l=l.replace("[".concat(e,"]"),n.query[e])}),t&&(a=s.href?"/".concat(t).concat(s.href):l),(0,f.jsx)(tp(),{className:"text-sm text-slate-200",href:a,onClick:()=>{var e;return null===(e=tm.Z.cache)||void 0===e?void 0:e.call(tm.Z,t)},children:t})},tx=e=>{let{children:t,skipLocaleHandling:s,...n}=e,a=(0,tr.useRouter)(),l=n.locale||a.query.locale||"",i=n.href||a.asPath;return 0===i.indexOf("http")&&(s=!0),l&&!s&&(i=i?"/".concat(l).concat(i):a.pathname.replace("[locale]",l)),(0,f.jsx)(f.Fragment,{children:(0,f.jsx)(tp(),{href:i,...n,children:t})})};function th(){let{disconnect:e}=(0,E.qL)(),{address:t,isConnected:s}=(0,E.mA)(),{data:n,isError:a,isLoading:l}=(0,E.KQ)({address:t,chainId:I.yu.id,token:Z.cZ}),{t:i}=(0,_.$G)("home"),r=to().query.locale||td().i18n.defaultLocale;return(0,f.jsx)(ts.p,{as:"nav",className:"navbar",children:t=>{let{open:o}=t;return(0,f.jsxs)(f.Fragment,{children:[(0,f.jsxs)(tx,{href:"/",className:"p-2 mr-4 inline-flex items-center space-x-2",draggable:!1,children:[(0,f.jsx)(ti,{width:"50",height:"25"}),(0,f.jsx)("span",{className:"text-xl tracking-wide",children:"Ricochet"})]}),(0,f.jsx)("p",{className:"inline-flex items-center space-x-2",children:td().i18n.locales.map(e=>e===r?null:(0,f.jsx)(ty,{locale:e},e))}),(0,f.jsxs)(ts.p.Button,{className:"btn-mobile-menu",children:[(0,f.jsx)("span",{className:"sr-only",children:"Open main menu"}),o?(0,f.jsx)(w.Z,{className:"h-6 w-6","aria-hidden":"true"}):(0,f.jsx)(tn.Z,{className:"h-6 w-6","aria-hidden":"true"})]}),(0,f.jsx)(ts.p.Panel,{className:"w-full lg:inline-flex lg:flex-grow lg:w-auto",children:(0,f.jsxs)("div",{className:"mobile-links",children:[(0,f.jsxs)("a",{className:"inline-flex items-center space-x-1 text-primary-500",href:"https://discord.com/channels/862796510604296263/864667072357597185",target:"_blank",rel:"noopener noreferrer",children:[(0,f.jsx)("span",{className:"underline",children:"support"}),(0,f.jsx)(ta.Z,{className:"h-4 w-4"})]}),l&&(0,f.jsx)("p",{children:"Fetching balance..."}),a&&(0,f.jsx)(f.Fragment,{}),!l&&!a&&s&&(0,f.jsxs)("p",{children:[Number(null==n?void 0:n.formatted).toFixed(2)," ",null==n?void 0:n.symbol]}),(0,f.jsx)(tl.x3.Custom,{children:e=>{let{isConnected:t,show:s,unsupported:n,truncatedAddress:a,ensName:l}=e;return(0,f.jsx)(f.Fragment,{children:t?n?(0,f.jsx)(ei,{action:"".concat(i("wrong-network")),handleClick:s,type:"button"}):(0,f.jsx)("button",{type:"button",className:"address-link",children:null!=l?l:a}):(0,f.jsx)(ei,{action:"".concat(i("connect-wallet")),handleClick:s,type:"button"})})}}),s&&(0,f.jsxs)("div",{className:"mt-3 space-y-1 px-2",children:[(0,f.jsx)(ts.p.Button,{as:"a",href:"https://staging.ricochet.exchange/#/recent-activity",rel:"noreferrer",target:"_blank",className:"block rounded-md px-3 py-2 text-base font-medium text-slate-400 hover:bg-slate-700 hover:text-slate-100 cursor-pointer",children:i("your-activity")}),(0,f.jsx)(ts.p.Button,{as:"a",onClick:()=>e(),className:"block rounded-md px-3 py-2 text-base font-medium text-slate-400 hover:bg-slate-700 hover:text-slate-100 cursor-pointer",children:i("disconnect-wallet")})]})]})}),(0,f.jsxs)("div",{className:"desktop-links",children:[(0,f.jsxs)("a",{className:"inline-flex items-center space-x-1 text-primary-500",href:"https://discord.com/channels/862796510604296263/864667072357597185",target:"_blank",rel:"noopener noreferrer",children:[(0,f.jsx)("span",{className:"underline",children:i("support")}),(0,f.jsx)(ta.Z,{className:"h-4 w-4"})]}),l&&(0,f.jsx)("p",{children:"Fetching balance..."}),a&&(0,f.jsx)(f.Fragment,{}),!l&&!a&&s&&(0,f.jsxs)("p",{children:[Number(null==n?void 0:n.formatted).toFixed(2)," ",null==n?void 0:n.symbol]}),(0,f.jsx)(tl.x3.Custom,{children:e=>{let{isConnected:t,show:s,unsupported:n,truncatedAddress:a,ensName:l}=e;return(0,f.jsx)(f.Fragment,{children:t?n?(0,f.jsx)(ei,{action:"".concat(i("wrong-network")),handleClick:s,type:"button"}):(0,f.jsx)(er,{action:null!=l?l:a,handleClick:s,type:"button"}):(0,f.jsx)(ei,{action:"".concat(i("connect-wallet")),handleClick:s,type:"button"})})}})]})]})}})}var tf=s(68552);let tb=async(e,t,s,n,a)=>new Promise((l,i)=>{(0,tf.x)((null==t?void 0:t.id)||137).then(async t=>{if(s.length>0){let r=s.map(async e=>{let s=await t.cfaV1.getNetFlow({superToken:e.tokenA,account:n,providerOrSigner:a});return s});Promise.all(r).then(t=>{let s=t.reduce((e,t)=>e+parseFloat(t),0).toFixed(0);if(isNaN(+s))return i();let n=new e4.Z(s),a=n.times(new e4.Z("2592000")).div(new e4.Z("10e17")).times(e).toFixed(0);l({flowRate:a,loading:!1})})}else l({flowRate:"0",loading:!1})}).catch(e=>i())}),tg=(e,t)=>{let{chain:s}=(0,E.LN)(),n=(0,E.yL)({chainId:(null==s?void 0:s.id)||I.yu.id}),{address:a,isConnected:l}=(0,E.mA)(),[i,r]=(0,S.useState)("0"),[o,c]=(0,S.useState)(!0);return(0,S.useEffect)(()=>{l&&t&&(null==s?void 0:s.id)&&e.length>0&&(async()=>{let{flowRate:l,loading:i}=await tb(t,s,e,a,n);r(l),c(i)})()},[l,e,t]),{usdFlowRate:i,usdFlowRateLoading:o}},tv=e=>{let{positions:t,usdPrice:s}=e,{t:n}=(0,eN.$G)("home"),[a,l]=(0,S.useState)(!0),{usdFlowRate:i,usdFlowRateLoading:r}=tg(t,s);return((0,S.useEffect)(()=>{l(r)},[r]),a)?(0,f.jsx)("div",{className:"animate-pulse",children:(0,f.jsx)("div",{className:"h-4 rounded bg-slate-700"})}):(0,f.jsx)(f.Fragment,{children:!a&&i&&(0,f.jsxs)("p",{className:"text-slate-100 font-light text-2xl",children:[N(parseFloat(i))," / ",n("month")]})})},tA=[{inputs:[{internalType:"address",name:"_owner",type:"address"},{internalType:"contract ISuperfluid",name:"_host",type:"address"},{internalType:"contract IConstantFlowAgreementV1",name:"_cfa",type:"address"},{internalType:"contract IInstantDistributionAgreementV1",name:"_ida",type:"address"},{internalType:"string",name:"_registrationKey",type:"string"},{internalType:"contract IREXReferral",name:"_rexReferral",type:"address"}],stateMutability:"nonpayable",type:"constructor"},{anonymous:!1,inputs:[{indexed:!1,internalType:"uint256",name:"totalAmount",type:"uint256"},{indexed:!1,internalType:"uint256",name:"feeCollected",type:"uint256"},{indexed:!1,internalType:"address",name:"token",type:"address"}],name:"Distribution",type:"event"},{anonymous:!1,inputs:[{indexed:!0,internalType:"address",name:"previousOwner",type:"address"},{indexed:!0,internalType:"address",name:"newOwner",type:"address"}],name:"OwnershipTransferred",type:"event"},{inputs:[{internalType:"contract ISuperToken",name:"_token",type:"address"},{internalType:"uint128",name:"_feeRate",type:"uint128"},{internalType:"uint256",name:"_emissionRate",type:"uint256"},{internalType:"uint256",name:"_requestId",type:"uint256"},{internalType:"uint128",name:"_shareScaler",type:"uint128"}],name:"addOutputPool",outputs:[],stateMutability:"nonpayable",type:"function"},{inputs:[{internalType:"contract ISuperToken",name:"_superToken",type:"address"},{internalType:"address",name:"_agreementClass",type:"address"},{internalType:"bytes32",name:"",type:"bytes32"},{internalType:"bytes",name:"_agreementData",type:"bytes"},{internalType:"bytes",name:"",type:"bytes"},{internalType:"bytes",name:"_ctx",type:"bytes"}],name:"afterAgreementCreated",outputs:[{internalType:"bytes",name:"_newCtx",type:"bytes"}],stateMutability:"nonpayable",type:"function"},{inputs:[{internalType:"contract ISuperToken",name:"_superToken",type:"address"},{internalType:"address",name:"_agreementClass",type:"address"},{internalType:"bytes32",name:"",type:"bytes32"},{internalType:"bytes",name:"_agreementData",type:"bytes"},{internalType:"bytes",name:"_cbdata",type:"bytes"},{internalType:"bytes",name:"_ctx",type:"bytes"}],name:"afterAgreementTerminated",outputs:[{internalType:"bytes",name:"_newCtx",type:"bytes"}],stateMutability:"nonpayable",type:"function"},{inputs:[{internalType:"contract ISuperToken",name:"_superToken",type:"address"},{internalType:"address",name:"_agreementClass",type:"address"},{internalType:"bytes32",name:"",type:"bytes32"},{internalType:"bytes",name:"_agreementData",type:"bytes"},{internalType:"bytes",name:"_cbdata",type:"bytes"},{internalType:"bytes",name:"_ctx",type:"bytes"}],name:"afterAgreementUpdated",outputs:[{internalType:"bytes",name:"_newCtx",type:"bytes"}],stateMutability:"nonpayable",type:"function"},{inputs:[{internalType:"contract ISuperToken",name:"_superToken",type:"address"},{internalType:"address",name:"_agreementClass",type:"address"},{internalType:"bytes32",name:"",type:"bytes32"},{internalType:"bytes",name:"_agreementData",type:"bytes"},{internalType:"bytes",name:"",type:"bytes"}],name:"beforeAgreementCreated",outputs:[{internalType:"bytes",name:"_cbdata",type:"bytes"}],stateMutability:"view",type:"function"},{inputs:[{internalType:"contract ISuperToken",name:"_superToken",type:"address"},{internalType:"address",name:"_agreementClass",type:"address"},{internalType:"bytes32",name:"",type:"bytes32"},{internalType:"bytes",name:"_agreementData",type:"bytes"},{internalType:"bytes",name:"",type:"bytes"}],name:"beforeAgreementTerminated",outputs:[{internalType:"bytes",name:"_cbdata",type:"bytes"}],stateMutability:"view",type:"function"},{inputs:[{internalType:"contract ISuperToken",name:"_superToken",type:"address"},{internalType:"address",name:"_agreementClass",type:"address"},{internalType:"bytes32",name:"",type:"bytes32"},{internalType:"bytes",name:"_agreementData",type:"bytes"},{internalType:"bytes",name:"_ctx",type:"bytes"}],name:"beforeAgreementUpdated",outputs:[{internalType:"bytes",name:"_cbdata",type:"bytes"}],stateMutability:"view",type:"function"},{inputs:[{internalType:"bytes",name:"ctx",type:"bytes"}],name:"distribute",outputs:[{internalType:"bytes",name:"newCtx",type:"bytes"}],stateMutability:"nonpayable",type:"function"},{inputs:[{internalType:"address",name:"streamer",type:"address"}],name:"emergencyCloseStream",outputs:[],stateMutability:"nonpayable",type:"function"},{inputs:[],name:"emergencyDrain",outputs:[],stateMutability:"nonpayable",type:"function"},{inputs:[{internalType:"uint256",name:"_requestId",type:"uint256"}],name:"getCurrentValue",outputs:[{internalType:"bool",name:"_ifRetrieve",type:"bool"},{internalType:"uint256",name:"_value",type:"uint256"},{internalType:"uint256",name:"_timestampRetrieved",type:"uint256"}],stateMutability:"view",type:"function"},{inputs:[{internalType:"uint32",name:"_index",type:"uint32"}],name:"getEmissionRate",outputs:[{internalType:"uint256",name:"",type:"uint256"}],stateMutability:"view",type:"function"},{inputs:[{internalType:"uint32",name:"_index",type:"uint32"}],name:"getFeeRate",outputs:[{internalType:"uint128",name:"",type:"uint128"}],stateMutability:"view",type:"function"},{inputs:[{internalType:"uint32",name:"_index",type:"uint32"},{internalType:"address",name:"_streamer",type:"address"}],name:"getIDAShares",outputs:[{internalType:"bool",name:"_exist",type:"bool"},{internalType:"bool",name:"_approved",type:"bool"},{internalType:"uint128",name:"_units",type:"uint128"},{internalType:"uint256",name:"_pendingDistribution",type:"uint256"}],stateMutability:"view",type:"function"},{inputs:[],name:"getInputToken",outputs:[{internalType:"contract ISuperToken",name:"",type:"address"}],stateMutability:"view",type:"function"},{inputs:[],name:"getLastDistributionAt",outputs:[{internalType:"uint256",name:"",type:"uint256"}],stateMutability:"view",type:"function"},{inputs:[{internalType:"contract ISuperToken",name:"token",type:"address"}],name:"getOracleInfo",outputs:[{components:[{internalType:"uint256",name:"requestId",type:"uint256"},{internalType:"uint256",name:"usdPrice",type:"uint256"},{internalType:"uint256",name:"lastUpdatedAt",type:"uint256"}],internalType:"struct REXMarket.OracleInfo",name:"",type:"tuple"}],stateMutability:"view",type:"function"},{inputs:[{internalType:"uint32",name:"_index",type:"uint32"}],name:"getOutputPool",outputs:[{components:[{internalType:"contract ISuperToken",name:"token",type:"address"},{internalType:"uint128",name:"feeRate",type:"uint128"},{internalType:"uint256",name:"emissionRate",type:"uint256"},{internalType:"uint128",name:"shareScaler",type:"uint128"}],internalType:"struct REXMarket.OutputPool",name:"",type:"tuple"}],stateMutability:"view",type:"function"},{inputs:[],name:"getRateTolerance",outputs:[{internalType:"uint256",name:"",type:"uint256"}],stateMutability:"view",type:"function"},{inputs:[{internalType:"address",name:"_streamer",type:"address"},{internalType:"contract ISuperToken",name:"_token",type:"address"}],name:"getStreamRate",outputs:[{internalType:"int96",name:"_requesterFlowRate",type:"int96"}],stateMutability:"view",type:"function"},{inputs:[],name:"getTellorOracle",outputs:[{internalType:"address",name:"",type:"address"}],stateMutability:"view",type:"function"},{inputs:[],name:"getTotalInflow",outputs:[{internalType:"int96",name:"",type:"int96"}],stateMutability:"view",type:"function"},{inputs:[{internalType:"contract ISuperToken",name:"_inputToken",type:"address"},{internalType:"uint256",name:"_rateTolerance",type:"uint256"},{internalType:"contract ITellor",name:"_tellor",type:"address"},{internalType:"uint256",name:"_inputTokenRequestId",type:"uint256"},{internalType:"uint128",name:"_affiliateFee",type:"uint128"},{internalType:"uint128",name:"_feeRate",type:"uint128"}],name:"initializeMarket",outputs:[],stateMutability:"nonpayable",type:"function"},{inputs:[{internalType:"uint256",name:"_emissionRate",type:"uint256"}],name:"initializeSubsidies",outputs:[],stateMutability:"nonpayable",type:"function"},{inputs:[{internalType:"contract ISuperToken",name:"_inputTokenA",type:"address"},{internalType:"uint256",name:"_inputTokenARequestId",type:"uint256"},{internalType:"uint128",name:"_inputTokenAShareScaler",type:"uint128"},{internalType:"contract ISuperToken",name:"_inputTokenB",type:"address"},{internalType:"uint256",name:"_inputTokenBRequestId",type:"uint256"},{internalType:"uint128",name:"_inputTokenBShareScaler",type:"uint128"},{internalType:"uint128",name:"_feeRate",type:"uint128"},{internalType:"uint256",name:"_rateTolerance",type:"uint256"}],name:"initializeTwoWayMarket",outputs:[],stateMutability:"nonpayable",type:"function"},{inputs:[],name:"isAppJailed",outputs:[{internalType:"bool",name:"",type:"bool"}],stateMutability:"view",type:"function"},{inputs:[],name:"owner",outputs:[{internalType:"address",name:"",type:"address"}],stateMutability:"view",type:"function"},{inputs:[],name:"renounceOwnership",outputs:[],stateMutability:"nonpayable",type:"function"},{inputs:[],name:"ric",outputs:[{internalType:"address",name:"",type:"address"}],stateMutability:"view",type:"function"},{inputs:[{internalType:"uint32",name:"_index",type:"uint32"},{internalType:"uint128",name:"_emissionRate",type:"uint128"}],name:"setEmissionRate",outputs:[],stateMutability:"nonpayable",type:"function"},{inputs:[{internalType:"uint32",name:"_index",type:"uint32"},{internalType:"uint128",name:"_feeRate",type:"uint128"}],name:"setFeeRate",outputs:[],stateMutability:"nonpayable",type:"function"},{inputs:[{internalType:"uint256",name:"_rate",type:"uint256"}],name:"setRateTolerance",outputs:[],stateMutability:"nonpayable",type:"function"},{inputs:[{internalType:"address",name:"newOwner",type:"address"}],name:"transferOwnership",outputs:[],stateMutability:"nonpayable",type:"function"},{inputs:[{internalType:"contract ISuperToken",name:"_token",type:"address"}],name:"updateTokenPrice",outputs:[],stateMutability:"nonpayable",type:"function"},{inputs:[],name:"updateTokenPrices",outputs:[],stateMutability:"nonpayable",type:"function"}],tw=e=>Z.zV[e],tj=async(e,t,s,n)=>{if("twoWayIbUsdIbBTC"===e||"twoWayIbEthIbUsd"===e||"twoWayIbBTCIbUsd"===e||"twoWayIbUsdIbEth"===e){let{outputIndex:a}=e3.zJ.filter(e=>e.input===t&&e.output===s)[0],l=await (0,U.a4)({address:tw(e),abi:tA,functionName:"getOutputPool",args:[a]}),i=(null==l?void 0:l.shareScaler)*1e3;return i}return 1e4};(i=m||(m={})).USDCxDAI="usdcxdai",i.DAIxUSDC="daixusdc",i.USDCxETH="usdcxeth",i.ETHxUSDC="ethxusdc",i.DAIxETH="daixeth",i.ETHxDAI="ethxdai",i.USDCxWBTC="usdcxwbtc",i.WBTCxUSDC="wbtcxusdc",i.DAIxWBTC="daixwbtc",i.WBTCxDAI="wbtcxdai",i.USDCxMATIC="usdcxmatic",i.MATICxUSDC="maticxusdc",i.MATICxDAI="maticxdai",i.DAIxMATIC="daixmatic",i.USDC_WBTC="twoWayusdcWbtc",i.USDC_WETH="twoWayusdcWeth",i.WBTC_USDC="twoWaywbtcUsdc",i.WETH_USDC="twoWaywethUsdc",i.DAI_WETH="twoWayDaiWeth",i.WETH_DAI="twoWayWethDai",i.TWO_WAY_USDC_RIC="twoWayUsdcRic",i.TWO_WAY_RIC_USDC="twoWayRicUsdc",i.TWO_WAY_MATIC_USDC="twoWayMaticUsdc",i.TWO_WAY_USDC_MATIC="twoWayUsdcMatic",i.TWO_WAY_MATIC_DAI="twoWayMaticDai",i.TWO_WAY_DAI_MATIC="twoWayDaiMatic",i.TWO_WAY_WBTC_DAI="twoWayWbtcDai",i.TWO_WAY_DAI_WBTC="twoWayDaiWbtc",i.TWO_WAY_IBUSD_IBETH="twoWayIbUsdIbEth",i.TWO_WAY_IBETH_IBUSD="twoWayIbEthIbUsd",i.TWO_WAY_IBUSD_IBBTC="twoWayIbUsdIbBTC",i.TWO_WAY_IBBTC_IBUSD="twoWayIbBTCIbUsd",i.MATICx="maticx",i.DAIx="daix",i.DAI="dai",i.USDCx="usdcx",i.USDC="usdc",i.WETHx="wethx",i.WETH="weth",i.WBTCx="wbtcx",i.WBTC="wbtc",i.HOST="host",i.IDA="ida",i.RICapp="ricApp",i.RIC="ric",i.fUSDCxfDAI="fUSDCxfDAI",i.fDAIxfUSDC="fDAIxfUSDC",i.ricRexShirt="ricRexShirt",i.ricRexHat="ricRexHat",i.StIbAlluoUSD="stiballuousd",i.StIbAlluoETH="stiballuoeth",i.StIbAlluoBTC="stiballuobtc",i.IbAlluoUSD="iballuousd",i.IbAlluoETH="iballuoeth",i.IbAlluoBTC="iballuobtc",i.Referral="referral",(r=y||(y={})).optimismLaunchpad="optimismLaunchpad",r.optimismReferral="optimismReferral",r.opUSDCxopDAI="opusdcxopdai",r.opDAIxopUSDC="opdaixopusdc",r.OPxUSDC="opxusdc",r.USDCxOP="usdcxop",r.DAIxOP="daixop",r.OPxDAI="opxdai",r.opUSDCxopETH="opusdcxopeth",r.opDAIxopETH="opdaixopeth",(o=x||(x={})).none="",o.change="change",o.deposit="deposit";let tN=e=>{let{setClose:t,position:s}=e,{t:n}=(0,_.$G)("home"),{address:a}=(0,E.mA)(),{chain:l}=(0,E.LN)(),[i,r]=(0,S.useState)(),[o,c]=(0,S.useState)(x.none),[d,u]=(0,S.useState)(""),[p,y]=(0,S.useState)(""),[h,b]=(0,S.useContext)(T.wP),[g]=el.Z.useLazyStartStreamQuery(),[v]=el.Z.useLazyStopStreamQuery(),[A,w]=(0,S.useState)(""),[j]=el.Z.useLazyUpgradeQuery(),[N,k]=(0,S.useState)(!1),[C,D]=(0,S.useState)(!1),[F,R]=(0,S.useState)(1e3);(0,S.useEffect)(()=>{var e;if(!s)return;let t=(null==s?void 0:s.flowKey.includes("FlowQuery"))?null==s?void 0:null===(e=s.flowKey)||void 0===e?void 0:e.replace("FlowQuery",""):Object(m)[null==s?void 0:s.flowKey],n=async(e,t,s)=>{let n=await tj(e,t,s,null==l?void 0:l.id).then(e=>e);R(n)};n(t,null==s?void 0:s.tokenA,null==s?void 0:s.tokenB)},[null==s?void 0:s.flowKey,null==s?void 0:s.tokenA,null==s?void 0:s.tokenB]),(0,S.useEffect)(()=>{if(s){let e=G.find(e=>e.coin===s.coinA);ee(null==e?void 0:e.tokenAddress,null==e?void 0:e.superTokenAddress).then(e=>D(e)),r(e)}},[s]),(0,S.useEffect)(()=>{o===x.deposit&&i&&(async()=>{let e=await (0,U.EG)({address:a,chainId:I.yu.id,token:null==i?void 0:i.tokenAddress}).then(e=>null==e?void 0:e.formatted);w(e)})()},[o,i]);let O=()=>{o===x.deposit&&A&&u(A)},M=e=>{null==e||e.preventDefault(),o===x.deposit&&X(a).then(e=>{if(!(0>Number(d))&&(!Object.keys(e).length||!i||0!==Number(e[i.tokenAddress]))&&C){let t=K.O$.from(d).toString();k(!0);let s=j({value:t,tokenAddress:null==i?void 0:i.superTokenAddress});s.then(e=>{e.isSuccess&&b(L.Z.showSuccessAlert("Success","Transaction confirmed \uD83D\uDC4C")),k(e.isLoading),e.isError&&b(L.Z.showErrorAlert("Error","".concat(null==e?void 0:e.error))),setTimeout(()=>{b(L.Z.hideAlert())},5e3)}).catch(e=>b(L.Z.showErrorAlert("Error","".concat(e||(null==e?void 0:e.message)))))}})},B=e=>{if(e.preventDefault(),s&&o===x.change){if(k(!0),b(L.Z.showLoadingAlert("Waiting for your transaction to be confirmed...","")),!s||!F){b(L.Z.showErrorAlert("Oops!","We were unable to find the selected position. Please try another one.")),setTimeout(()=>{b(L.Z.hideAlert())},5e3);return}let t=d;if((null==s?void 0:s.type)===e3.Z6.market){let n=new e4.Z(d),a=n.div(2592e3).times(1e18).div(F).round(0,0).times(F).div(1e18).times(259200).div(3600).div(24).div(30).times(10);t=a.toFixed()}let l={superToken:s.superToken,tokenA:s.tokenA,tokenB:s.tokenB,coinA:s.coinA,coinB:s.coinB,flowKey:s.flowKey,type:s.type},i=g({amount:t,config:l});i.then(e=>{e.isSuccess&&b(L.Z.showSuccessAlert("Success","Transaction confirmed \uD83D\uDC4C")),k(e.isLoading),e.isError&&b(L.Z.showErrorAlert("Error","".concat(null==e?void 0:e.error))),setTimeout(()=>{b(L.Z.hideAlert())},5e3)}).catch(e=>b(L.Z.showErrorAlert("Error","".concat(e||(null==e?void 0:e.message)))))}else b(L.Z.showErrorAlert("Oops!","We were unable to find the selected position. Please try another one.")),setTimeout(()=>{b(L.Z.hideAlert())},5e3)},Z=()=>{k(!0),b(L.Z.showLoadingAlert("Waiting for your transaction to be confirmed...",""));let e=v(s);e.then(e=>{e.isSuccess&&b(L.Z.showSuccessAlert("Success","Transaction confirmed \uD83D\uDC4C")),k(e.isLoading),e.isError&&(console.log("response",e),b(L.Z.showErrorAlert("Error","".concat(null==e?void 0:e.error)))),setTimeout(()=>{b(L.Z.hideAlert())},5e3)}).catch(e=>{console.log({error:e}),b(L.Z.showErrorAlert("Error","".concat(e||(null==e?void 0:e.message))))})};return(0,f.jsxs)("div",{className:"flex flex-col space-y-4",children:[!o&&(0,f.jsxs)(f.Fragment,{children:[(0,f.jsxs)("h6",{className:"text-slate-100",children:[n("position-action"),"?"]}),(0,f.jsx)(eo,{action:"".concat(n("change-swap-amount")),type:"button",handleClick:()=>c(x.change)}),(0,f.jsx)(eo,{action:"".concat(n("deposit")," ").concat(s.coinA),type:"button",handleClick:()=>c(x.deposit)}),(0,f.jsx)(ei,{action:N?"".concat(n("stopping"),"..."):"".concat(n("stop-position")),type:"button",loading:N,disabled:N,handleClick:Z}),(0,f.jsx)("hr",{className:"border-slate-500"}),(0,f.jsx)("div",{className:"flex justify-end",children:(0,f.jsx)("button",{type:"button",className:"outline-none text-slate-100 underline",onClick:()=>t(!1),children:n("cancel")})})]}),o===x.deposit&&(0,f.jsxs)("form",{id:"change-swap-form",className:"flex flex-col space-y-6",onSubmit:M,children:[(0,f.jsxs)("label",{className:"text-slate-100",children:[n("amount-action")," ",n("deposit"),"?"]}),(0,f.jsxs)("div",{className:"relative w-full",children:[(0,f.jsx)("input",{type:"number",step:"any",className:"input-outline",value:d,onChange:e=>y(e.target.value),placeholder:"".concat(n("amount"))}),(0,f.jsx)("button",{type:"button",className:"pr-8 text-primary-500 hover:text-primary-300 hover:font-bold absolute right-2.5 bottom-2.5 font-medium text-sm",onClick:O,children:"Max"})]}),o===x.deposit&&(0,f.jsxs)("p",{children:["Balance: ",A&&i?parseFloat(A).toFixed(3):0," ",s.coinA]}),(0,f.jsxs)("div",{className:"flex justify-end space-x-4",children:[(0,f.jsx)("button",{type:"button",className:"outline-none text-slate-100 underline",onClick:()=>c(x.none),children:n("cancel")}),(0,f.jsx)(ei,{type:"submit",action:N?"".concat(n("confirming"),"..."):"".concat(n("confirm")," ").concat(n("deposit")),primary:!0,loading:N,disabled:!d||N})]})]}),o===x.change&&(0,f.jsxs)("form",{id:"change-swap-form",className:"flex flex-col space-y-6",onSubmit:B,children:[(0,f.jsxs)("label",{className:"text-slate-100",children:[n("desired-swap-amount"),"?"]}),(0,f.jsx)("input",{type:"number",step:"any",className:"input-outline",value:d,onChange:e=>u(e.target.value),placeholder:"".concat(n("swap-amount"))}),(0,f.jsxs)("div",{className:"flex justify-end space-x-4",children:[(0,f.jsx)("button",{type:"button",className:"outline-none text-slate-100 underline",onClick:()=>c(x.none),children:n("cancel")}),(0,f.jsx)(ei,{type:"submit",action:N?"".concat(n("confirming"),"..."):"".concat(n("confirm-change")),primary:!0,loading:N,disabled:!d||N})]})]})]})},tT=e=>{let t=new Map;return e.length&&e.map(e=>t.set(e.flowKey,[e.coinA,e.coinB])),t},tk=e=>{let{close:t,setClose:s}=e,n=["continuous"],{t:a}=(0,_.$G)("home"),{chain:l}=(0,E.LN)(),[i]=(0,S.useState)((0,e3.st)((null==l?void 0:l.id)||137)),[r,o]=(0,S.useState)(i.map(e=>e.coinA).filter((e,t,s)=>s.indexOf(e)===t)),[c,d]=(0,S.useState)(i.map(e=>e.coinB).filter((e,t,s)=>s.indexOf(e)===t)),[u,p]=(0,S.useState)(),[y,x]=(0,S.useState)(new Map),[h,g]=(0,S.useState)(B.sN.SELECT),[v,A]=(0,S.useState)(B.sN.SELECT),[w,j]=(0,S.useState)("0"),[N,k]=(0,S.useContext)(T.wP),[C,I]=(0,S.useState)(!1),[D,F]=(0,S.useState)(1e3),[U]=el.Z.useLazyStartStreamQuery(),[Z,W]=(0,S.useState)(n[0]);(0,S.useEffect)(()=>{var e;if(!u)return;let t=(null==u?void 0:u.flowKey.includes("FlowQuery"))?null==u?void 0:null===(e=u.flowKey)||void 0===e?void 0:e.replace("FlowQuery",""):Object(m)[null==u?void 0:u.flowKey],s=async(e,t,s,n)=>{let a=await tj(e,t,s,n).then(e=>e);F(a)};s(t,null==u?void 0:u.tokenA,null==u?void 0:u.tokenB,(null==l?void 0:l.id)||137)},[null==u?void 0:u.flowKey,null==u?void 0:u.tokenA,null==u?void 0:u.tokenB]),(0,S.useEffect)(()=>{if(h!==B.sN.SELECT){let e=i.filter(e=>e.coinA===h).map(e=>e.coinB).filter((e,t,s)=>s.indexOf(e)===t);d([B.sN.SELECT,...e])}else{let t=i.map(e=>e.coinB).filter((e,t,s)=>s.indexOf(e)===t);d([B.sN.SELECT,...t])}},[h]),(0,S.useEffect)(()=>{if(v!==B.sN.SELECT){let e=i.filter(e=>e.coinB===v).map(e=>e.coinA).filter((e,t,s)=>s.indexOf(e)===t);o([B.sN.SELECT,...e])}else{let t=i.map(e=>e.coinB).filter((e,t,s)=>s.indexOf(e)===t);o([B.sN.SELECT,...t])}},[v]),(0,S.useEffect)(()=>{if(h!==B.sN.SELECT&&v!==B.sN.SELECT){let e=i.find(e=>e.coinA===h&&e.coinB===v);p(e)}},[h,v]),(0,S.useEffect)(()=>{if(u){let e=tT([u]);x(e)}},[u]);let P=e=>{if(e.preventDefault(),h===B.sN.SELECT||v===B.sN.SELECT)return;if(!u||!D){k(L.Z.showErrorAlert("Oops!","We were unable to find the selected position. Please try another one.")),setTimeout(()=>{k(L.Z.hideAlert())},5e3);return}if(I(!0),k(L.Z.showLoadingAlert("Waiting for your transaction to be confirmed...","")),!D)return;let t=w;if((null==u?void 0:u.type)===e3.Z6.market){let s=new e4.Z(w),n=s.div(2592e3).times(1e18).div(D).round(0,0).times(D).div(1e18).times(259200).div(3600).div(24).div(30).times(10);t=n.toFixed()}let a=U({amount:t,config:u});a.then(e=>{e.isSuccess&&k(L.Z.showSuccessAlert("Success","Transaction confirmed \uD83D\uDC4C")),I(e.isLoading),e.isError&&k(L.Z.showErrorAlert("Error","".concat(null==e?void 0:e.error))),setTimeout(()=>{k(L.Z.hideAlert())},5e3)}).catch(e=>k(L.Z.showErrorAlert("Error","".concat(e||(null==e?void 0:e.message)))))};return(0,f.jsxs)(f.Fragment,{children:[(0,f.jsx)("p",{className:"text-primary-500 uppercase",children:a("your-streams")}),(0,f.jsxs)("div",{className:"flex flex-wrap items-center justify-between space-y-8 lg:space-y-0 mt-4",children:[(0,f.jsxs)("form",{id:"new-position-form",className:"flex flex-col items-start lg:p-8 w-full lg:w-1/2 space-y-6",onSubmit:P,children:[(0,f.jsxs)("label",{className:"text-slate-100",children:[a("position-token"),"?"]}),(0,f.jsxs)("div",{className:"flex flex-wrap lg:flex-nowrap items-center lg:space-x-4 w-full lg:w-auto",children:[(0,f.jsx)(ep,{classNames:"relative w-full z-20",value:h,coins:r,handleChange:g}),(0,f.jsx)(eB.Z,{className:"h-10 w-16"}),(0,f.jsx)(ep,{classNames:"relative w-full z-20",value:v,coins:c,handleChange:A})]}),(0,f.jsxs)("label",{className:"text-slate-100",children:[a("position-amount"),"?"]}),(0,f.jsx)("input",{type:"number",step:"any",className:"input-outline",value:w,onChange:e=>j(e.target.value),placeholder:"".concat(a("amount"))}),(0,f.jsxs)("label",{className:"text-slate-100",children:[a("position-select"),":"]}),(0,f.jsx)(R.R,{value:Z,onChange:W,children:(0,f.jsxs)("div",{className:"relative w-full z-10",children:[(0,f.jsxs)(R.R.Button,{className:"relative w-full cursor-default rounded-lg bg-slate-700 py-2 pl-3 pr-10 text-left text-slate-200 shadow-md focus:outline-none focus-visible:border-slate-500 focus-visible:ring-2 focus-visible:ring-slate-100 focus-visible:ring-opacity-75 focus-visible:ring-offset-2 focus-visible:ring-offset-slate-300 sm:text-sm",children:[(0,f.jsx)("span",{className:"block truncate",children:a("".concat(Z.toLocaleLowerCase().replace(/\s/g,"-")))}),(0,f.jsx)("span",{className:"pointer-events-none absolute inset-y-0 right-0 flex items-center pr-2",children:(0,f.jsx)(O.Z,{className:"h-5 w-5 text-slate-100","aria-hidden":"true"})})]}),(0,f.jsx)(b.u,{as:S.Fragment,leave:"transition ease-in duration-100",leaveFrom:"opacity-100",leaveTo:"opacity-0",children:(0,f.jsx)(R.R.Options,{className:"absolute mt-1 max-h-60 w-full overflow-auto rounded-md bg-slate-700 py-1 text-base shadow-lg ring-1 ring-black ring-opacity-5 focus:outline-none sm:text-sm",children:n.map((e,t)=>(0,f.jsx)(R.R.Option,{className:e=>{let{active:t}=e;return"relative cursor-default select-none py-2 pl-10 pr-4 ".concat(t?"bg-slate-800 text-slate-200":"text-slate-200")},value:e,children:t=>{let{selected:s}=t;return(0,f.jsxs)(f.Fragment,{children:[(0,f.jsx)("span",{className:"block truncate ".concat(s?"font-medium":"font-normal"),children:a("".concat(e.toLocaleLowerCase().replace(/\s/g,"-")))}),s?(0,f.jsx)("span",{className:"absolute inset-y-0 left-0 flex items-center pl-3 text-green-600",children:(0,f.jsx)(M.Z,{className:"h-5 w-5","aria-hidden":"true"})}):null,s?(0,f.jsx)("span",{className:"absolute inset-y-0 left-0 flex items-center pl-3 text-green-600",children:(0,f.jsx)(M.Z,{className:"h-5 w-5","aria-hidden":"true"})}):null]})}},t))})})]})})]}),(0,f.jsx)("div",{className:"w-full lg:w-1/2",children:(0,f.jsx)(eD,{pairs:y})}),(0,f.jsxs)("div",{className:"flex space-x-4 w-full justify-end",children:[(0,f.jsx)("button",{type:"button",className:"text-slate-100 underline",onClick:()=>s(!t),children:a("cancel")}),(0,f.jsx)(ei,{type:"submit",form:"new-position-form",loading:C,disabled:C,action:C?"".concat(a("processing"),"..."):"".concat(a("start-new-position"))})]})]})]})};var tS=s(56457);let tC=e=>{let[t,s]=(0,S.useState)(new Map),n=(0,S.useRef)(!1);return(0,S.useEffect)(()=>{if(e.length&&!n.current){let t=tT(e);s(t),n.current=!0}},[e]),(0,S.useEffect)(()=>{n.current&&(n.current=!1)},[]),t};var tE=s(48068);let tI=e=>{let{setClose:t,position:s}=e,{t:n}=(0,_.$G)("home"),[a,l]=(0,S.useState)(!1),[i,r]=(0,S.useState)(0),o=tC([s]),{data:c,isLoading:d,isSuccess:u,isError:m,error:y}=eb.Z.useGetTokenPriceQuery(eA[s.coinB]);return(0,S.useEffect)(()=>{if(c&&u){var e;r(null==c?void 0:null===(e=c[eA[s.coinB]])||void 0===e?void 0:e.usd)}m&&console.error(y)},[c,u]),(0,f.jsxs)(f.Fragment,{children:[(0,f.jsxs)("div",{className:"flex items-center justify-start border-b border-slate-600 space-x-4 mb-6 lg:mb-12 pb-2",children:[(0,f.jsxs)("button",{type:"button",className:"outline-none text-primary-500 space-x-2",onClick:()=>t(!0),children:[(0,f.jsx)("span",{className:"no-underline",children:"<"}),(0,f.jsx)("span",{className:"underline",children:n("show-all")})]}),(0,f.jsx)("button",{type:"button",className:j(a?"outline-none text-slate-500 pointer-events-none":"outline-none text-primary-500 underline cursor-pointer"),onClick:()=>l(!0),disabled:a,children:a?"".concat(n("editing-position"),"..."):"".concat(n("edit-position"))})]}),(0,f.jsxs)("div",{className:"flex flex-wrap items-start justify-between space-y-4 md:space-y-0",children:[(0,f.jsxs)("div",{className:"w-full md:w-1/2",children:[(0,f.jsx)("span",{className:"flex items-center justify-start",children:(0,f.jsx)(eZ,{coinA:s.coinA,coinB:s.coinB,type:p.ViewPosition})}),(0,f.jsxs)("p",{className:"text-slate-100 my-2",children:[(0,f.jsxs)("span",{className:"text-slate-400",children:[n("total-streamed"),":"]})," ",s.input.toFixed(3)," ",s.coinA,"x (",N(parseFloat(s.streamedUsdValue)),")"]}),(0,f.jsxs)("p",{className:"text-slate-100 my-2",children:[(0,f.jsxs)("span",{className:"text-slate-400",children:[n("stream-rate"),":"]})," ",parseFloat(s.output).toFixed(3)," ",s.coinA,"x (",N(parseFloat(s.rateUsdValue)),")"]})]}),!a&&(0,f.jsx)("div",{className:"w-full md:w-1/2",children:(0,f.jsx)(eD,{pairs:o,position:s})}),a&&(0,f.jsx)("div",{className:"w-full md:w-1/2 mt-4",children:(0,f.jsx)(tN,{setClose:l,position:s})})]})]})},tD=["your markets","stream rate","total streamed"],tF=e=>{let{positions:t,queries:s}=e,{t:n}=(0,_.$G)("home"),[a,l]=(0,S.useState)([]),[i,r]=(0,S.useState)(new Map),[o,c]=(0,S.useState)(!0),d=eg(),u=tC(t),p=ew(u),[m,y]=(0,S.useState)([["0","0"]]),[x,h]=(0,S.useState)(),[b,g]=(0,S.useState)(!0),{address:v,isConnected:A}=(0,E.mA)(),[w]=tE.Z.useQuerySushiPoolPricesMutation();return(0,S.useEffect)(()=>{if(p.size>0&&u.size>0){let e=[];for(let[t,s]of u){if(s[0]===B.sN.USDC||s[0]===B.sN.IbAlluoUSD||s[0]===B.sN.StIbAlluoUSD||s[0]===B.sN.DAI){let{priceSorted:n}=ej(p.get(eA[s[1]]));n.length&&(e.push([n[0][1],n[n.length-1][1]]),y(e))}if(s[1]===B.sN.USDC||s[1]===B.sN.IbAlluoUSD||s[1]===B.sN.StIbAlluoUSD||s[1]===B.sN.DAI){let{priceSorted:a}=ej(p.get(eA[s[0]]));a.length&&(e.push([a[0][1],a[a.length-1][1]]),y(e))}}}},[p,u]),(0,S.useEffect)(()=>{let e=Z.ow.map(async e=>{let t=await (0,U.EG)({address:v,chainId:I.yu.id,token:e}).then(e=>null==e?void 0:e.formatted);return{token:e,balance:t}});Promise.all(e).then(e=>{let t=new Map;e.map(e=>t.set(null==e?void 0:e.token,null==e?void 0:e.balance)),r(t)})},[v,A]),(0,S.useEffect)(()=>{if(v&&A&&s.size>0&&t.length>0){let e=[];t.map((t,n)=>{var a,l,i,r,o,c,u,p,y;e.push({...t,positions:(null===(a=s.get(null==t?void 0:t.flowKey))||void 0===a?void 0:a.totalFlows)||0,rateUsdValue:e9(null===(l=s.get(null==t?void 0:t.flowKey))||void 0===l?void 0:l.placeholder,d.get(null==t?void 0:t.tokenA)),streamedUsdValue:e9(null===(i=s.get(null==t?void 0:t.flowKey))||void 0===i?void 0:null===(r=i.streamedSoFar)||void 0===r?void 0:r.toFixed(0),d.get(null==t?void 0:t.tokenA)),input:(null===(o=s.get(null==t?void 0:t.flowKey))||void 0===o?void 0:o.streamedSoFar)||0,output:null===(c=s.get(null==t?void 0:t.flowKey))||void 0===c?void 0:c.placeholder,avgBuyPrice:m.length&&(null===(u=m[n])||void 0===u?void 0:u.length)?((+(null==m?void 0:null===(p=m[n])||void 0===p?void 0:p[0])+ +(null==m?void 0:null===(y=m[n])||void 0===y?void 0:y[1]))/2).toFixed(3):"0"})}),l(e)}},[v,A,m,t,s,d]),(0,f.jsxs)(f.Fragment,{children:[o&&(0,f.jsxs)("div",{className:"mt-4",children:[(0,f.jsx)(eX,{content:(0,f.jsxs)(f.Fragment,{children:[(0,f.jsx)("p",{className:"text-primary-500 uppercase",children:n("your-streams")}),(0,f.jsx)(ei,{icon:(0,f.jsx)(tS.Z,{className:"h-4 w-4"}),type:"button",action:"".concat(n("new-position")),handleClick:()=>{c(!1)}})]})}),b&&(a.length?(0,f.jsx)(eH,{headers:tD,rowData:a,tableLoaderRows:12,selectable:!0,selectData:e=>{h(e),g(!1)}}):(0,f.jsxs)("p",{className:"italic",children:[n("no-positions"),"..."]})),!b&&(0,f.jsx)(tI,{close:b,setClose:g,position:x})]}),!o&&(0,f.jsx)(tk,{close:o,setClose:c})]})};var t_=s(59721),tR=s(64202);let tO=[{inputs:[],stateMutability:"nonpayable",type:"constructor"},{anonymous:!1,inputs:[{indexed:!1,internalType:"string",name:"name",type:"string"},{indexed:!1,internalType:"string",name:"id",type:"string"}],name:"AffiliateApplied",type:"event"},{anonymous:!1,inputs:[{indexed:!1,internalType:"string",name:"affiliateId",type:"string"}],name:"AffiliateWithdrawn",type:"event"},{anonymous:!1,inputs:[{indexed:!1,internalType:"address",name:"customer",type:"address"}],name:"OrganicCustomerRegistered",type:"event"},{anonymous:!1,inputs:[{indexed:!1,internalType:"address",name:"customer",type:"address"},{indexed:!1,internalType:"address",name:"affiliate",type:"address"},{indexed:!1,internalType:"string",name:"affiliateId",type:"string"}],name:"ReferredCustomerRegistered",type:"event"},{anonymous:!1,inputs:[{indexed:!0,internalType:"bytes32",name:"role",type:"bytes32"},{indexed:!0,internalType:"bytes32",name:"previousAdminRole",type:"bytes32"},{indexed:!0,internalType:"bytes32",name:"newAdminRole",type:"bytes32"}],name:"RoleAdminChanged",type:"event"},{anonymous:!1,inputs:[{indexed:!0,internalType:"bytes32",name:"role",type:"bytes32"},{indexed:!0,internalType:"address",name:"account",type:"address"},{indexed:!0,internalType:"address",name:"sender",type:"address"}],name:"RoleGranted",type:"event"},{anonymous:!1,inputs:[{indexed:!0,internalType:"bytes32",name:"role",type:"bytes32"},{indexed:!0,internalType:"address",name:"account",type:"address"},{indexed:!0,internalType:"address",name:"sender",type:"address"}],name:"RoleRevoked",type:"event"},{inputs:[],name:"APP_ROLE",outputs:[{internalType:"bytes32",name:"",type:"bytes32"}],stateMutability:"view",type:"function"},{inputs:[],name:"DEFAULT_ADMIN_ROLE",outputs:[{internalType:"bytes32",name:"",type:"bytes32"}],stateMutability:"view",type:"function"},{inputs:[{internalType:"address",name:"",type:"address"}],name:"addressToAffiliate",outputs:[{internalType:"uint256",name:"",type:"uint256"}],stateMutability:"view",type:"function"},{inputs:[{internalType:"string",name:"",type:"string"}],name:"affiliateIdToAffiliate",outputs:[{internalType:"uint256",name:"",type:"uint256"}],stateMutability:"view",type:"function"},{inputs:[{internalType:"uint256",name:"",type:"uint256"}],name:"affiliates",outputs:[{internalType:"string",name:"name",type:"string"},{internalType:"string",name:"id",type:"string"},{internalType:"bool",name:"enabled",type:"bool"},{internalType:"uint256",name:"totalRef",type:"uint256"},{internalType:"address",name:"addr",type:"address"}],stateMutability:"view",type:"function"},{inputs:[{internalType:"string",name:"name",type:"string"},{internalType:"string",name:"affiliateId",type:"string"}],name:"applyForAffiliate",outputs:[],stateMutability:"nonpayable",type:"function"},{inputs:[{internalType:"address",name:"newAddress",type:"address"}],name:"changeAffiliateAddress",outputs:[],stateMutability:"nonpayable",type:"function"},{inputs:[{internalType:"address",name:"",type:"address"}],name:"customerToAffiliate",outputs:[{internalType:"uint256",name:"",type:"uint256"}],stateMutability:"view",type:"function"},{inputs:[{internalType:"string",name:"affiliateId",type:"string"}],name:"disableAffiliate",outputs:[],stateMutability:"nonpayable",type:"function"},{inputs:[{internalType:"address",name:"customerAddr",type:"address"}],name:"getAffiliateAddress",outputs:[{internalType:"address",name:"",type:"address"}],stateMutability:"view",type:"function"},{inputs:[{internalType:"bytes32",name:"role",type:"bytes32"}],name:"getRoleAdmin",outputs:[{internalType:"bytes32",name:"",type:"bytes32"}],stateMutability:"view",type:"function"},{inputs:[{internalType:"bytes32",name:"role",type:"bytes32"},{internalType:"uint256",name:"index",type:"uint256"}],name:"getRoleMember",outputs:[{internalType:"address",name:"",type:"address"}],stateMutability:"view",type:"function"},{inputs:[{internalType:"bytes32",name:"role",type:"bytes32"}],name:"getRoleMemberCount",outputs:[{internalType:"uint256",name:"",type:"uint256"}],stateMutability:"view",type:"function"},{inputs:[{internalType:"bytes32",name:"role",type:"bytes32"},{internalType:"address",name:"account",type:"address"}],name:"grantRole",outputs:[],stateMutability:"nonpayable",type:"function"},{inputs:[{internalType:"bytes32",name:"role",type:"bytes32"},{internalType:"address",name:"account",type:"address"}],name:"hasRole",outputs:[{internalType:"bool",name:"",type:"bool"}],stateMutability:"view",type:"function"},{inputs:[{internalType:"string",name:"affiliateId",type:"string"}],name:"isAffiliateEnabled",outputs:[{internalType:"bool",name:"",type:"bool"}],stateMutability:"view",type:"function"},{inputs:[{internalType:"address",name:"",type:"address"}],name:"isCustomerOrganic",outputs:[{internalType:"bool",name:"",type:"bool"}],stateMutability:"view",type:"function"},{inputs:[{internalType:"address",name:"contractAddr",type:"address"}],name:"registerApp",outputs:[],stateMutability:"nonpayable",type:"function"},{inputs:[{internalType:"bytes32",name:"role",type:"bytes32"},{internalType:"address",name:"account",type:"address"}],name:"renounceRole",outputs:[],stateMutability:"nonpayable",type:"function"},{inputs:[{internalType:"bytes32",name:"role",type:"bytes32"},{internalType:"address",name:"account",type:"address"}],name:"revokeRole",outputs:[],stateMutability:"nonpayable",type:"function"},{inputs:[{internalType:"address",name:"customerAddr",type:"address"},{internalType:"string",name:"affiliateId",type:"string"}],name:"safeRegisterCustomer",outputs:[],stateMutability:"nonpayable",type:"function"},{inputs:[{internalType:"bytes4",name:"interfaceId",type:"bytes4"}],name:"supportsInterface",outputs:[{internalType:"bool",name:"",type:"bool"}],stateMutability:"view",type:"function"},{inputs:[{internalType:"address",name:"contractAddr",type:"address"}],name:"unregisterApp",outputs:[],stateMutability:"nonpayable",type:"function"},{inputs:[{internalType:"string",name:"affiliateId",type:"string"}],name:"verifyAffiliate",outputs:[],stateMutability:"nonpayable",type:"function"},{inputs:[],name:"withdrawAffiliate",outputs:[],stateMutability:"nonpayable",type:"function"}];(c=h||(h={})).INACTIVE="inactive",c.REGISTERING="registering",c.AWAITING_VERIFICATION="awaitingVerification",c.ENABLED="enabled";let tM=e=>{let t=[[new Blob([e]).size<=32,"Cannot be larger than 32 characters (Some characters count as 2)"],[e.length>1,"Must be at least 2 characters"]];return t},tL=e=>tM(e).reduce((e,t)=>!1===t[0]?[...e,t[1]]:e,[]),tU=async function(e,t){let s=arguments.length>2&&void 0!==arguments[2]?arguments[2]:e=>{},n=await (0,U.a4)({address:t,abi:tO,functionName:"addressToAffiliate",args:[e.toLowerCase()]}),a=await (0,U.a4)({address:t,abi:tO,functionName:"affiliates",args:[n]});return K.O$.from(a.addr).isZero()?h.INACTIVE:!1===a.enabled?h.AWAITING_VERIFICATION:0===tL(a.id).length?(s(a.id),h.ENABLED):void 0},tB=()=>{let{t:e}=(0,_.$G)("home"),{address:t,isConnected:s}=(0,E.mA)(),[n,a]=(0,S.useState)("Copy"),[l,i]=(0,S.useState)("pro.ricochet-exchange.eth.limo/#/ref/"),[r,o]=(0,S.useState)(),[c,d]=(0,S.useState)(!1),[u,p]=(0,S.useState)([]),[m,y]=(0,S.useState)(),[x,b]=(0,S.useState)(Z.CU),{chain:g}=(0,E.LN)();(0,S.useEffect)(()=>{y(null==t?void 0:t.toLowerCase().slice(0,10))},[t,s]),(0,S.useEffect)(()=>{g&&(80001===g.id&&b(W.mr),137===g.id&&b(Z.CU),10===g.id&&b(P.aq))},[null==g?void 0:g.id]),(0,S.useEffect)(()=>{(async()=>{if(t&&s&&x){if((null==g?void 0:g.id)!==137)return o(h.INACTIVE);let e=await tU(t,x,y);o(e)}})()},[t,s,x]),(0,S.useEffect)(()=>{if(r===h.REGISTERING&&t&&s&&x){let e=setInterval(async()=>{let e=await tU(t,x,y);o(e)},5e3);return()=>clearInterval(e)}},[r,t,s,x]);let v=()=>{navigator.clipboard.writeText("".concat(l).concat(m)).then(()=>{a("Copied!"),setTimeout(()=>{a("Copy")},3e3)}).catch()},A=e=>{let{value:t}=e.target;y(t),p(tL(t))},w=async e=>{null==e||e.preventDefault(),d(!0);let s=await (0,U.$q)({address:x,abi:tO,functionName:"applyForAffiliate",args:[m,m]}),n=await (0,U.n9)(s);n.wait().then(e=>{e&&(o(h.REGISTERING),(async()=>{let e=await (0,U.$q)({address:x,abi:tO,functionName:"applyForAffiliate",args:[m,m],overrides:{from:t}}),s=await (0,U.n9)(e);s.wait().then(e=>d(!1))})()),d(!1)}).catch(e=>{o(h.INACTIVE),p(["Error registering this url: possible duplicate. Please try another url"]),console.error(e)})};return(0,f.jsxs)("div",{className:"flex flex-col items-center space-y-4",children:[(0,f.jsxs)("div",{className:"flex items-center justify-center text-slate-100 space-x-3",children:[(0,f.jsx)(t_.Z,{className:"h-6 w-6"}),(0,f.jsx)("p",{className:"uppercase tracking-widest",children:e("refer")})]}),(0,f.jsx)("p",{className:"text-slate-100",children:e("apply-refer")}),s&&(r===h.INACTIVE||r===h.REGISTERING)&&(0,f.jsxs)(f.Fragment,{children:[(0,f.jsxs)("p",{className:"text-slate-400",children:[e("customize-url"),":"]}),(0,f.jsxs)("form",{onSubmit:w,className:"w-full space-y-4",children:[(0,f.jsxs)("div",{className:j(u.length>0?"border-red-700":"border-primary-500","inline-flex py-2 pl-3 w-full border rounded-lg"),children:[(0,f.jsx)("div",{className:"w-2/3 text-primary-700 truncate",children:(0,f.jsx)("span",{children:l})}),(0,f.jsx)("input",{type:"text",defaultValue:m,onChange:e=>A(e),className:"w-1/3 pl-1 pr-3 text-primary-100 placeholder-primary-500 bg-transparent focus:outline-none dark:placeholder-primary-500 ",placeholder:"".concat(e("referral-url"))})]}),u.map(t=>(0,f.jsx)("p",{className:"text-red-700 text-xs italic",children:e(t)},t)),(0,f.jsx)(ec,{type:"submit",loading:c,disabled:c,primary:!0,action:c?"".concat(e("registering"),"..."):e("register-url")})]})]}),!s&&(0,f.jsxs)("div",{className:"flex flex-col items-center justify-center space-y-4",children:[(0,f.jsxs)("p",{className:"text-primary-500",children:[e("connect-for-referrals"),"."]}),(0,f.jsx)(tl.x3.Custom,{children:t=>{let{isConnected:s,show:n}=t;return(0,f.jsx)(f.Fragment,{children:!s&&(0,f.jsx)(eo,{action:"".concat(e("connect-wallet")),type:"button",handleClick:n})})}})]}),s&&r===h.AWAITING_VERIFICATION&&(0,f.jsx)("div",{children:(0,f.jsxs)("p",{children:[e("Awaiting verification. Come back later or ping us on our discord:"),(0,f.jsx)("br",{}),(0,f.jsx)(tx,{className:"text-slate-200 underline",href:"https://discord.gg/mss4t2ED3y",target:"_blank",rel:"noreferrer",children:"https://discord.gg/mss4t2ED3y"})]})}),s&&r===h.ENABLED&&(0,f.jsxs)("div",{className:"flex flex-col justify-start items-center gap-1",children:[(0,f.jsx)("p",{children:e("your-referral-url")}),(0,f.jsx)("p",{children:l+m}),(0,f.jsxs)("button",{className:"flex justify-center items-center gap-1",onClick:v,children:[(0,f.jsx)(tR.Z,{className:"h-5 w-5"})," ",e(n)]})]}),(0,f.jsx)("a",{className:"inline-flex items-center space-x-1 text-primary-400",href:"https://docs.ricochet.exchange/readme/referral-program",target:"_blank",rel:"noopener noreferrer",children:(0,f.jsx)("span",{className:"underline",children:e("how-does-it-work")})})]})},tZ=()=>{let{chain:e}=(0,E.LN)(),{address:t,isConnected:s}=(0,E.mA)(),[n,a]=(0,S.useState)({});return(0,S.useEffect)(()=>{s&&X(t).then(e=>a(e))},[t,s,null==e?void 0:e.id]),n},tW=()=>{let{chain:e}=(0,E.LN)(),[t,s]=(0,S.useState)();return(0,S.useEffect)(()=>{s((0,e3.st)(null==e?void 0:e.id))},[null==e?void 0:e.id]),t},tP=(e,t)=>{let{chain:s}=(0,E.LN)(),{address:n,isConnected:a}=(0,E.mA)(),[l,i]=(0,S.useState)(0),[r,o]=(0,S.useState)(!1),{data:c,isSuccess:d,isError:u,error:p}=eb.Z.useGetUpgradedTokensListQuery();return(0,S.useEffect)(()=>{if(a&&u&&console.error(p),a&&d&&t){o(!0);let s=t.reduce((t,s)=>{let n=Object.keys(e).length&&c&&Object.keys(eA).length&&(parseFloat(e[s.superTokenAddress])*parseFloat(c[eA[s.coin]].usd)).toFixed(6);return isNaN(+n)?t+0:t+parseFloat(n)},0);i(s),o(!1)}},[a,n,e,c,d,null==s?void 0:s.id,t]),{positionTotal:l,positionTotalLoading:r,tokens:c}},tG=(e,t)=>{let{chain:s}=(0,E.LN)(),{isConnected:n,address:a}=(0,E.mA)(),[l,i]=(0,S.useState)([]);return(0,S.useEffect)(()=>{if(n&&a&&e&&(null==e?void 0:e.length)>0){let s=e.filter(e=>{var s;let{flowKey:n}=e;return parseFloat(null===(s=t.get(n))||void 0===s?void 0:s.placeholder)>0});i(s)}},[t,a,n,,e,null==s?void 0:s.id]),l},tQ=e=>({10:"/protocol-v1-optimism-mainnet",137:"/protocol-v1-matic",80001:"/protocol-v1-mumbai"})[e];var tH=s(20640);let tz=e=>{let{chain:t}=(0,E.LN)(),[s,n]=(0,S.useState)([]),[a]=tH.Z.useQueryFlowsMutation();return(0,S.useEffect)(()=>{let s=e.map(async e=>await a({queryAddress:e,network:tQ((null==t?void 0:t.id)||137)}).then(e=>{var t,s;return null==e?void 0:null===(t=e.data)||void 0===t?void 0:null===(s=t.data)||void 0===s?void 0:s.account}));Promise.all(s).then(e=>n(e))},[null==t?void 0:t.id]),s},tV=(e,t)=>{let{chain:s}=(0,E.LN)(),[n,a]=(0,S.useState)(new Map),[l,i]=(0,S.useState)([0]),[r,o]=(0,S.useState)(0),[c,d]=(0,S.useState)(!1),u=e=>{let t=[Z.Ne,Z.gI,Z.PV,Z.Xr,Z.dU,Z.q9,Z.MJ];return!!t.includes(e)};return(0,S.useEffect)(()=>{if(e.length){d(!0);let t=new Map;(async()=>await Promise.all(e.map(async e=>{u(e.superToken)&&await (0,U.a4)({address:e.superToken,abi:tA,functionName:(null==s?void 0:s.id)===137?"getOutputPool":"outputPools",args:(null==s?void 0:s.id)===137?[3]:[1]}).then(s=>{let n=(Number(s.emissionRate)/1e18*2592e3).toFixed(4);t.set(e.superToken,n.toString())}).catch(e=>{console.log("error",e)})})).then(e=>a(t)))()}},[e,null==s?void 0:s.id]),(0,S.useEffect)(()=>{e.length&&t.size>0&&n.size>0&&e.map(e=>{var s,a;let l=+(null===(s=t.get(e.flowKey))||void 0===s?void 0:s.placeholder)/+(null===(a=t.get(e.flowKey))||void 0===a?void 0:a.flowsOwned)*100,r=+l/100*+n.get(e.superToken);r&&i(e=>[...e,r])})},[n,t,e,null==s?void 0:s.id]),(0,S.useEffect)(()=>{if(l.length){let e=l.filter((e,t,s)=>s.indexOf(e)===t).reduce((e,t)=>e+t,0);o(e),d(!1)}},[l,null==s?void 0:s.id]),{aggregatedRICRewards:r,ricRewardLoading:c}},t$=(e,t,s)=>{let{chain:n}=(0,E.LN)(),[a,l]=(0,S.useState)([]);return(0,S.useEffect)(()=>{e.size>0&&s.size>0&&t&&l(t.filter(e=>e.type===e3.Z6.market).sort((t,n)=>{let a=parseFloat(e7(t,s,e)),l=parseFloat(e7(n,s,e));return l-a}))},[s,e,null==n?void 0:n.id,t]),a},tK=()=>{let{chain:e}=(0,E.LN)(),[t,s]=(0,S.useState)();return(0,S.useEffect)(()=>{e&&((null==e?void 0:e.id)===80001&&s(Q),(null==e?void 0:e.id)===137&&s(G),(null==e?void 0:e.id)===10&&s(H))},[null==e?void 0:e.id]),t},tq=()=>{let{chain:e}=(0,E.LN)(),[t,s]=(0,S.useState)(new e4.Z(0)),{address:n,isConnected:a}=(0,E.mA)(),{data:l,isLoading:i,isSuccess:r,isError:o,error:c}=eb.Z.useGetTokenPriceQuery("richochet");return(0,S.useEffect)(()=>{if(a&&l&&r){var e;s(new e4.Z(parseFloat(null==l?void 0:null===(e=l.richochet)||void 0===e?void 0:e.usd)))}o&&console.error(c)},[a,n,l,r,null==e?void 0:e.id]),t},tY=(e,t)=>{let s=null==e?void 0:e.reduce((e,s)=>s.token.id===t.toLowerCase()?e+parseInt(s.currentFlowRate,10):e,0);return(s/1e18*2592e3).toFixed(3)},tJ=(e,t,s)=>{let n=null==e?void 0:e.reduce((e,n)=>{var a,l;return(null==n?void 0:null===(a=n.token)||void 0===a?void 0:a.id)===(null==t?void 0:t.toLowerCase())&&(null==n?void 0:null===(l=n.sender)||void 0===l?void 0:l.id)===(null==s?void 0:s.toLowerCase())?e+parseInt(n.currentFlowRate,10):e},0);return n},tX=(e,t,s,n,a)=>{let l,i;let r=e3.X7.find(t=>t.flowKey===e),o=(null==r?void 0:r.superToken)||"",c=(null==r?void 0:r.tokenA)||"",d=s.get(o),u=tJ(null==d?void 0:d.inflows,c,t);Object.keys(n).length>0&&(l=n["".concat(c.toLowerCase(),"-").concat(o.toLowerCase())]),Object.keys(a).length>0&&(i=a["".concat(c.toLowerCase(),"-").concat(o.toLowerCase())]);let p=(u/1e18*2592e3).toFixed(6),m=tY(null==d?void 0:d.inflows,c),y=null==d?void 0:d.inflows.filter(e=>"0"!==e.currentFlowRate);return{flowKey:e,flowsReceived:u,flowsOwned:m,totalFlows:(null==y?void 0:y.length)||0,placeholder:p,streamedSoFar:l,receivedSoFar:i,subsidyRate:{perso:0,total:0,endDate:"unknown"}}},t0=(e,t,s,n,a)=>{let l=new Map;s.forEach((e,t)=>{n.length>0&&(null!==n[t]?l.set(e,n[t]):l.set(e,{inflows:[],outflows:[]}))});let i=new Map;if(l.size>0)for(let[r,o]of Object.entries(e3.he))i.set(o,tX(o,a,l,e,t));return i},t1=(e,t,s)=>{let n=K.O$.from(e),a=K.O$.from(s),l=K.O$.from(t).mul(1e3),i=K.O$.from(new Date().getTime());return a.isZero()?ea.formatEther(n):ea.formatEther(n.add(i.sub(l).mul(a).div(1e3)))},t2=(e,t)=>{(e||[]).forEach(e=>{let s=t["".concat(e.token.id,"-").concat(e.sender.id)]||0;Object.assign(t,{["".concat(e.token.id,"-").concat(e.sender.id)]:Number(s)+Number(t1(e.streamedUntilUpdatedAt,e.updatedAtTimestamp,e.currentFlowRate))})})},t5=(e,t)=>{(e||[]).forEach(e=>{let s=t["".concat(e.token.id,"-").concat(e.receiver.id)]||0;Object.assign(t,{["".concat(e.token.id,"-").concat(e.receiver.id)]:Number(s)+Number(t1(e.streamedUntilUpdatedAt,e.updatedAtTimestamp,e.currentFlowRate))})})},t4=(e,t)=>{let{chain:s}=(0,E.LN)(),{address:n,isConnected:a}=(0,E.mA)(),[l]=tH.Z.useQueryStreamsMutation(),[i]=tH.Z.useQueryReceivedMutation(),[r,o]=(0,S.useState)(new Map);return(0,S.useEffect)(()=>{e.length>0&&(async()=>{let a={},r={};n&&(await l({address:n,network:tQ(null==s?void 0:s.id)}).then(e=>{var t,s;t5(null==e?void 0:null===(t=e.data)||void 0===t?void 0:null===(s=t.data)||void 0===s?void 0:s.streams,a)}),await i({receiver:n,network:tQ(null==s?void 0:s.id)}).then(e=>{var t,s;t2(null==e?void 0:null===(t=e.data)||void 0===t?void 0:null===(s=t.data)||void 0===s?void 0:s.streams,r)}));let c=t0(a,r,t,e,n);o(c)})()},[null==s?void 0:s.id,a,e]),r};var t3=s(9008),t6=s.n(t3);let t8=e3.X7.map(e=>e.superToken);var t7=!0;function t9(){let e=function(){let[e,t]=S.useState(!1);return S.useEffect(()=>t(!0),[]),e}(),{t}=(0,_.$G)("home"),{isConnected:s}=(0,E.mA)(),{chain:n}=(0,E.LN)(),{data:a}=eb.Z.useGetUpgradedTokensListQuery(),l=tq(),i=eg(),r=tK(),o=tZ(),c=tW(),d=tz(t8),u=t4(d,t8),p=tG(c,u),m=t$(i,c,u),{aggregatedRICRewards:y,ricRewardLoading:x}=tV(m,u),{positionTotal:h,positionTotalLoading:b}=tP(o,r);return e?(0,f.jsxs)(f.Fragment,{children:[(0,f.jsxs)(t6(),{children:[(0,f.jsx)("title",{children:"Ricochet | Streaming Exchange"}),(0,f.jsx)("meta",{name:"description",content:"Automatic Real-Time Crypto Investing"}),(0,f.jsx)("link",{rel:"icon",href:"/favicon.ico"}),(0,f.jsx)("link",{rel:"icon",type:"image/svg+xml",href:"/favicon.svg"})]}),(0,f.jsxs)("div",{className:"bg-gradient-to-b from-background-700 via-background-800 to-background-900 overflow-clip",children:[(0,f.jsx)(th,{}),(0,f.jsx)("main",{children:(0,f.jsxs)("div",{className:"mx-auto w-screen py-6 px-8 lg:px-16",children:[(0,f.jsx)(C,{}),s&&(0,f.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 justify-items-stretch place-items-stretch gap-10",children:[(0,f.jsx)(e0,{content:(0,f.jsxs)(f.Fragment,{children:[(0,f.jsx)("h6",{className:"font-light uppercase tracking-widest text-primary-500 mb-2",children:t("total-in-positions")}),b&&!h&&(0,f.jsx)("div",{className:"animate-pulse",children:(0,f.jsx)("div",{className:"h-4 rounded bg-slate-700"})}),(h||0===h)&&!b&&(0,f.jsx)("p",{className:"text-slate-100 font-light text-2xl",children:N(h)})]})}),(0,f.jsx)(e0,{content:(0,f.jsxs)(f.Fragment,{children:[(0,f.jsx)("h6",{className:"font-light uppercase tracking-widest text-primary-500 mb-2",children:t("net-flow-rate")}),(0,f.jsx)(tv,{positions:p,usdPrice:l})]})}),(0,f.jsx)(e0,{content:(0,f.jsxs)(f.Fragment,{children:[(0,f.jsx)("h6",{className:"font-light uppercase tracking-widest text-primary-500 mb-2",children:t("ric-balance")}),(0,f.jsx)("div",{className:"text-slate-100 font-light text-2xl space-x-1",children:(0,f.jsx)(D,{tokenAddress:(0,Z.P3)((null==n?void 0:n.id)||137),showSymbol:!0})})]})}),(0,f.jsx)(e0,{content:(0,f.jsxs)(f.Fragment,{children:[(0,f.jsx)("h6",{className:"font-light uppercase tracking-widest text-primary-500 mb-2",children:t("rewards-earned")}),x&&!y&&(0,f.jsx)("p",{className:"text-slate-100 font-light text-2xl",children:"0 RIC / mo"}),(y||0===y)&&!x&&(0,f.jsxs)("p",{className:"text-slate-100 font-light text-2xl",children:[y.toFixed(2)," RIC / mo"]})]})})]}),(0,f.jsxs)("div",{className:"grid grid-cols-1 lg:grid-cols-3 gap-10 place-content-stretch mt-16",children:[(0,f.jsxs)("div",{className:"lg:col-span-2 space-y-10",children:[(0,f.jsx)(eJ,{content:s?(0,f.jsx)(tF,{positions:p,queries:u}):(0,f.jsxs)("div",{className:"flex flex-col items-center justify-center space-y-4 h-96",children:[(0,f.jsxs)("p",{className:"text-primary-500",children:[t("connect-for-positions"),"."]}),(0,f.jsx)(tl.x3.Custom,{children:e=>{let{isConnected:s,show:n}=e;return(0,f.jsx)(f.Fragment,{children:!s&&(0,f.jsx)(eo,{action:"".concat(t("connect-wallet")),type:"button",handleClick:n})})}})]})}),(0,f.jsx)(eJ,{content:m&&(0,f.jsx)(tt,{coingeckoPrices:i,sortedList:m,queries:u})})]}),(0,f.jsxs)("div",{className:"space-y-10",children:[(0,f.jsx)(eY,{content:(0,f.jsx)(e6,{})}),(0,f.jsx)(eK,{content:s?(0,f.jsx)(eV,{tokens:a,balances:o}):(0,f.jsxs)("div",{className:"flex flex-col items-center justify-center space-y-4 h-96",children:[(0,f.jsxs)("p",{className:"text-primary-500",children:[t("connect-for-balances"),"."]}),(0,f.jsx)(tl.x3.Custom,{children:e=>{let{isConnected:s,show:n}=e;return(0,f.jsx)(f.Fragment,{children:!s&&(0,f.jsx)(eo,{action:"".concat(t("connect-wallet")),type:"button",handleClick:n})})}})]})}),(0,f.jsx)(eq,{content:(0,f.jsx)(tB,{})})]})]})]})}),(0,f.jsx)(e2,{})]})]}):(0,f.jsx)(f.Fragment,{})}}},function(e){e.O(0,[698,774,888,179],function(){return e(e.s=53124)}),_N_E=e.O()}]);