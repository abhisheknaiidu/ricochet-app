(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[513],{53124:function(e,t,s){(window.__NEXT_P=window.__NEXT_P||[]).push(["/[locale]",function(){return s(61886)}])},23857:function(e,t,s){"use strict";var n=s(79264),a=s(91463),l=s.n(a);t.Z=(0,n.Z)({supportedLngs:l().i18n.locales,fallbackLng:l().i18n.defaultLocale})},91463:function(e){"use strict";e.exports={i18n:{defaultLocale:"en",locales:["en","fr","es","sv"]}}},61886:function(e,t,s){"use strict";s.r(t),s.d(t,{__N_SSG:function(){return tQ},default:function(){return tz}});var n,a,l,i,r,o,c,d,u,p,m,y,x=s(85893),h=s(47318),f=s(66692),b=s(35880),g=s(31836),v=s(96445);let A=function(){for(var e=arguments.length,t=Array(e),s=0;s<e;s++)t[s]=arguments[s];return t.filter(Boolean).join(" ")},w=function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"USD";return new Intl.NumberFormat("en-US",{style:"currency",currency:t,useGrouping:!0}).format(e)};var j=s(83957),N=s(28126),T=s(67294);let k=()=>{let[e,t]=(0,T.useContext)(j.wP),[s,n]=(0,T.useState)(N.d.NONE),[a,l]=(0,T.useState)(""),[i,r]=(0,T.useState)(""),[o,c]=(0,T.useState)(""),[d,u]=(0,T.useState)(!1);return(0,T.useEffect)(()=>{let{title:t,message:s,type:a,hash:i}=e.alertShower;n(a),r(t),l(s),c(i),a!==N.d.NONE&&u(!0),a===N.d.NONE&&u(!1)},[e.alertShower]),(0,x.jsx)(h.u,{as:T.Fragment,show:d,enter:"transition duration-200 transform ease",enterFrom:"opacity-0 scale-90",enterTo:"opacity-100",leave:"transition duration-200 transform ease",leaveFrom:"opacity-100",leaveTo:"opacity-0 scale-90",children:(0,x.jsx)("div",{className:"max-w-screen fixed bottom-10 drop-shadow-2xl mx-auto z-30",children:(0,x.jsxs)("div",{className:A(s===N.d.INFO?"flex flex-wrap items-center justify-start space-y-1 md:space-y-0 bg-blue-100 rounded-lg p-4 mb-4 text-sm text-blue-700":s===N.d.WARNING?"flex flex-wrap items-center justify-start space-y-1 md:space-y-0 bg-yellow-100 rounded-lg p-4 mb-4 text-sm text-yellow-700":s===N.d.ERROR?"flex flex-wrap items-center justify-start space-y-1 md:space-y-0 bg-red-100 rounded-lg p-4 mb-4 text-sm text-red-700":s===N.d.SUCCESS?"flex flex-wrap items-center justify-start space-y-1 md:space-y-0 bg-green-100 rounded-lg p-4 mb-4 text-sm text-green-700":"flex flex-wrap items-center justify-start space-y-1 md:space-y-0 bg-slate-100 rounded-lg p-4 mb-4 text-sm text-slate-700"),role:"alert",children:[s===N.d.INFO?(0,x.jsx)(f.Z,{className:"h-5 w-5"}):s===N.d.SUCCESS?(0,x.jsx)(b.Z,{className:"h-5 w-5"}):s===N.d.WARNING?(0,x.jsx)(g.Z,{className:"h-5 w-5"}):s===N.d.ERROR?(0,x.jsx)(g.Z,{className:"h-5 w-5"}):s===N.d.LOADING?(0,x.jsx)("div",{className:"h-5 w-5 border-4 border-slate-700 border-t-transparent rounded-full animate-spin"}):"",(0,x.jsxs)("div",{className:"md:ml-2",children:[s!==N.d.LOADING&&(0,x.jsx)("span",{className:"font-medium",children:i})," ",a]}),s===N.d.LOADING&&o&&(0,x.jsx)("a",{className:"font-medium text-slate-800 underline md:ml-auto",href:"https://polygonscan.com/tx/".concat(o),children:"check status"}),s!==N.d.LOADING&&(0,x.jsx)("button",{className:"text-slate-800 hover:text-slate-700 ml-auto",onClick:()=>u(!d),children:(0,x.jsx)(v.Z,{className:"h-6 w-6"})})]})})})};var S=s(69077),C=s(24484);let E=e=>{let{tokenAddress:t,showSymbol:s}=e,{address:n}=(0,S.mA)(),{chain:a}=(0,S.LN)(),{data:l}=(0,S.KQ)({address:n,chainId:(null==a?void 0:a.id)||C.yu.id,token:t});return l?(0,x.jsxs)(x.Fragment,{children:[(0,x.jsx)("span",{children:Number(null==l?void 0:l.formatted).toFixed(2)}),s&&(0,x.jsx)("span",{children:null==l?void 0:l.symbol})]}):(0,x.jsx)("div",{className:"animate-pulse",children:(0,x.jsx)("div",{className:"h-4 rounded bg-slate-700"})})};var I=s(49808);(n=c||(c={})).Withdraw="withdraw",n.Deposit="deposit",n.Swap="swap";var D=s(7974),F=s(84034),_=s(60662),M=s(22536),O=s(58033),R=s(78),B=s(30531),U=s(59175),Z=s(93074),L=s(24639);let W=[{coin:B.sN.RIC,tokenAddress:U.Nw,superTokenAddress:U.cZ,multi:1e6,key:"hasUsdcApprove"},{coin:B.sN.StIbAlluoUSD,tokenAddress:U.n0,superTokenAddress:U.$v,multi:1e18,key:"hasIbAlluoUSDApprove"},{coin:B.sN.StIbAlluoETH,tokenAddress:U.$G,superTokenAddress:U.EV,multi:1e18,key:"hasIbAlluoETHApprove"},{coin:B.sN.StIbAlluoBTC,tokenAddress:U.Mv,superTokenAddress:U.HT,multi:1e18,key:"hasIbAlluoBTCApprove"},{coin:B.sN.USDC,tokenAddress:U.QA,superTokenAddress:U.V8,multi:1e6,key:"hasUsdcApprove"},{coin:B.sN.DAI,tokenAddress:U.P0,superTokenAddress:U.ho,multi:1e18,key:"hasDaiApprove"},{coin:B.sN.WETH,tokenAddress:U.Yw,superTokenAddress:U.gp,multi:1e18,key:"hasWethApprove"},{coin:B.sN.WBTC,tokenAddress:U.ci,superTokenAddress:U.kE,multi:1e8,key:"hasWbtcApprove"},{coin:B.sN.MATIC,tokenAddress:U.gU,superTokenAddress:U.s,multi:1e18,key:"hasMaticApprove"}],P=[{coin:B.sN.FUSDC,tokenAddress:Z.E8,superTokenAddress:Z.AG,multi:1e6,key:"hasFUsdcApprove"},{coin:B.sN.FDAI,tokenAddress:Z.SQ,superTokenAddress:Z.jT,multi:1e18,key:"hasFDaiApprove"}],G=[{coin:B.sN.OPUSDC,tokenAddress:L.q4,superTokenAddress:L.NR,multi:1e6,key:"hasOpUsdcApprove"},{coin:B.sN.OPDAI,tokenAddress:L.r,superTokenAddress:L.bE,multi:1e18,key:"hasOpDaiApprove"},{coin:B.sN.OP,tokenAddress:L.Zx,superTokenAddress:L.oJ,multi:1e18,key:"hasOPApprove"}];var Q=s(81689),z=s(7365);let H=[...U.ow,...Z.Jg,...L.L6];var V=s(2593);let $=V.O$.from(0),K=V.O$.from(-1);function q(e,t){let s=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{pad:!1,commify:!1},n=V.O$.from(e),a=n.lt($),l=V.O$.from(10).pow(V.O$.from(t));a&&(n=n.mul(K));let i=n.mod(l).toString();for(;i.length<t;)i="0".concat(i);if(!s.pad){let r=i.match(/^([0-9]*[1-9]|0)(0*)/);r&&(i=r[1])}let o=n.div(l).toString();s.commify&&(o=o.replace(/\B(?=(\d{3})+(?!\d))/g,","));let c="".concat(o).concat("0"==i?"":".".concat(i));return a&&(c="-".concat(c)),c}let Y=e=>{let t={},s=H.map(async t=>{try{let s=await (0,R.a4)({address:t,abi:z.e,functionName:"balanceOf",args:[e]});return{balance:s,tokenAddress:t}}catch(n){return}});return Promise.all(s).then(e=>(e.map(e=>{e&&(e.tokenAddress===U.ci&&(t[e.tokenAddress]=q(e.balance,8)),(e.tokenAddress===U.QA||e.tokenAddress===Z.E8)&&(t[e.tokenAddress]=q(e.balance,6)),t[e.tokenAddress]=q(e.balance,18))}),t))},J=(e,t)=>{let{address:s}=(0,R.D0)();return Y(s).then(async n=>{let a=await (0,R.uN)({address:e,abi:R.em}),l=await (0,Q.M1)(a,s,t),i=W.find(t=>t.tokenAddress===e),r=i?i.multi:1,o=parseFloat(l)>parseFloat(n&&n[e])*r;return o})},X=[{coin:B.sN.USDCx,tokenAddress:U.V8},{coin:B.sN.DAIx,tokenAddress:U.ho},{coin:B.sN.WETHx,tokenAddress:U.gp},{coin:B.sN.WBTCx,tokenAddress:U.kE},{coin:B.sN.MATICx,tokenAddress:U.s},{coin:B.sN.StIbAlluoETH,tokenAddress:U.EV},{coin:B.sN.StIbAlluoUSD,tokenAddress:U.$v},{coin:B.sN.StIbAlluoBTC,tokenAddress:U.HT}],ee=[{coin:B.sN.FDAIx,tokenAddress:Z.jT},{coin:B.sN.FUSDCx,tokenAddress:Z.AG}],et=[{coin:B.sN.OPUSDCx,tokenAddress:L.NR},{coin:B.sN.OPDAIx,tokenAddress:L.bE},{coin:B.sN.OPx,tokenAddress:L.oJ}];var es=s(61744),en=s(30963);let ea=e=>{let{action:t,type:s,form:n,icon:a,loading:l,primary:i,disabled:r,handleClick:o}=e;return(0,x.jsxs)("button",{type:s,form:n,disabled:r,className:A(i?"btn-rounded bg-primary-500 hover:bg-primary-300 disabled:bg-primary-200 disabled:text-slate-500 text-slate-800":"btn-rounded bg-slate-100 hover:bg-slate-300"),onClick:o,children:[l?"":a,l&&!a&&(0,x.jsxs)("svg",{className:"animate-spin -ml-1 mr-2 h-4 w-4 text-slate-800",xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",children:[(0,x.jsx)("circle",{className:"opacity-25",cx:"12",cy:"12",r:"10",stroke:"currentColor",strokeWidth:"4"}),(0,x.jsx)("path",{className:"opacity-75",fill:"currentColor",d:"M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z"})]}),(0,x.jsx)("span",{children:t})]})},el=e=>{let{action:t,type:s,disabled:n,handleClick:a}=e;return(0,x.jsx)("button",{type:s,className:"address-link",disabled:n,onClick:a,children:(0,x.jsx)("span",{children:t})})},ei=e=>{let{action:t,type:s,disabled:n,handleClick:a}=e;return(0,x.jsx)("button",{type:s,className:"btn-pill-outline",disabled:n,onClick:a,children:(0,x.jsx)("span",{children:t})})},er=e=>{let{action:t,type:s,primary:n,disabled:a,loading:l,handleClick:i}=e;return(0,x.jsxs)("button",{type:s,disabled:a,className:A(n?"btn-pill-solid":"btn-pill-solid bg-slate-100 hover:bg-slate-300 disabled:bg-primary-200 disabled:text-slate-500"),onClick:i,children:[l&&(0,x.jsxs)("svg",{className:"animate-spin -ml-1 mr-2 h-4 w-4 text-slate-800",xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",children:[(0,x.jsx)("circle",{className:"opacity-25",cx:"12",cy:"12",r:"10",stroke:"currentColor",strokeWidth:"4"}),(0,x.jsx)("path",{className:"opacity-75",fill:"currentColor",d:"M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z"})]}),(0,x.jsx)("span",{children:t})]})};var eo=s(25675),ec=s.n(eo);let ed=e=>{let{classNames:t,value:s,coins:n,handleChange:a}=e;return(0,x.jsx)(F.R,{value:s,onChange:a,children:(0,x.jsxs)("div",{className:A(t||"relative w-full z-10"),children:[(0,x.jsxs)(F.R.Button,{className:"relative w-full cursor-default rounded-lg bg-slate-700 py-2 pl-3 pr-10 text-left text-slate-200 shadow-md focus:outline-none focus-visible:border-slate-500 focus-visible:ring-2 focus-visible:ring-slate-100 focus-visible:ring-opacity-75 focus-visible:ring-offset-2 focus-visible:ring-offset-slate-300 sm:text-sm",children:[(0,x.jsxs)("div",{className:"flex items-center whitespace-nowrap space-x-2",children:[s!==B.sN.SELECT&&(0,x.jsx)("span",{children:(0,x.jsx)(ec(),{width:"22",height:"22",src:B.mk[s],alt:s})}),(0,x.jsx)("span",{className:"block truncate",children:s})]}),(0,x.jsx)("span",{className:"pointer-events-none absolute inset-y-0 right-0 flex items-center pr-2",children:(0,x.jsx)(_.Z,{className:"h-5 w-5 text-slate-100","aria-hidden":"true"})})]}),(0,x.jsx)(h.u,{as:T.Fragment,leave:"transition ease-in duration-100",leaveFrom:"opacity-100",leaveTo:"opacity-0",children:(0,x.jsx)(F.R.Options,{className:"absolute mt-1 max-h-60 w-full overflow-auto rounded-md bg-slate-700 py-1 text-base shadow-lg ring-1 ring-black ring-opacity-5 focus:outline-none sm:text-sm",children:n.map((e,t)=>(0,x.jsx)(F.R.Option,{className:e=>{let{active:t}=e;return"relative cursor-default select-none py-2 pl-10 pr-4 ".concat(t?"bg-slate-800 text-slate-200":"text-slate-200")},value:e,children:t=>{let{selected:s}=t;return(0,x.jsxs)(x.Fragment,{children:[(0,x.jsxs)("div",{className:"flex items-center whitespace-nowrap space-x-2",children:[e!==B.sN.SELECT&&(0,x.jsx)("span",{children:(0,x.jsx)(ec(),{width:"22",height:"22",src:B.mk[e],alt:e})}),(0,x.jsx)("span",{className:"block truncate ".concat(s?"font-medium":"font-normal"),children:e})]}),s?(0,x.jsx)("span",{className:"absolute inset-y-0 left-0 flex items-center pl-3 text-green-600",children:(0,x.jsx)(M.Z,{className:"h-5 w-5","aria-hidden":"true"})}):null,s?(0,x.jsx)("span",{className:"absolute inset-y-0 left-0 flex items-center pl-3 text-green-600",children:(0,x.jsx)(M.Z,{className:"h-5 w-5","aria-hidden":"true"})}):null]})}},t))})})]})})},eu=["0.02%","0.03%","0.05%"],ep=[...B.ix,...B.Qo],em=e=>{let{type:t,close:s,setClose:n,balanceList:a}=e,{t:l}=(0,D.$G)("home"),{address:i}=(0,S.mA)(),{chain:r}=(0,S.LN)(),[o,d]=(0,T.useContext)(j.wP),[u,p]=(0,T.useState)(!1),[m,y]=(0,T.useState)(),[f,b]=(0,T.useState)(),[g,v]=(0,T.useState)(B.sN.SELECT),[A,w]=(0,T.useState)(B.sN.SELECT),[N,k]=(0,T.useState)(B.sN.SELECT),[C,E]=(0,T.useState)(""),[I,U]=(0,T.useState)(!1),[Z,L]=(0,T.useState)(),[Q,z]=(0,T.useState)(""),[H]=en.Z.useLazyUpgradeQuery(),[V]=en.Z.useLazyApproveQuery(),[$]=en.Z.useLazyDowngradeQuery(),[K,q]=(0,T.useState)(),[el,ei]=(0,T.useState)(),[er,eo]=(0,T.useState)(),[ec,em]=(0,T.useState)();(0,T.useEffect)(()=>{if(r){if(137===r.id){let e=X.map(e=>e.coin),t=W.map(e=>e.coin);q(e),ei(t),em(W),eo(X)}if(80001===r.id){let s=ee.map(e=>e.coin),n=P.map(e=>e.coin);q(s),ei(n),em(P),eo(ee)}if(10===r.id){let a=et.map(e=>e.coin),l=G.map(e=>e.coin);q(a),ei(l),em(G),eo(et)}}},[r]),(0,T.useEffect)(()=>{if(t===c.Withdraw&&g!==B.sN.SELECT){let e=null==er?void 0:er.find(e=>e.coin===g);b(e)}else if(t===c.Deposit&&g!==B.sN.SELECT){let s=null==ec?void 0:ec.find(e=>e.coin===g);J(null==s?void 0:s.tokenAddress,null==s?void 0:s.superTokenAddress).then(e=>p(e)),y(s)}},[g]),(0,T.useEffect)(()=>{c.Deposit&&m&&(async()=>{let e=await (0,R.EG)({address:i,chainId:null==r?void 0:r.id,token:null==m?void 0:m.tokenAddress}).then(e=>null==e?void 0:e.formatted);z(e)})()},[m]);let ey=()=>{if(m){U(!0);let e=V({tokenAddress:null==m?void 0:m.tokenAddress,superTokenAddress:null==m?void 0:m.superTokenAddress});e.then(e=>{U(!1),J(null==m?void 0:m.tokenAddress,null==m?void 0:m.superTokenAddress).then(e=>p(e))})}},ex=()=>{c.Withdraw&&a&&E(null==a?void 0:a[null==f?void 0:f.tokenAddress]),c.Deposit&&Q&&E(Q)},eh=e=>{null==e||e.preventDefault(),g!==B.sN.SELECT&&(d(O.Z.showLoadingAlert("Waiting for your transaction to be confirmed...","")),t===c.Withdraw?Y(i).then(e=>{if(0>=Number(C)||Object.keys(e).length&&0===Number(e[null==f?void 0:f.tokenAddress]))return;let t=es.parseEther(C);U(!0);let s=$({value:t.toString(),tokenAddress:null==f?void 0:f.tokenAddress});s.then(e=>{e.isSuccess&&d(O.Z.showSuccessAlert("Success","Transaction confirmed \uD83D\uDC4C")),U(e.isLoading),e.isError&&d(O.Z.showErrorAlert("Error","".concat(null==e?void 0:e.error))),setTimeout(()=>{d(O.Z.hideAlert())},5e3)}).catch(e=>d(O.Z.showErrorAlert("Error","".concat(e||(null==e?void 0:e.message)))))}):t===c.Deposit&&Y(i).then(e=>{if(!(0>Number(C))&&(!Object.keys(e).length||!m||0!==Number(e[m.tokenAddress]))&&u){let t=es.parseEther(C);U(!0);let s=H({value:t.toString(),tokenAddress:null==m?void 0:m.superTokenAddress});s.then(e=>{e.isSuccess&&d(O.Z.showSuccessAlert("Success","Transaction confirmed \uD83D\uDC4C")),U(e.isLoading),e.isError&&d(O.Z.showErrorAlert("Error","".concat(null==e?void 0:e.error))),setTimeout(()=>{d(O.Z.hideAlert())},5e3)}).catch(e=>d(O.Z.showErrorAlert("Error","".concat(e||(null==e?void 0:e.message)))))}}))};return(0,x.jsx)("div",{className:"flex flex-col items-start",children:(0,x.jsxs)("form",{onSubmit:eh,className:"flex flex-col items-start w-full space-y-6",children:[(t===c.Withdraw||t===c.Deposit)&&K&&el&&(0,x.jsxs)(x.Fragment,{children:[(0,x.jsxs)("label",{className:"text-slate-100",children:[l("token-action")," ",l(t),"?"]}),(0,x.jsx)(ed,{value:g,coins:t===c.Withdraw?K:t===c.Deposit?el:[],handleChange:v}),g!==B.sN.SELECT&&(0,x.jsxs)("p",{children:["Balance:"," ",c.Withdraw&&a&&f?parseFloat(null==a?void 0:a[null==f?void 0:f.tokenAddress]).toFixed(3):c.Deposit&&Q&&m?parseFloat(Q).toFixed(3):0," ",g]})]}),t===c.Swap&&(0,x.jsxs)(x.Fragment,{children:[(0,x.jsxs)("label",{className:"text-slate-100",children:[l(t===c.Swap?"tokens-action":"token-action")," ",l(t),"?"]}),(0,x.jsxs)("div",{className:"flex items-center space-x-2 w-full",children:[(0,x.jsxs)("span",{className:"text-slate-100",children:[l("from"),": "]}),(0,x.jsx)(ed,{classNames:"relative w-full z-30",value:A,coins:ep,handleChange:w})]}),(0,x.jsxs)("div",{className:"flex items-center space-x-2 w-full",children:[(0,x.jsxs)("span",{className:"text-slate-100",children:[l("to"),": "]}),(0,x.jsx)(ed,{classNames:"relative w-full z-20",value:N,coins:ep,handleChange:k})]})]}),(0,x.jsxs)("label",{className:"text-slate-100",children:[l("amount-action")," ",l(t),"?"]}),(0,x.jsxs)("div",{className:"relative w-full",children:[(0,x.jsx)("input",{type:"number",className:"input-outline",value:C,step:"any",onChange:e=>E(e.target.value),placeholder:t===c.Swap?"".concat(l(A!==B.sN.SELECT?"amount-in":"amount")," ").concat(A!==B.sN.SELECT?A:""):l("amount")}),(0,x.jsx)("button",{type:"button",className:"pr-8 text-primary-500 hover:text-primary-300 hover:font-bold absolute right-2.5 bottom-2.5 font-medium text-sm",onClick:ex,children:"Max"})]}),t===c.Swap&&(0,x.jsxs)(x.Fragment,{children:[(0,x.jsxs)("label",{className:"text-slate-100",children:[l("slippage-tolerance"),":"]}),(0,x.jsx)(F.R,{value:Z,onChange:L,children:(0,x.jsxs)("div",{className:"relative w-full z-10",children:[(0,x.jsxs)(F.R.Button,{className:"relative w-full cursor-default rounded-lg bg-slate-700 py-2 pl-3 pr-10 text-left text-slate-200 shadow-md focus:outline-none focus-visible:border-slate-500 focus-visible:ring-2 focus-visible:ring-slate-100 focus-visible:ring-opacity-75 focus-visible:ring-offset-2 focus-visible:ring-offset-slate-300 sm:text-sm",children:[(0,x.jsx)("span",{className:"block truncate",children:Z||"Select slippage tolerance"}),(0,x.jsx)("span",{className:"pointer-events-none absolute inset-y-0 right-0 flex items-center pr-2",children:(0,x.jsx)(_.Z,{className:"h-5 w-5 text-slate-100","aria-hidden":"true"})})]}),(0,x.jsx)(h.u,{as:T.Fragment,leave:"transition ease-in duration-100",leaveFrom:"opacity-100",leaveTo:"opacity-0",children:(0,x.jsx)(F.R.Options,{className:"absolute mt-1 max-h-60 w-full overflow-auto rounded-md bg-slate-700 py-1 text-base shadow-lg ring-1 ring-black ring-opacity-5 focus:outline-none sm:text-sm",children:eu.map((e,t)=>(0,x.jsx)(F.R.Option,{className:e=>{let{active:t}=e;return"relative cursor-default select-none py-2 pl-10 pr-4 ".concat(t?"bg-slate-800 text-slate-200":"text-slate-200")},value:e,children:t=>{let{selected:s}=t;return(0,x.jsxs)(x.Fragment,{children:[(0,x.jsx)("span",{className:"block truncate ".concat(s?"font-medium":"font-normal"),children:e}),s?(0,x.jsx)("span",{className:"absolute inset-y-0 left-0 flex items-center pl-3 text-green-600",children:(0,x.jsx)(M.Z,{className:"h-5 w-5","aria-hidden":"true"})}):null]})}},t))})})]})}),(0,x.jsxs)("p",{className:"text-slate-100",children:[l("min-output-amt"),": ...",N!==B.sN.SELECT?N:""]})]}),(0,x.jsxs)("div",{className:"flex space-x-4 w-full justify-end",children:[(0,x.jsx)("button",{type:"button",className:"text-slate-100 underline",onClick:()=>n(!s),children:l("cancel")}),(t===c.Withdraw||t===c.Swap)&&(0,x.jsx)(ea,{type:"submit",loading:I,disabled:I,action:I?"".concat(l("confirming"),"..."):"".concat(l("confirm")," ").concat(l(t))}),u&&t===c.Deposit&&(0,x.jsx)(ea,{type:"submit",loading:I,disabled:I,action:I?"".concat(l("confirming"),"..."):"".concat(l("confirm")," ").concat(l(t))}),!u&&t===c.Deposit&&(0,x.jsx)(ea,{type:"button",loading:I,action:I?"".concat(l("approving"),"..."):"".concat(l("approve")),disabled:g===B.sN.SELECT||I,handleClick:ey})]})]})})},ey=e=>{let{close:t,setClose:s,action:n,balanceList:a}=e,{t:l}=(0,D.$G)("home"),[i,r]=(0,T.useState)(0);return(0,T.useEffect)(()=>{r(n)},[n]),(0,x.jsxs)(I.O.Group,{selectedIndex:i,onChange:r,children:[(0,x.jsxs)(I.O.List,{className:"flex items-center justify-between border-b-2 border-primary-900 border-opacity-30 mb-8 mt-4",children:[(0,x.jsx)(I.O,{as:T.Fragment,children:e=>{let{selected:t}=e;return(0,x.jsx)("button",{className:t?"text-slate-100 border-b-2 border-primary-500":"text-slate-400 border-none",children:l("withdraw")})}}),(0,x.jsx)(I.O,{as:T.Fragment,children:e=>{let{selected:t}=e;return(0,x.jsx)("button",{className:t?"text-slate-100 border-b-2 border-primary-500":"text-slate-400 border-none",children:l("deposit")})}}),(0,x.jsx)("button",{className:"text-slate-400 hover:text-slate-100",onClick:()=>s(!t),children:(0,x.jsx)(v.Z,{className:"h-4 w-4"})})]}),(0,x.jsxs)(I.O.Panels,{children:[(0,x.jsx)(I.O.Panel,{children:(0,x.jsx)(em,{type:c.Withdraw,close:t,setClose:s,balanceList:a})}),(0,x.jsx)(I.O.Panel,{children:(0,x.jsx)(em,{type:c.Deposit,close:t,setClose:s,balanceList:a})}),(0,x.jsx)(I.O.Panel,{children:(0,x.jsx)(em,{type:c.Swap,close:t,setClose:s,balanceList:a})})]})]})},ex=new Map([[L.NR,"usd-coin"],[L.bE,"dai"],[Z.jT,"dai"],[Z.AG,"usd-coin"],[U.ho,"dai"],[U.V8,"usd-coin"],[U.gp,"weth"],[U.kE,"wrapped-bitcoin"],[U.s,"matic-network"],[U.cZ,"richochet"],[U.EV,"weth"],[U.$v,"usd-coin"],[U.HT,"wrapped-bitcoin"],[L.oJ,"optimism"]]);var eh=s(60179);let ef=()=>{let[e]=eh.Z.useLazyGetPricesQuery(),[t,s]=(0,T.useState)(new Map);return(0,T.useEffect)(()=>{let t=[...ex.values()],n=e(t.join(","));n.then(e=>{let t=[...ex.keys()],n=new Map;t.forEach(t=>{var s,a;let l=null==ex?void 0:ex.get(t),i=null==e?void 0:null===(s=e.data)||void 0===s?void 0:s.filter(e=>e.id===l);void 0===i?(n.set(t,0),console.warn("Could not fetch price for token ",t)):n.set(t,null===(a=i[0])||void 0===a?void 0:a.current_price)}),s(n)})},[]),t};(a=d||(d={})).ETH="#B3FFFF",a.WBTC="#FF8D8F",a.RIC="#7B7EFF",a.USDC="#2775CA",a.StIbAlluoETH="#75E276",a.StIbAlluoUSD="#E9DF89",a.OP="#ff0000",a.OPx="#ff0000",a.DAI="#d5b608",a.OPDAI="#d5b608",a.OPDAIx="#d5b608";let eb={[B.sN.ETH]:d.ETH,[B.sN.WBTC]:d.WBTC,[B.sN.RIC]:d.RIC,[B.sN.USDC]:d.USDC,[B.sN.StIbAlluoUSD]:d.StIbAlluoUSD,[B.sN.StIbAlluoETH]:d.StIbAlluoETH,[B.sN.OP]:d.OP,[B.sN.OPx]:d.OPx,[B.sN.OPDAI]:d.OPDAI,[B.sN.DAI]:d.DAI},eg={USDC:"usd-coin",MATIC:"matic-network",ETH:"ethereum",BTC:"bitcoin",WBTC:"wrapped-bitcoin",DAI:"dai",RIC:"richochet",IbAlluoETH:"ethereum",IbAlluoBTC:"wrapped-bitcoin",IbAlluoUSD:"usd-coin",StIbAlluoETH:"ethereum",StIbAlluoBTC:"wrapped-bitcoin",StIbAlluoUSD:"usd-coin",FUSDC:"usd-coin",FDAI:"dai",OP:"optimism"},ev=e=>{let[t]=eh.Z.useLazyGetTokenHistoryQuery(),[s,n]=(0,T.useState)(new Map),a=(0,T.useRef)(!1);return(0,T.useEffect)(()=>{if(e.size>0){let s=new Map;for(let[l,i]of e)if(i[0]!==B.sN.SELECT&&i[1]!==B.sN.SELECT){let r=[eg[i[0]],eg[i[1]]],o=r.map(async e=>await t(e));Promise.all(o).then(e=>{e.map(e=>{e&&s.set(null==e?void 0:e.originalArgs,(null==e?void 0:e.data.prices)||"")})}).finally(()=>{n(s),a.current=!0})}}},[e]),(0,T.useEffect)(()=>{a.current&&(a.current=!1)},[a]),s},eA=e=>{let t=[],s=[];return e&&e.length&&(s=[...t=[...e].sort((e,t)=>+e[0]-+t[0])].sort((e,t)=>+e[1]-+t[1])),{tSort:t,priceSorted:s}};var ew=s(67421),ej=s(9253),eN=s(46888),eT=s(3023),ek=s(75358),eS=s(14888),eC=s(86108);let eE=e=>{let{pairs:t,position:s}=e,{t:n}=(0,ew.$G)("home"),a=ev(t),[l,i]=(0,T.useState)([]),[r,o]=(0,T.useState)([]),[c,d]=(0,T.useState)([]),[u,p]=(0,T.useState)(["0","0"]),m=e=>"auto"!==e?new Date(e).toLocaleDateString("en-us",{month:"short",day:"numeric"}):new Date().toLocaleDateString("en-us",{month:"short",day:"numeric"}),y=e=>w(e),h=e=>{let t=e.map(e=>e[0]);d(t)};return(0,T.useEffect)(()=>{if(a.size>0&&t.size>0)for(let[e,s]of t){if(s[0]===B.sN.USDC||s[0]===B.sN.IbAlluoUSD||s[0]===B.sN.StIbAlluoUSD||s[0]===B.sN.DAI){let{tSort:n,priceSorted:l}=eA(a.get(eg[s[1]]));l.length&&n.length&&(p([l[0][1]||"0",l[l.length-1][1]||"0"]),i(n))}if(s[1]===B.sN.USDC||s[1]===B.sN.IbAlluoUSD||s[1]===B.sN.StIbAlluoUSD||s[1]===B.sN.DAI){let{tSort:r,priceSorted:o}=eA(a.get(eg[s[0]]));o.length&&r.length&&(p([o[0][1]||"0",o[o.length-1][1]||"0"]),i(r))}}},[a,t]),(0,T.useEffect)(()=>{l&&l.length&&h(l)},[l]),(0,T.useEffect)(()=>{if(l&&l.length&&c.length){let e=[];c.map((t,s)=>{e.push({name:t,price:l[s][1]})}),o(e)}},[c,l]),(0,x.jsxs)(x.Fragment,{children:[(0,x.jsx)("div",{className:"h-52 min-h-full w-52 min-w-full",children:(0,x.jsx)(ej.h,{height:"100%",width:"100%",children:(0,x.jsxs)(eN.T,{margin:{top:0,right:10,left:40,bottom:20},data:r,children:[(0,x.jsx)(eT.K,{dataKey:"name",tickFormatter:e=>m(e),interval:"preserveEnd",tickMargin:5,minTickGap:10}),(0,x.jsx)(ek.B,{dataKey:"y",tickMargin:5,orientation:"left",tickFormatter:e=>y(e),interval:"preserveEnd",domain:[u[0],u[1]]}),(0,x.jsx)(eS.u,{}),(0,x.jsx)(eC.u,{type:"monotone",dataKey:"price",stroke:"#81a8ce",fill:"#81a8ce"})]})})}),s&&(0,x.jsxs)("p",{className:"text-slate-100 my-2 pl-14",children:[(0,x.jsxs)("span",{className:"text-slate-400",children:[n("average-buy-price"),":"]})," 1 ",s.coinB," ="," ",((+u[0]+ +u[1])/2).toFixed(3)," ",s.coinA]})]})};var eI=s(73604),eD=s(46208),eF=s(43815);let e_=e=>{let{tokens:t,geckoPriceList:s,balances:n}=e,{t:a}=(0,D.$G)("home"),[l,i]=(0,T.useState)(0),[r,o]=(0,T.useState)([]),[c,d]=(0,T.useState)([]),{chain:u}=(0,S.LN)();return(0,T.useEffect)(()=>{u&&((null==u?void 0:u.id)===80001&&d(P),(null==u?void 0:u.id)===137&&d(W),(null==u?void 0:u.id)===10&&d(G))},[u]),(0,T.useEffect)(()=>{let e=[];t.filter(e=>!!e.color).map(t=>{e.push({name:t.token,color:t.color,value:parseFloat(t.ricAmount)})}),o(e)},[t]),(0,T.useEffect)(()=>{let e=c.reduce((e,t)=>{let a=Object.keys(n).length&&Object.keys(s).length&&Object.keys(eg).length&&(parseFloat(n[t.superTokenAddress])*parseFloat(s[eg[t.coin]].usd)).toFixed(6);return e+parseFloat(a)},0);i(e)},[t,n,s,eg]),(0,x.jsx)("div",{className:"h-52 w-52",children:(0,x.jsx)(ej.h,{height:"100%",width:"100%",children:(0,x.jsxs)(eI.u,{children:[(0,x.jsx)("text",{fill:"#81a8ce",x:100,y:80,textAnchor:"middle",dominantBaseline:"middle",children:a("total")}),l&&(0,x.jsx)("text",{fill:"white",x:100,y:110,fontWeight:600,textAnchor:"middle",dominantBaseline:"middle",children:w(l)}),(0,x.jsx)(eD.b,{data:r,innerRadius:80,outerRadius:100,fill:"#81a8ce",paddingAngle:0,nameKey:"name",dataKey:"value",children:r.map(e=>(0,x.jsx)(eF.b,{fill:e.color},"cell-".concat(e.name)))})]})})})};var eM=s(45485),eO=s(44414);let eR=e=>{let{contentPerPage:t=0,count:s=0}=e,[n,a]=(0,T.useState)(1),[l,i]=(0,T.useState)({before:!1,paginationGroup:[],after:!0}),r=Math.ceil(s/t),o=n*t,[c,d]=(0,T.useState)([]);(0,T.useEffect)(()=>{if(r>2){let e=Array(r-2).fill(1).map((e,t)=>t+2);d(e)}},[r]),(0,T.useEffect)(()=>{let e=c.indexOf(n),t=[],s=!1,a=!1;t=1===n?c.slice(0,3):n===r||n===r-1||n===r-2?c.slice(-3,r):2===n?c.slice(e,e+3):[n-1,n,n+1],r<=5?(s=!1,a=!1):(s=!1,a=!1,t[0]>2&&(s=!0),t[2]<r-1&&(a=!0)),i({paginationGroup:t,before:s,after:a})},[n,c,r]);let u=e=>{a(t=>e?t===r?t:t+1:1===t?t:t-1)},p=e=>{e>r?a(r):e<1?a(1):a(e)};return{totalPages:r,nextPage:()=>u(!0),prevPage:()=>u(!1),setPage:p,firstContentIndex:o-t,lastContentIndex:o,page:n,gaps:l}};var eB=s(84009);(l=u||(u={})).Position="Position",l.Market="Market",l.Balances="Balances",l.ViewPosition="View Position";let eU=e=>{let{coinA:t,coinB:s,token:n,type:a}=e;return(a===u.Market||a===u.Position)&&t&&s?(0,x.jsxs)("div",{className:"flex flex-wrap items-center justify-between lg:space-x-2",children:[(0,x.jsxs)("span",{className:"flex items-center space-x-2",children:[(0,x.jsx)(ec(),{width:"24",height:"24",src:B.mk[t],alt:t})," ",(0,x.jsx)("span",{className:"text-sm",children:t})]}),(0,x.jsx)(eB.Z,{className:"h-5 w-5"}),(0,x.jsxs)("span",{className:"flex items-center space-x-2",children:[(0,x.jsx)(ec(),{width:"24",height:"24",src:B.mk[s],alt:s})," ",(0,x.jsx)("span",{className:"text-sm",children:s})]})]}):a===u.Balances&&n?(0,x.jsxs)(x.Fragment,{children:[(0,x.jsx)(ec(),{width:"24",height:"24",src:B.mk[n],alt:n}),(0,x.jsx)("span",{className:A(n===B.sN.ETH?"bg-eth text-slate-800 px-1 py-0":n===B.sN.WBTC?"bg-btc text-slate-800 px-1 py-0":n===B.sN.RIC?"bg-ric text-slate-200 px-1 py-0":n===B.sN.USDC?"bg-usdc text-slate-200 px-1 py-0":n===B.sN.StIbAlluoETH?"bg-stIbAlluoEth text-slate-800 px-1 py-0":n===B.sN.StIbAlluoUSD?"bg-stIbAlluoUsd text-slate-800 px-1 py-0":"bg-transparent","text-sm"),children:n})]}):a===u.ViewPosition&&t&&s?(0,x.jsxs)(x.Fragment,{children:[(0,x.jsxs)("span",{className:"flex items-center space-x-2",children:[(0,x.jsx)(ec(),{width:"40",height:"40",src:B.mk[t],alt:t})," ",(0,x.jsx)("span",{className:"font-medium text-slate-100",children:t})]}),(0,x.jsx)(eB.Z,{className:"h-10 w-16"}),(0,x.jsxs)("span",{className:"flex items-center space-x-2",children:[(0,x.jsx)(ec(),{width:"30",height:"30",src:B.mk[s],alt:s})," ",(0,x.jsx)("span",{className:"font-medium text-slate-100",children:s})]})]}):(0,x.jsx)(x.Fragment,{})},eZ=e=>{let{headers:t,rowNumber:s}=e,n=[],a=[];for(let l=0;l<t.length;l++)a.push((0,x.jsx)("td",{className:"h-4 bg-slate-700"},l));for(let i=0;i<s;i++)n.push((0,x.jsx)("tr",{className:"animate-pulse",children:a},i));return(0,x.jsxs)("table",{className:"border-separate border-spacing-2 min-w-full",children:[(0,x.jsx)("thead",{children:(0,x.jsx)("tr",{children:t.map((e,t)=>(0,x.jsx)("th",{scope:"col",className:"font-normal text-slate-400 px-6 py-4 text-start",children:e},t))})}),(0,x.jsx)("tbody",{children:n})]})},eL=e=>!!e.positions||0===e.positions,eW=e=>!!e.streams||0===e.streams,eP=e=>!!e.token,eG=e=>{let{headers:t,rowData:s,selectable:n,selectData:a,tableLoaderRows:l}=e,{t:i}=(0,D.$G)("home"),{firstContentIndex:r,lastContentIndex:o,nextPage:c,prevPage:d,page:p,gaps:m,setPage:y,totalPages:h}=eR({contentPerPage:6,count:s.length});return(0,x.jsxs)(x.Fragment,{children:[(0,x.jsxs)("div",{className:"overflow-auto",children:[0===s.length&&(0,x.jsx)(eZ,{headers:t,rowNumber:l}),s.length>0&&(0,x.jsxs)("table",{className:"table-fixed min-w-full",children:[(0,x.jsx)("thead",{children:(0,x.jsx)("tr",{children:t.map((e,t)=>(0,x.jsx)("th",{scope:"col",className:"font-normal text-slate-400 px-6 py-4 text-start",children:i("".concat(e.toLocaleLowerCase().replace(/\s/g,"-")))},t))})}),(0,x.jsx)("tbody",{children:s.slice(r,o).map((e,t)=>{var s,l;return(0,x.jsx)("tr",{className:A(n?"cursor-pointer":"cursor-auto","text-slate-200 border-b border-slate-600"),onClick:()=>n&&eL(e)?null==a?void 0:a(e):null,children:eL(e)?(0,x.jsxs)(x.Fragment,{children:[(0,x.jsx)("td",{className:"px-2 py-4 whitespace-nowrap",children:(0,x.jsx)("div",{className:"inline-flex items-center gap-2",children:(0,x.jsx)(eU,{coinA:e.coinA,coinB:e.coinB,type:u.Position})})}),(0,x.jsxs)("td",{className:"px-6 py-4 whitespace-nowrap",children:[(0,x.jsx)("p",{children:w(parseFloat(e.rateUsdValue))}),(0,x.jsxs)("p",{className:"text-slate-400",children:[parseFloat(e.output).toFixed(3)," ",(0,x.jsxs)("span",{className:"text-sm",children:[e.coinA,"x"]})]})]}),(0,x.jsxs)("td",{className:"px-6 py-4 whitespace-nowrap",children:[(0,x.jsx)("p",{children:w(parseFloat(e.input.toFixed(3)))}),(0,x.jsxs)("p",{className:"text-slate-400",children:[e.input.toFixed(3)," ",(0,x.jsxs)("span",{className:"text-sm",children:[e.coinA,"x"]})]})]})]}):eW(e)?(0,x.jsxs)(x.Fragment,{children:[(0,x.jsx)("td",{className:"px-2 py-4 whitespace-nowrap",children:(0,x.jsx)("div",{className:"inline-flex items-center gap-2",children:(0,x.jsx)(eU,{coinA:e.coinA,coinB:e.coinB,type:u.Market})})}),(0,x.jsx)("td",{className:"px-6 py-4 whitespace-nowrap",children:e.feePercent}),(0,x.jsxs)("td",{className:"px-6 py-4 whitespace-nowrap",children:[(0,x.jsx)("p",{children:w(parseFloat(e.usdValue))}),(0,x.jsxs)("p",{className:"text-slate-400",children:[e.total," ",(0,x.jsxs)("span",{className:"text-sm",children:[e.coinA,"x"]})]})]}),(0,x.jsx)("td",{className:"px-6 py-4 whitespace-nowrap",children:e.streams})]}):eP(e)?(0,x.jsxs)(x.Fragment,{children:[(0,x.jsx)("td",{className:"flex items-center px-2 py-4 whitespace-nowrap space-x-2",children:(0,x.jsx)(eU,{token:e.token,type:u.Balances})}),(0,x.jsxs)("td",{className:"px-6 py-4 whitespace-nowrap",children:[(0,x.jsx)("p",{children:e.token===B.sN.WBTC||e.token===B.sN.IbAlluoBTC||e.token===B.sN.StIbAlluoBTC||e.token===B.sN.ETH||e.token===B.sN.IbAlluoETH||e.token===B.sN.StIbAlluoETH?null===(s=parseFloat(e.ricAmount).toFixed(20).match(/^-?\d*\.?0*\d{0,2}/))||void 0===s?void 0:s[0].replace(/(?:\.0+|(\.\d+?)0+)$/,"$1"):parseFloat(e.ricAmount).toFixed(2)}),(0,x.jsx)("p",{className:"text-slate-400",children:w(parseFloat(e.ricUsdAmount))})]}),(0,x.jsxs)("td",{className:"px-6 py-4 whitespace-nowrap",children:[(0,x.jsx)("p",{children:"N/A"===e.walletAmount?e.walletAmount:e.token===B.sN.WBTC||e.token===B.sN.IbAlluoBTC||e.token===B.sN.StIbAlluoBTC||e.token===B.sN.ETH||e.token===B.sN.IbAlluoETH||e.token===B.sN.StIbAlluoETH?null===(l=parseFloat(e.walletAmount).toFixed(20).match(/^-?\d*\.?0*\d{0,2}/))||void 0===l?void 0:l[0].replace(/(?:\.0+|(\.\d+?)0+)$/,"$1"):parseFloat(e.walletAmount).toFixed(2)}),(0,x.jsx)("p",{className:"text-slate-400",children:"N/A"===e.walletUsdAmount?e.walletUsdAmount:w(parseFloat(e.walletUsdAmount))})]})]}):(0,x.jsx)(x.Fragment,{})},t)})})]})]}),s.length>0&&(0,x.jsxs)("div",{className:"flex justify-end text-slate-500 space-x-2 mt-4",children:[(0,x.jsx)("button",{onClick:d,className:"".concat(1!==p&&"hover:text-slate-300"," ").concat(1===p&&"text-slate-600"),disabled:1===p,children:(0,x.jsx)(eM.Z,{className:"h-4 w-4"})}),(0,x.jsx)("button",{onClick:()=>y(1),className:"".concat(1===p&&"text-slate-100"),children:"1"}),m.before?"...":"",m.paginationGroup.map(e=>(0,x.jsx)("button",{onClick:()=>y(e),className:"".concat(p===e?"text-slate-100":""),children:e},e)),m.after?"...":"",h>1&&(0,x.jsx)("button",{onClick:()=>y(h),className:"".concat(p===h&&"text-slate-100"),children:h}),(0,x.jsx)("button",{onClick:c,className:"".concat(p!==h&&"hover:text-slate-300"," ").concat(p===h&&"text-slate-600"),disabled:p===h,children:(0,x.jsx)(eO.Z,{className:"h-4 w-4"})})]})]})},eQ=["token","ricochet-balance","wallet-balance"],ez=e=>{let{tokens:t,balances:s}=e,{t:n}=(0,D.$G)("home"),{address:a,isConnected:l}=(0,S.mA)(),{chain:i}=(0,S.LN)(),[r,o]=(0,T.useState)(0),[c,d]=(0,T.useState)(!0),u=ef(),[p,m]=(0,T.useState)(),[y,h]=(0,T.useState)({}),[f,b]=(0,T.useState)([]);return(0,T.useEffect)(()=>{m([]),i&&((null==i?void 0:i.id)===80001&&m(P),(null==i?void 0:i.id)===137&&m(W),(null==i?void 0:i.id)===10&&m(G))},[null==i?void 0:i.id,s]),(0,T.useEffect)(()=>{l&&(null==i?void 0:i.id)&&(t&&h(t),(async()=>{Object.keys(y).length&&Object.keys(s).length&&await Promise.all(p.map(async e=>{if(!a)return;let t=await (0,R.EG)({address:a,chainId:i.id,token:e.coin!==B.sN.RIC&&e.coin!==B.sN.OpRIC?e.tokenAddress:void 0});return{token:e.coin,ricAmount:s[e.superTokenAddress],ricUsdAmount:(parseFloat(s[e.superTokenAddress])*u.get(e.superTokenAddress)).toFixed(2),walletAmount:e.coin===B.sN.RIC?"N/A":null==t?void 0:t.formatted,walletUsdAmount:e.coin===B.sN.RIC?"N/A":(parseFloat(null==t?void 0:t.formatted)*u.get(e.superTokenAddress)).toFixed(2),color:eb[e.coin]}})).then(e=>{let t=e.sort((e,t)=>parseFloat(t.ricAmount)-parseFloat(e.ricAmount));t.length>0&&b(t)})})())},[l,t,s,y,p]),(0,x.jsxs)(x.Fragment,{children:[(0,x.jsx)("p",{className:"font-light uppercase tracking-widest text-primary-500",children:n("your-balances")}),!c&&s&&(0,x.jsx)(ey,{close:c,setClose:d,action:r,balanceList:s}),c&&(0,x.jsxs)(x.Fragment,{children:[(0,x.jsxs)("div",{className:"flex flex-wrap items-center justify-evenly basis-1/3 my-4",children:[(0,x.jsx)(ei,{type:"button",action:"".concat(n("withdraw")),handleClick:()=>{d(!1),o(0)}}),(0,x.jsx)(er,{type:"button",action:"".concat(n("deposit")),primary:!0,handleClick:()=>{d(!1),o(1)}})]}),(0,x.jsx)("div",{className:"flex justify-center my-4",children:(0,x.jsx)(e_,{tokens:f,geckoPriceList:y,balances:s})}),f&&(0,x.jsx)(eG,{headers:eQ,rowData:f,tableLoaderRows:6})]})]})};var eH={src:"/_next/static/media/launchpad-bg.d3b0fdae.jpg",height:2722,width:4096,blurDataURL:"data:image/jpeg;base64,/9j/4AAQSkZJRgABAQAAAQABAAD/2wCEAAoKCgoKCgsMDAsPEA4QDxYUExMUFiIYGhgaGCIzICUgICUgMy03LCksNy1RQDg4QFFeT0pPXnFlZXGPiI+7u/sBCgoKCgoKCwwMCw8QDhAPFhQTExQWIhgaGBoYIjMgJSAgJSAzLTcsKSw3LVFAODhAUV5PSk9ecWVlcY+Ij7u7+//CABEIAAUACAMBIgACEQEDEQH/xAAnAAEBAAAAAAAAAAAAAAAAAAAABwEBAAAAAAAAAAAAAAAAAAAABP/aAAwDAQACEAMQAAAAnQQv/8QAGxABAAEFAQAAAAAAAAAAAAAAAQIAAwQREiH/2gAIAQEAAT8AhcI4sjgV83X/xAAaEQEAAQUAAAAAAAAAAAAAAAACAQADERIx/9oACAECAQE/ALjS1zPDFf/EABYRAAMAAAAAAAAAAAAAAAAAAAABIf/aAAgBAwEBPwBQ/9k=",blurWidth:8,blurHeight:5};let eV=e=>{let{content:t}=e;return(0,x.jsx)("div",{className:"card",children:t})},e$=e=>{let{content:t}=e;return(0,x.jsx)("div",{className:"card-outline text-center",children:t})},eK=e=>{let{content:t}=e;return(0,x.jsxs)("div",{className:"card text-center relative",children:[(0,x.jsx)("div",{className:"z-10",children:t}),(0,x.jsx)(ec(),{src:eH,className:"object-cover object-bottom absolute inset-0 z-0 rounded-lg",draggable:"false",fill:!0,sizes:"(max-width: 768px) 100vw, (max-width: 1200px) 50vw, 33vw",alt:"Launchpad Background",priority:!0}),(0,x.jsx)("div",{className:"absolute inset-0 bg-gradient-to-b from-slate-700 via-slate-800 to-slate-900 z-0 opacity-60 rounded-lg"})]})},eq=e=>{let{content:t}=e;return(0,x.jsx)("div",{className:"card-container",children:t})},eY=e=>{let{content:t}=e;return(0,x.jsx)("div",{className:"flex flex-wrap items-center justify-between space-y-4 md:space-y-0 mb-10",children:t})},eJ=e=>{let{content:t}=e;return(0,x.jsxs)("div",{className:"card-sm",children:[!t&&(0,x.jsx)("div",{className:"animate-pulse",children:(0,x.jsxs)("div",{className:"grid grid-rows-2 gap-2",children:[(0,x.jsx)("div",{className:"h-5 bg-slate-700 rounded"}),(0,x.jsx)("div",{className:"h-6 bg-slate-700 rounded"})]})}),!!t&&t]})},eX=e=>(0,x.jsxs)("svg",{viewBox:"0 0 50 25",fill:"none",xmlns:"http://www.w3.org/2000/svg",...e,children:[(0,x.jsx)("path",{d:"M37.918 0h-23.78c0-.043 5.913 4.585 5.913 4.585L0 12.083l20.266 7.669-5.87 4.756 23.522-.343A12.068 12.068 0 0 0 50 12.083C50 5.399 43.359-.043 37.918 0Zm0 21.508c-5.227 0-9.426-4.241-9.426-9.425 0-5.185 4.241-9.426 9.426-9.426 5.184 0 9.426 4.241 9.426 9.426 0 5.184-4.242 9.425-9.426 9.425Z",fill:"#fff"}),(0,x.jsx)("path",{d:"M35.947 18.038h-2.185v-6.684s2.185.129 2.185 1.414v5.27ZM33.89 4.842h5.313c1.5 0 4.242.514 4.242 4.113s-3.514 3.813-3.514 3.813l3.342 5.27h-2.185l-2.87-4.542v-2.142s3.17.471 3.17-2.485-2.185-2.185-2.185-2.185l-4.113-.129s-1.114-.3-1.114-1.67l-.086-.043Z",fill:"#fff"})]}),e0=()=>{let{t:e}=(0,D.$G)("footer");return(0,x.jsxs)("div",{className:"flex flex-wrap items-start justify-between bg-footer-500 p-16",children:[(0,x.jsxs)("h6",{className:"flex space-x-2 mb-10 md:mb-0",children:[(0,x.jsx)(eX,{width:"50",height:"25"}),(0,x.jsx)("span",{className:"text-slate-100 font-semibold tracking-wide",children:"Ricochet"})]}),(0,x.jsxs)("section",{className:"flex flex-wrap items-center space-x-8 md:space-x-14 lg:space-x-32",children:[(0,x.jsxs)("article",{className:"flex flex-col space-y-4",children:[(0,x.jsx)("h6",{className:"text-slate-600 font-bold",children:e("support")}),(0,x.jsx)("a",{href:"https://discord.gg/ptqCBnJ9dr",target:"_blank",rel:"noopener noreferrer",className:"text-primary-400 underline",children:e("discord")}),(0,x.jsx)("a",{href:"https://docs.ricochet.exchange/tutorial/using-the-dapp",target:"_blank",rel:"noopener noreferrer",className:"text-primary-400 underline",children:e("tutorials")}),(0,x.jsx)("a",{href:"https://docs.ricochet.exchange/",target:"_blank",rel:"noopener noreferrer",className:"text-primary-400 underline",children:e("documentation")})]}),(0,x.jsxs)("article",{className:"flex flex-col space-y-4",children:[(0,x.jsx)("h6",{className:"text-slate-600 font-bold",children:e("explore")}),(0,x.jsx)("a",{href:"https://medium.com/ricochet-exchange",target:"_blank",rel:"noopener noreferrer",className:"text-primary-400 underline",children:e("medium")}),(0,x.jsx)("a",{href:"https://github.com/Ricochet-Exchange/",target:"_blank",rel:"noopener noreferrer",className:"text-primary-400 underline",children:e("github")}),(0,x.jsx)("a",{href:"https://twitter.com/ricochetxchange",target:"_blank",rel:"noopener noreferrer",className:"text-primary-400 underline",children:e("twitter")})]})]})]})};var e1=s(62367),e2=s(13012),e5=s(56466);let e4=()=>{let{t:e}=(0,D.$G)("home"),[t,s]=(0,T.useContext)(j.wP),{isConnected:n}=(0,S.mA)(),{chain:a}=(0,S.LN)(),[l,i]=(0,T.useState)(!1),[r,o]=(0,T.useState)(e5.YK[0]),[c,d]=(0,T.useState)(1e3),[u]=en.Z.useLazyStartStreamQuery(),p=()=>{let e="https://app.uniswap.org/#/swap?theme=dark&inputCurrency=".concat(U.QA,"&outputCurrency=").concat(U.cZ,"&exactAmount=100000&exactField=output");window.open(e,"_blank")};(0,T.useEffect)(()=>{a&&(80001===a.id&&o(e5.nh[0]),10===a.id&&o(e5.kO[0]))},[a]);let m=()=>{if(!r||!c){s(O.Z.showErrorAlert("Oops!","We were unable to find the selected position. Please try another one.")),setTimeout(()=>{s(O.Z.hideAlert())},5e3);return}if(i(!0),s(O.Z.showLoadingAlert("Waiting for your transaction to be confirmed...","")),!c)return;let e="20";if((null==r?void 0:r.type)===e5.Z6.launchpad){let t=new e2.Z(e),n=t.div(2592e3).times(1e18).div(c).round(0,0).times(c).div(1e18).times(259200).div(3600).div(24).div(30).times(10);e=n.toFixed()}let a=u({amount:e,config:r});a.then(e=>{e.isSuccess&&s(O.Z.showSuccessAlert("Success","Transaction confirmed \uD83D\uDC4C")),i(e.isLoading),e.isError&&s(O.Z.showErrorAlert("Error","".concat(null==e?void 0:e.error))),setTimeout(()=>{s(O.Z.hideAlert())},5e3)}).catch(e=>s(O.Z.showErrorAlert("Error","".concat(e||(null==e?void 0:e.message)))))};return(0,x.jsxs)("div",{className:"flex flex-col space-y-4",children:[(0,x.jsxs)("div",{className:"flex items-center justify-center text-slate-100 space-x-3",children:[(0,x.jsx)(e1.Z,{className:"h-6 w-6"}),(0,x.jsx)("p",{className:"uppercase tracking-widest",children:"Rexpro"})]}),(0,x.jsx)("p",{className:"text-slate-100",children:e("start-a-position")}),n&&(0,x.jsx)(er,{type:"button",primary:!0,loading:l,disabled:l,action:l?"".concat(e("confirming"),"..."):e("start-20-position"),handleClick:m}),(0,x.jsx)(er,{type:"button",primary:!1,action:"".concat(e("buy")," 100,000 RIC"),handleClick:p})]})};var e3=s(89396);let e6=function(e,t,s){var n;let a=arguments.length>3&&void 0!==arguments[3]?arguments[3]:0;return(s.size>0&&t.size>0?parseFloat(null===(n=t.get(e.flowKey))||void 0===n?void 0:n.flowsOwned)*s.get(e.tokenA):0).toFixed(a)},e8=function(e,t){let s=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0;return(parseFloat(e)*t).toFixed(s)},e7=["market","fee percent","total value streaming","currently streaming"],e9=e=>{let{coingeckoPrices:t,sortedList:s,queries:n}=e,{t:a}=(0,D.$G)("home"),[l,i]=(0,T.useState)(""),[r,o]=(0,T.useState)([]),[c,d]=(0,T.useState)([]),{chain:u}=(0,S.LN)();(0,T.useEffect)(()=>{if(s.length>0&&n.size>0){let e=[];s.map(s=>{var a,l;return e.push({...s,total:parseFloat(null===(a=n.get(s.flowKey))||void 0===a?void 0:a.flowsOwned)||0,usdValue:e6(s,n,t),feePercent:s.coinA.includes("IbAlluo")?"0.5%":"2%",streams:(null===(l=n.get(s.flowKey))||void 0===l?void 0:l.totalFlows)||0})});let a=e.sort((e,t)=>t.total-e.total);o(a)}},[n,t,s]);let p=e=>{let{value:t}=e.target;i(t),r.filter(e=>e.coinA.toUpperCase().includes(t.toUpperCase())||e.coinB.toUpperCase().includes(t.toUpperCase()))};return(0,x.jsxs)(x.Fragment,{children:[(0,x.jsx)(eY,{content:(0,x.jsxs)("div",{className:"w-full flex flex-wrap items-center justify-between space-y-4 lg:space-y-0",children:[(0,x.jsx)("p",{className:"text-slate-400 uppercase",children:a("markets")}),(0,x.jsxs)("label",{className:"relative block w-max",children:[(0,x.jsx)("span",{className:"sr-only",children:"Search"}),(0,x.jsx)("span",{className:"absolute inset-y-0 right-0 flex items-center pr-2",children:(0,x.jsx)(e3.Z,{className:"h-4 w-4 fill-slate-400",viewBox:"0 0 20 20"})}),(0,x.jsx)("input",{className:"input-search",placeholder:a("search"),type:"text",name:"search",value:l,onChange:p})]})]})}),u&&(0,x.jsx)(eG,{headers:e7,rowData:l?c:r,tableLoaderRows:12})]})};var te=s(6512),tt=s(44149),ts=s(82847),tn=s(47145);let ta=e=>(0,x.jsxs)("svg",{viewBox:"0 0 66 33",fill:"none",xmlns:"http://www.w3.org/2000/svg",...e,children:[(0,x.jsx)("path",{d:"M50.051 0H18.663c0-.056 7.805 6.052 7.805 6.052L0 15.949l26.75 10.123-7.747 6.278 31.048-.452C58.874 31.898 66 24.772 66 15.949S57.234-.056 50.051 0Zm0 28.391c-6.9 0-12.442-5.599-12.442-12.442s5.6-12.442 12.442-12.442c6.844 0 12.443 5.599 12.443 12.442s-5.6 12.442-12.443 12.442Z",fill:"url(#a)"}),(0,x.jsx)("path",{d:"M47.45 23.81h-2.885v-8.822s2.885.17 2.885 1.866v6.956ZM44.735 6.391h7.013c1.98 0 5.599.679 5.599 5.43 0 4.75-4.638 5.033-4.638 5.033l4.412 6.956h-2.885l-3.789-5.995v-2.828s4.185.623 4.185-3.28c0-3.902-2.884-2.884-2.884-2.884l-5.43-.17s-1.47-.396-1.47-2.205l-.113-.057Z",fill:"#C5C2C6"}),(0,x.jsx)("defs",{children:(0,x.jsxs)("linearGradient",{id:"a",x1:0,y1:16.175,x2:66,y2:16.175,gradientUnits:"userSpaceOnUse",children:[(0,x.jsx)("stop",{stopColor:"#6194C3"}),(0,x.jsx)("stop",{offset:1,stopColor:"#B5CBE2"})]})})]});var tl=s(11163),ti=s.n(tl),tr=s(91463),to=s.n(tr),tc=s(41664),td=s.n(tc),tu=s(23857);let tp=e=>{let{locale:t,...s}=e,n=(0,tl.useRouter)(),a=s.href||n.asPath,l=n.pathname;return Object.keys(n.query).forEach(e=>{if("locale"===e){l=l.replace("[".concat(e,"]"),t);return}l=l.replace("[".concat(e,"]"),n.query[e])}),t&&(a=s.href?"/".concat(t).concat(s.href):l),(0,x.jsx)(td(),{className:"text-sm text-slate-200",href:a,onClick:()=>{var e;return null===(e=tu.Z.cache)||void 0===e?void 0:e.call(tu.Z,t)},children:t})},tm=e=>{let{children:t,skipLocaleHandling:s,...n}=e,a=(0,tl.useRouter)(),l=n.locale||a.query.locale||"",i=n.href||a.asPath;return 0===i.indexOf("http")&&(s=!0),l&&!s&&(i=i?"/".concat(l).concat(i):a.pathname.replace("[locale]",l)),(0,x.jsx)(x.Fragment,{children:(0,x.jsx)(td(),{href:i,...n,children:t})})};function ty(){let{disconnect:e}=(0,S.qL)(),{address:t,isConnected:s}=(0,S.mA)(),{data:n,isError:a,isLoading:l}=(0,S.KQ)({address:t,chainId:C.yu.id,token:U.cZ}),{t:i}=(0,D.$G)("home"),r=ti().query.locale||to().i18n.defaultLocale;return(0,x.jsx)(te.p,{as:"nav",className:"navbar",children:t=>{let{open:o}=t;return(0,x.jsxs)(x.Fragment,{children:[(0,x.jsxs)(tm,{href:"/",className:"p-2 mr-4 inline-flex items-center space-x-2",draggable:!1,children:[(0,x.jsx)(ta,{width:"50",height:"25"}),(0,x.jsx)("span",{className:"text-xl tracking-wide",children:"Ricochet"})]}),(0,x.jsx)("p",{className:"inline-flex items-center space-x-2",children:to().i18n.locales.map(e=>e===r?null:(0,x.jsx)(tp,{locale:e},e))}),(0,x.jsxs)(te.p.Button,{className:"btn-mobile-menu",children:[(0,x.jsx)("span",{className:"sr-only",children:"Open main menu"}),o?(0,x.jsx)(v.Z,{className:"h-6 w-6","aria-hidden":"true"}):(0,x.jsx)(tt.Z,{className:"h-6 w-6","aria-hidden":"true"})]}),(0,x.jsx)(te.p.Panel,{className:"w-full lg:inline-flex lg:flex-grow lg:w-auto",children:(0,x.jsxs)("div",{className:"mobile-links",children:[(0,x.jsxs)("a",{className:"inline-flex items-center space-x-1 text-primary-500",href:"https://discord.com/channels/862796510604296263/864667072357597185",target:"_blank",rel:"noopener noreferrer",children:[(0,x.jsx)("span",{className:"underline",children:"support"}),(0,x.jsx)(ts.Z,{className:"h-4 w-4"})]}),l&&(0,x.jsx)("p",{children:"Fetching balance..."}),a&&(0,x.jsx)(x.Fragment,{}),!l&&!a&&s&&(0,x.jsxs)("p",{children:[Number(null==n?void 0:n.formatted).toFixed(2)," ",null==n?void 0:n.symbol]}),(0,x.jsx)(tn.x3.Custom,{children:e=>{let{isConnected:t,show:s,unsupported:n,truncatedAddress:a,ensName:l}=e;return(0,x.jsx)(x.Fragment,{children:t?n?(0,x.jsx)(ea,{action:"".concat(i("wrong-network")),handleClick:s,type:"button"}):(0,x.jsx)("button",{type:"button",className:"address-link",children:null!=l?l:a}):(0,x.jsx)(ea,{action:"".concat(i("connect-wallet")),handleClick:s,type:"button"})})}}),s&&(0,x.jsxs)("div",{className:"mt-3 space-y-1 px-2",children:[(0,x.jsx)(te.p.Button,{as:"a",href:"https://staging.ricochet.exchange/#/recent-activity",rel:"noreferrer",target:"_blank",className:"block rounded-md px-3 py-2 text-base font-medium text-slate-400 hover:bg-slate-700 hover:text-slate-100 cursor-pointer",children:i("your-activity")}),(0,x.jsx)(te.p.Button,{as:"a",onClick:()=>e(),className:"block rounded-md px-3 py-2 text-base font-medium text-slate-400 hover:bg-slate-700 hover:text-slate-100 cursor-pointer",children:i("disconnect-wallet")})]})]})}),(0,x.jsxs)("div",{className:"desktop-links",children:[(0,x.jsxs)("a",{className:"inline-flex items-center space-x-1 text-primary-500",href:"https://discord.com/channels/862796510604296263/864667072357597185",target:"_blank",rel:"noopener noreferrer",children:[(0,x.jsx)("span",{className:"underline",children:i("support")}),(0,x.jsx)(ts.Z,{className:"h-4 w-4"})]}),l&&(0,x.jsx)("p",{children:"Fetching balance..."}),a&&(0,x.jsx)(x.Fragment,{}),!l&&!a&&s&&(0,x.jsxs)("p",{children:[Number(null==n?void 0:n.formatted).toFixed(2)," ",null==n?void 0:n.symbol]}),(0,x.jsx)(tn.x3.Custom,{children:e=>{let{isConnected:t,show:s,unsupported:n,truncatedAddress:a,ensName:l}=e;return(0,x.jsx)(x.Fragment,{children:t?n?(0,x.jsx)(ea,{action:"".concat(i("wrong-network")),handleClick:s,type:"button"}):(0,x.jsx)(el,{action:null!=l?l:a,handleClick:s,type:"button"}):(0,x.jsx)(ea,{action:"".concat(i("connect-wallet")),handleClick:s,type:"button"})})}})]})]})}})}let tx=[{inputs:[{internalType:"address",name:"_owner",type:"address"},{internalType:"contract ISuperfluid",name:"_host",type:"address"},{internalType:"contract IConstantFlowAgreementV1",name:"_cfa",type:"address"},{internalType:"contract IInstantDistributionAgreementV1",name:"_ida",type:"address"},{internalType:"string",name:"_registrationKey",type:"string"},{internalType:"contract IREXReferral",name:"_rexReferral",type:"address"}],stateMutability:"nonpayable",type:"constructor"},{anonymous:!1,inputs:[{indexed:!1,internalType:"uint256",name:"totalAmount",type:"uint256"},{indexed:!1,internalType:"uint256",name:"feeCollected",type:"uint256"},{indexed:!1,internalType:"address",name:"token",type:"address"}],name:"Distribution",type:"event"},{anonymous:!1,inputs:[{indexed:!0,internalType:"address",name:"previousOwner",type:"address"},{indexed:!0,internalType:"address",name:"newOwner",type:"address"}],name:"OwnershipTransferred",type:"event"},{inputs:[{internalType:"contract ISuperToken",name:"_token",type:"address"},{internalType:"uint128",name:"_feeRate",type:"uint128"},{internalType:"uint256",name:"_emissionRate",type:"uint256"},{internalType:"uint256",name:"_requestId",type:"uint256"},{internalType:"uint128",name:"_shareScaler",type:"uint128"}],name:"addOutputPool",outputs:[],stateMutability:"nonpayable",type:"function"},{inputs:[{internalType:"contract ISuperToken",name:"_superToken",type:"address"},{internalType:"address",name:"_agreementClass",type:"address"},{internalType:"bytes32",name:"",type:"bytes32"},{internalType:"bytes",name:"_agreementData",type:"bytes"},{internalType:"bytes",name:"",type:"bytes"},{internalType:"bytes",name:"_ctx",type:"bytes"}],name:"afterAgreementCreated",outputs:[{internalType:"bytes",name:"_newCtx",type:"bytes"}],stateMutability:"nonpayable",type:"function"},{inputs:[{internalType:"contract ISuperToken",name:"_superToken",type:"address"},{internalType:"address",name:"_agreementClass",type:"address"},{internalType:"bytes32",name:"",type:"bytes32"},{internalType:"bytes",name:"_agreementData",type:"bytes"},{internalType:"bytes",name:"_cbdata",type:"bytes"},{internalType:"bytes",name:"_ctx",type:"bytes"}],name:"afterAgreementTerminated",outputs:[{internalType:"bytes",name:"_newCtx",type:"bytes"}],stateMutability:"nonpayable",type:"function"},{inputs:[{internalType:"contract ISuperToken",name:"_superToken",type:"address"},{internalType:"address",name:"_agreementClass",type:"address"},{internalType:"bytes32",name:"",type:"bytes32"},{internalType:"bytes",name:"_agreementData",type:"bytes"},{internalType:"bytes",name:"_cbdata",type:"bytes"},{internalType:"bytes",name:"_ctx",type:"bytes"}],name:"afterAgreementUpdated",outputs:[{internalType:"bytes",name:"_newCtx",type:"bytes"}],stateMutability:"nonpayable",type:"function"},{inputs:[{internalType:"contract ISuperToken",name:"_superToken",type:"address"},{internalType:"address",name:"_agreementClass",type:"address"},{internalType:"bytes32",name:"",type:"bytes32"},{internalType:"bytes",name:"_agreementData",type:"bytes"},{internalType:"bytes",name:"",type:"bytes"}],name:"beforeAgreementCreated",outputs:[{internalType:"bytes",name:"_cbdata",type:"bytes"}],stateMutability:"view",type:"function"},{inputs:[{internalType:"contract ISuperToken",name:"_superToken",type:"address"},{internalType:"address",name:"_agreementClass",type:"address"},{internalType:"bytes32",name:"",type:"bytes32"},{internalType:"bytes",name:"_agreementData",type:"bytes"},{internalType:"bytes",name:"",type:"bytes"}],name:"beforeAgreementTerminated",outputs:[{internalType:"bytes",name:"_cbdata",type:"bytes"}],stateMutability:"view",type:"function"},{inputs:[{internalType:"contract ISuperToken",name:"_superToken",type:"address"},{internalType:"address",name:"_agreementClass",type:"address"},{internalType:"bytes32",name:"",type:"bytes32"},{internalType:"bytes",name:"_agreementData",type:"bytes"},{internalType:"bytes",name:"_ctx",type:"bytes"}],name:"beforeAgreementUpdated",outputs:[{internalType:"bytes",name:"_cbdata",type:"bytes"}],stateMutability:"view",type:"function"},{inputs:[{internalType:"bytes",name:"ctx",type:"bytes"}],name:"distribute",outputs:[{internalType:"bytes",name:"newCtx",type:"bytes"}],stateMutability:"nonpayable",type:"function"},{inputs:[{internalType:"address",name:"streamer",type:"address"}],name:"emergencyCloseStream",outputs:[],stateMutability:"nonpayable",type:"function"},{inputs:[],name:"emergencyDrain",outputs:[],stateMutability:"nonpayable",type:"function"},{inputs:[{internalType:"uint256",name:"_requestId",type:"uint256"}],name:"getCurrentValue",outputs:[{internalType:"bool",name:"_ifRetrieve",type:"bool"},{internalType:"uint256",name:"_value",type:"uint256"},{internalType:"uint256",name:"_timestampRetrieved",type:"uint256"}],stateMutability:"view",type:"function"},{inputs:[{internalType:"uint32",name:"_index",type:"uint32"}],name:"getEmissionRate",outputs:[{internalType:"uint256",name:"",type:"uint256"}],stateMutability:"view",type:"function"},{inputs:[{internalType:"uint32",name:"_index",type:"uint32"}],name:"getFeeRate",outputs:[{internalType:"uint128",name:"",type:"uint128"}],stateMutability:"view",type:"function"},{inputs:[{internalType:"uint32",name:"_index",type:"uint32"},{internalType:"address",name:"_streamer",type:"address"}],name:"getIDAShares",outputs:[{internalType:"bool",name:"_exist",type:"bool"},{internalType:"bool",name:"_approved",type:"bool"},{internalType:"uint128",name:"_units",type:"uint128"},{internalType:"uint256",name:"_pendingDistribution",type:"uint256"}],stateMutability:"view",type:"function"},{inputs:[],name:"getInputToken",outputs:[{internalType:"contract ISuperToken",name:"",type:"address"}],stateMutability:"view",type:"function"},{inputs:[],name:"getLastDistributionAt",outputs:[{internalType:"uint256",name:"",type:"uint256"}],stateMutability:"view",type:"function"},{inputs:[{internalType:"contract ISuperToken",name:"token",type:"address"}],name:"getOracleInfo",outputs:[{components:[{internalType:"uint256",name:"requestId",type:"uint256"},{internalType:"uint256",name:"usdPrice",type:"uint256"},{internalType:"uint256",name:"lastUpdatedAt",type:"uint256"}],internalType:"struct REXMarket.OracleInfo",name:"",type:"tuple"}],stateMutability:"view",type:"function"},{inputs:[{internalType:"uint32",name:"_index",type:"uint32"}],name:"getOutputPool",outputs:[{components:[{internalType:"contract ISuperToken",name:"token",type:"address"},{internalType:"uint128",name:"feeRate",type:"uint128"},{internalType:"uint256",name:"emissionRate",type:"uint256"},{internalType:"uint128",name:"shareScaler",type:"uint128"}],internalType:"struct REXMarket.OutputPool",name:"",type:"tuple"}],stateMutability:"view",type:"function"},{inputs:[],name:"getRateTolerance",outputs:[{internalType:"uint256",name:"",type:"uint256"}],stateMutability:"view",type:"function"},{inputs:[{internalType:"address",name:"_streamer",type:"address"},{internalType:"contract ISuperToken",name:"_token",type:"address"}],name:"getStreamRate",outputs:[{internalType:"int96",name:"_requesterFlowRate",type:"int96"}],stateMutability:"view",type:"function"},{inputs:[],name:"getTellorOracle",outputs:[{internalType:"address",name:"",type:"address"}],stateMutability:"view",type:"function"},{inputs:[],name:"getTotalInflow",outputs:[{internalType:"int96",name:"",type:"int96"}],stateMutability:"view",type:"function"},{inputs:[{internalType:"contract ISuperToken",name:"_inputToken",type:"address"},{internalType:"uint256",name:"_rateTolerance",type:"uint256"},{internalType:"contract ITellor",name:"_tellor",type:"address"},{internalType:"uint256",name:"_inputTokenRequestId",type:"uint256"},{internalType:"uint128",name:"_affiliateFee",type:"uint128"},{internalType:"uint128",name:"_feeRate",type:"uint128"}],name:"initializeMarket",outputs:[],stateMutability:"nonpayable",type:"function"},{inputs:[{internalType:"uint256",name:"_emissionRate",type:"uint256"}],name:"initializeSubsidies",outputs:[],stateMutability:"nonpayable",type:"function"},{inputs:[{internalType:"contract ISuperToken",name:"_inputTokenA",type:"address"},{internalType:"uint256",name:"_inputTokenARequestId",type:"uint256"},{internalType:"uint128",name:"_inputTokenAShareScaler",type:"uint128"},{internalType:"contract ISuperToken",name:"_inputTokenB",type:"address"},{internalType:"uint256",name:"_inputTokenBRequestId",type:"uint256"},{internalType:"uint128",name:"_inputTokenBShareScaler",type:"uint128"},{internalType:"uint128",name:"_feeRate",type:"uint128"},{internalType:"uint256",name:"_rateTolerance",type:"uint256"}],name:"initializeTwoWayMarket",outputs:[],stateMutability:"nonpayable",type:"function"},{inputs:[],name:"isAppJailed",outputs:[{internalType:"bool",name:"",type:"bool"}],stateMutability:"view",type:"function"},{inputs:[],name:"owner",outputs:[{internalType:"address",name:"",type:"address"}],stateMutability:"view",type:"function"},{inputs:[],name:"renounceOwnership",outputs:[],stateMutability:"nonpayable",type:"function"},{inputs:[],name:"ric",outputs:[{internalType:"address",name:"",type:"address"}],stateMutability:"view",type:"function"},{inputs:[{internalType:"uint32",name:"_index",type:"uint32"},{internalType:"uint128",name:"_emissionRate",type:"uint128"}],name:"setEmissionRate",outputs:[],stateMutability:"nonpayable",type:"function"},{inputs:[{internalType:"uint32",name:"_index",type:"uint32"},{internalType:"uint128",name:"_feeRate",type:"uint128"}],name:"setFeeRate",outputs:[],stateMutability:"nonpayable",type:"function"},{inputs:[{internalType:"uint256",name:"_rate",type:"uint256"}],name:"setRateTolerance",outputs:[],stateMutability:"nonpayable",type:"function"},{inputs:[{internalType:"address",name:"newOwner",type:"address"}],name:"transferOwnership",outputs:[],stateMutability:"nonpayable",type:"function"},{inputs:[{internalType:"contract ISuperToken",name:"_token",type:"address"}],name:"updateTokenPrice",outputs:[],stateMutability:"nonpayable",type:"function"},{inputs:[],name:"updateTokenPrices",outputs:[],stateMutability:"nonpayable",type:"function"}],th=e=>U.zV[e],tf=async(e,t,s,n)=>{if("twoWayIbUsdIbBTC"===e||"twoWayIbEthIbUsd"===e||"twoWayIbBTCIbUsd"===e||"twoWayIbUsdIbEth"===e){let{outputIndex:a}=e5.zJ.filter(e=>e.input===t&&e.output===s)[0],l=await (0,R.a4)({address:th(e),abi:tx,functionName:"getOutputPool",args:[a]}),i=(null==l?void 0:l.shareScaler)*1e3;return i}return 1e4};(i=p||(p={})).none="",i.change="change",i.deposit="deposit";let tb=e=>{let{setClose:t,position:s}=e,{t:n}=(0,D.$G)("home"),{address:a}=(0,S.mA)(),{chain:l}=(0,S.LN)(),[i,r]=(0,T.useState)(),[o,c]=(0,T.useState)(p.none),[d,u]=(0,T.useState)(""),[m,y]=(0,T.useState)(""),[h,f]=(0,T.useContext)(j.wP),[b]=en.Z.useLazyStartStreamQuery(),[g]=en.Z.useLazyStopStreamQuery(),[v,A]=(0,T.useState)(""),[w]=en.Z.useLazyUpgradeQuery(),[N,k]=(0,T.useState)(!1),[E,I]=(0,T.useState)(!1),[F,_]=(0,T.useState)(1e3);(0,T.useEffect)(()=>{var e;if(!s)return;let t=null==s?void 0:null===(e=s.flowKey)||void 0===e?void 0:e.replace("FlowQuery",""),n=async(e,t,s)=>{let n=await tf(e,t,s,null==l?void 0:l.id).then(e=>e);_(n)};n(t,null==s?void 0:s.tokenA,null==s?void 0:s.tokenB)},[null==s?void 0:s.flowKey,null==s?void 0:s.tokenA,null==s?void 0:s.tokenB]),(0,T.useEffect)(()=>{if(s){let e=W.find(e=>e.coin===s.coinA);J(null==e?void 0:e.tokenAddress,null==e?void 0:e.superTokenAddress).then(e=>I(e)),r(e)}},[s]),(0,T.useEffect)(()=>{o===p.deposit&&i&&(async()=>{let e=await (0,R.EG)({address:a,chainId:C.yu.id,token:null==i?void 0:i.tokenAddress}).then(e=>null==e?void 0:e.formatted);A(e)})()},[o,i]);let M=()=>{o===p.deposit&&v&&u(v)},B=e=>{null==e||e.preventDefault(),o===p.deposit&&Y(a).then(e=>{if(!(0>Number(d))&&(!Object.keys(e).length||!i||0!==Number(e[i.tokenAddress]))&&E){let t=V.O$.from(d).toString();k(!0);let s=w({value:t,tokenAddress:null==i?void 0:i.superTokenAddress});s.then(e=>{e.isSuccess&&f(O.Z.showSuccessAlert("Success","Transaction confirmed \uD83D\uDC4C")),k(e.isLoading),e.isError&&f(O.Z.showErrorAlert("Error","".concat(null==e?void 0:e.error))),setTimeout(()=>{f(O.Z.hideAlert())},5e3)}).catch(e=>f(O.Z.showErrorAlert("Error","".concat(e||(null==e?void 0:e.message)))))}})},U=e=>{if(e.preventDefault(),s&&o===p.change){if(k(!0),f(O.Z.showLoadingAlert("Waiting for your transaction to be confirmed...","")),!s||!F){f(O.Z.showErrorAlert("Oops!","We were unable to find the selected position. Please try another one.")),setTimeout(()=>{f(O.Z.hideAlert())},5e3);return}let t=d;if((null==s?void 0:s.type)===e5.Z6.market){let n=new e2.Z(d),a=n.div(2592e3).times(1e18).div(F).round(0,0).times(F).div(1e18).times(259200).div(3600).div(24).div(30).times(10);t=a.toFixed()}let l={superToken:s.superToken,tokenA:s.tokenA,tokenB:s.tokenB,coinA:s.coinA,coinB:s.coinB,flowKey:s.flowKey,type:s.type},i=b({amount:t,config:l});i.then(e=>{e.isSuccess&&f(O.Z.showSuccessAlert("Success","Transaction confirmed \uD83D\uDC4C")),k(e.isLoading),e.isError&&f(O.Z.showErrorAlert("Error","".concat(null==e?void 0:e.error))),setTimeout(()=>{f(O.Z.hideAlert())},5e3)}).catch(e=>f(O.Z.showErrorAlert("Error","".concat(e||(null==e?void 0:e.message)))))}else f(O.Z.showErrorAlert("Oops!","We were unable to find the selected position. Please try another one.")),setTimeout(()=>{f(O.Z.hideAlert())},5e3)},Z=()=>{k(!0),f(O.Z.showLoadingAlert("Waiting for your transaction to be confirmed...",""));let e=g(s);e.then(e=>{e.isSuccess&&f(O.Z.showSuccessAlert("Success","Transaction confirmed \uD83D\uDC4C")),k(e.isLoading),e.isError&&(console.log("response",e),f(O.Z.showErrorAlert("Error","".concat(null==e?void 0:e.error)))),setTimeout(()=>{f(O.Z.hideAlert())},5e3)}).catch(e=>{console.log({error:e}),f(O.Z.showErrorAlert("Error","".concat(e||(null==e?void 0:e.message))))})};return(0,x.jsxs)("div",{className:"flex flex-col space-y-4",children:[!o&&(0,x.jsxs)(x.Fragment,{children:[(0,x.jsxs)("h6",{className:"text-slate-100",children:[n("position-action"),"?"]}),(0,x.jsx)(ei,{action:"".concat(n("change-swap-amount")),type:"button",handleClick:()=>c(p.change)}),(0,x.jsx)(ei,{action:"".concat(n("deposit")," ").concat(s.coinA),type:"button",handleClick:()=>c(p.deposit)}),(0,x.jsx)(ea,{action:N?"".concat(n("stopping"),"..."):"".concat(n("stop-position")),type:"button",loading:N,disabled:N,handleClick:Z}),(0,x.jsx)("hr",{className:"border-slate-500"}),(0,x.jsx)("div",{className:"flex justify-end",children:(0,x.jsx)("button",{type:"button",className:"outline-none text-slate-100 underline",onClick:()=>t(!1),children:n("cancel")})})]}),o===p.deposit&&(0,x.jsxs)("form",{id:"change-swap-form",className:"flex flex-col space-y-6",onSubmit:B,children:[(0,x.jsxs)("label",{className:"text-slate-100",children:[n("amount-action")," ",n("deposit"),"?"]}),(0,x.jsxs)("div",{className:"relative w-full",children:[(0,x.jsx)("input",{type:"number",step:"any",className:"input-outline",value:d,onChange:e=>y(e.target.value),placeholder:"".concat(n("amount"))}),(0,x.jsx)("button",{type:"button",className:"pr-8 text-primary-500 hover:text-primary-300 hover:font-bold absolute right-2.5 bottom-2.5 font-medium text-sm",onClick:M,children:"Max"})]}),o===p.deposit&&(0,x.jsxs)("p",{children:["Balance: ",v&&i?parseFloat(v).toFixed(3):0," ",s.coinA]}),(0,x.jsxs)("div",{className:"flex justify-end space-x-4",children:[(0,x.jsx)("button",{type:"button",className:"outline-none text-slate-100 underline",onClick:()=>c(p.none),children:n("cancel")}),(0,x.jsx)(ea,{type:"submit",action:N?"".concat(n("confirming"),"..."):"".concat(n("confirm")," ").concat(n("deposit")),primary:!0,loading:N,disabled:!d||N})]})]}),o===p.change&&(0,x.jsxs)("form",{id:"change-swap-form",className:"flex flex-col space-y-6",onSubmit:U,children:[(0,x.jsxs)("label",{className:"text-slate-100",children:[n("desired-swap-amount"),"?"]}),(0,x.jsx)("input",{type:"number",step:"any",className:"input-outline",value:d,onChange:e=>u(e.target.value),placeholder:"".concat(n("swap-amount"))}),(0,x.jsxs)("div",{className:"flex justify-end space-x-4",children:[(0,x.jsx)("button",{type:"button",className:"outline-none text-slate-100 underline",onClick:()=>c(p.none),children:n("cancel")}),(0,x.jsx)(ea,{type:"submit",action:N?"".concat(n("confirming"),"..."):"".concat(n("confirm-change")),primary:!0,loading:N,disabled:!d||N})]})]})]})},tg=e=>{let t=new Map;return e.length&&e.map(e=>t.set(e.flowKey,[e.coinA,e.coinB])),t};(r=m||(m={})).USDCxDAI="usdcxdai",r.DAIxUSDC="daixusdc",r.USDCxETH="usdcxeth",r.ETHxUSDC="ethxusdc",r.DAIxETH="daixeth",r.ETHxDAI="ethxdai",r.USDCxWBTC="usdcxwbtc",r.WBTCxUSDC="wbtcxusdc",r.DAIxWBTC="daixwbtc",r.WBTCxDAI="wbtcxdai",r.USDCxMATIC="usdcxmatic",r.MATICxUSDC="maticxusdc",r.MATICxDAI="maticxdai",r.DAIxMATIC="daixmatic",r.USDC_WBTC="twoWayusdcWbtc",r.USDC_WETH="twoWayusdcWeth",r.WBTC_USDC="twoWaywbtcUsdc",r.WETH_USDC="twoWaywethUsdc",r.TWO_WAY_USDC_RIC="twoWayUsdcRic",r.TWO_WAY_RIC_USDC="twoWayRicUsdc",r.TWO_WAY_MATIC_USDC="twoWayMaticUsdc",r.TWO_WAY_USDC_MATIC="twoWayUsdcMatic",r.TWO_WAY_MATIC_DAI="twoWayMaticDai",r.TWO_WAY_DAI_MATIC="twoWayDaiMatic",r.TWO_WAY_WBTC_DAI="twoWayWbtcDai",r.TWO_WAY_DAI_WBTC="twoWayDaiWbtc",r.TWO_WAY_IBUSD_IBETH="twoWayIbUsdIbEth",r.TWO_WAY_IBETH_IBUSD="twoWayIbEthIbUsd",r.TWO_WAY_IBUSD_IBBTC="twoWayIbUsdIbBTC",r.TWO_WAY_IBBTC_IBUSD="twoWayIbBTCIbUsd",r.MATICx="maticx",r.DAIx="daix",r.DAI="dai",r.USDCx="usdcx",r.USDC="usdc",r.WETHx="wethx",r.WETH="weth",r.WBTCx="wbtcx",r.WBTC="wbtc",r.HOST="host",r.IDA="ida",r.RICapp="ricApp",r.RIC="ric",r.StIbAlluoUSD="stiballuousd",r.StIbAlluoETH="stiballuoeth",r.StIbAlluoBTC="stiballuobtc",r.IbAlluoUSD="iballuousd",r.IbAlluoETH="iballuoeth",r.IbAlluoBTC="iballuobtc",r.Referral="referral";let tv=e=>{let{close:t,setClose:s}=e,n=["continuous"],{t:a}=(0,D.$G)("home"),{chain:l}=(0,S.LN)(),[i]=(0,T.useState)((0,e5.st)((null==l?void 0:l.id)||137)),[r,o]=(0,T.useState)(i.map(e=>e.coinA).filter((e,t,s)=>s.indexOf(e)===t)),[c,d]=(0,T.useState)(i.map(e=>e.coinB).filter((e,t,s)=>s.indexOf(e)===t)),[u,p]=(0,T.useState)(),[y,f]=(0,T.useState)(new Map),[b,g]=(0,T.useState)(B.sN.SELECT),[v,A]=(0,T.useState)(B.sN.SELECT),[w,N]=(0,T.useState)("0"),[k,C]=(0,T.useContext)(j.wP),[E,I]=(0,T.useState)(!1),[R,U]=(0,T.useState)(1e3),[Z]=en.Z.useLazyStartStreamQuery(),[L,W]=(0,T.useState)(n[0]);(0,T.useEffect)(()=>{var e;if(!u)return;let t=(null==u?void 0:u.flowKey.includes("FlowQuery"))?null==u?void 0:null===(e=u.flowKey)||void 0===e?void 0:e.replace("FlowQuery",""):Object(m)[null==u?void 0:u.flowKey],s=async(e,t,s,n)=>{let a=await tf(e,t,s,n).then(e=>e);U(a)};s(t,null==u?void 0:u.tokenA,null==u?void 0:u.tokenB,(null==l?void 0:l.id)||137)},[null==u?void 0:u.flowKey,null==u?void 0:u.tokenA,null==u?void 0:u.tokenB]),(0,T.useEffect)(()=>{if(b!==B.sN.SELECT){let e=i.filter(e=>e.coinA===b).map(e=>e.coinB).filter((e,t,s)=>s.indexOf(e)===t);d([B.sN.SELECT,...e])}else{let t=i.map(e=>e.coinB).filter((e,t,s)=>s.indexOf(e)===t);d([B.sN.SELECT,...t])}},[b]),(0,T.useEffect)(()=>{if(v!==B.sN.SELECT){let e=i.filter(e=>e.coinB===v).map(e=>e.coinA).filter((e,t,s)=>s.indexOf(e)===t);o([B.sN.SELECT,...e])}else{let t=i.map(e=>e.coinB).filter((e,t,s)=>s.indexOf(e)===t);o([B.sN.SELECT,...t])}},[v]),(0,T.useEffect)(()=>{if(b!==B.sN.SELECT&&v!==B.sN.SELECT){let e=i.find(e=>e.coinA===b&&e.coinB===v);p(e)}},[b,v]),(0,T.useEffect)(()=>{if(u){let e=tg([u]);f(e)}},[u]);let P=e=>{if(e.preventDefault(),b===B.sN.SELECT||v===B.sN.SELECT)return;if(!u||!R){C(O.Z.showErrorAlert("Oops!","We were unable to find the selected position. Please try another one.")),setTimeout(()=>{C(O.Z.hideAlert())},5e3);return}if(I(!0),C(O.Z.showLoadingAlert("Waiting for your transaction to be confirmed...","")),!R)return;let t=w;if((null==u?void 0:u.type)===e5.Z6.market){let s=new e2.Z(w),n=s.div(2592e3).times(1e18).div(R).round(0,0).times(R).div(1e18).times(259200).div(3600).div(24).div(30).times(10);t=n.toFixed()}let a=Z({amount:t,config:u});a.then(e=>{e.isSuccess&&C(O.Z.showSuccessAlert("Success","Transaction confirmed \uD83D\uDC4C")),I(e.isLoading),e.isError&&C(O.Z.showErrorAlert("Error","".concat(null==e?void 0:e.error))),setTimeout(()=>{C(O.Z.hideAlert())},5e3)}).catch(e=>C(O.Z.showErrorAlert("Error","".concat(e||(null==e?void 0:e.message)))))};return(0,x.jsxs)(x.Fragment,{children:[(0,x.jsx)("p",{className:"text-primary-500 uppercase",children:a("your-streams")}),(0,x.jsxs)("div",{className:"flex flex-wrap items-center justify-between space-y-8 lg:space-y-0 mt-4",children:[(0,x.jsxs)("form",{id:"new-position-form",className:"flex flex-col items-start lg:p-8 w-full lg:w-1/2 space-y-6",onSubmit:P,children:[(0,x.jsxs)("label",{className:"text-slate-100",children:[a("position-token"),"?"]}),(0,x.jsxs)("div",{className:"flex flex-wrap lg:flex-nowrap items-center lg:space-x-4 w-full lg:w-auto",children:[(0,x.jsx)(ed,{classNames:"relative w-full z-20",value:b,coins:r,handleChange:g}),(0,x.jsx)(eB.Z,{className:"h-10 w-16"}),(0,x.jsx)(ed,{classNames:"relative w-full z-20",value:v,coins:c,handleChange:A})]}),(0,x.jsxs)("label",{className:"text-slate-100",children:[a("position-amount"),"?"]}),(0,x.jsx)("input",{type:"number",step:"any",className:"input-outline",value:w,onChange:e=>N(e.target.value),placeholder:"".concat(a("amount"))}),(0,x.jsxs)("label",{className:"text-slate-100",children:[a("position-select"),":"]}),(0,x.jsx)(F.R,{value:L,onChange:W,children:(0,x.jsxs)("div",{className:"relative w-full z-10",children:[(0,x.jsxs)(F.R.Button,{className:"relative w-full cursor-default rounded-lg bg-slate-700 py-2 pl-3 pr-10 text-left text-slate-200 shadow-md focus:outline-none focus-visible:border-slate-500 focus-visible:ring-2 focus-visible:ring-slate-100 focus-visible:ring-opacity-75 focus-visible:ring-offset-2 focus-visible:ring-offset-slate-300 sm:text-sm",children:[(0,x.jsx)("span",{className:"block truncate",children:a("".concat(L.toLocaleLowerCase().replace(/\s/g,"-")))}),(0,x.jsx)("span",{className:"pointer-events-none absolute inset-y-0 right-0 flex items-center pr-2",children:(0,x.jsx)(_.Z,{className:"h-5 w-5 text-slate-100","aria-hidden":"true"})})]}),(0,x.jsx)(h.u,{as:T.Fragment,leave:"transition ease-in duration-100",leaveFrom:"opacity-100",leaveTo:"opacity-0",children:(0,x.jsx)(F.R.Options,{className:"absolute mt-1 max-h-60 w-full overflow-auto rounded-md bg-slate-700 py-1 text-base shadow-lg ring-1 ring-black ring-opacity-5 focus:outline-none sm:text-sm",children:n.map((e,t)=>(0,x.jsx)(F.R.Option,{className:e=>{let{active:t}=e;return"relative cursor-default select-none py-2 pl-10 pr-4 ".concat(t?"bg-slate-800 text-slate-200":"text-slate-200")},value:e,children:t=>{let{selected:s}=t;return(0,x.jsxs)(x.Fragment,{children:[(0,x.jsx)("span",{className:"block truncate ".concat(s?"font-medium":"font-normal"),children:a("".concat(e.toLocaleLowerCase().replace(/\s/g,"-")))}),s?(0,x.jsx)("span",{className:"absolute inset-y-0 left-0 flex items-center pl-3 text-green-600",children:(0,x.jsx)(M.Z,{className:"h-5 w-5","aria-hidden":"true"})}):null,s?(0,x.jsx)("span",{className:"absolute inset-y-0 left-0 flex items-center pl-3 text-green-600",children:(0,x.jsx)(M.Z,{className:"h-5 w-5","aria-hidden":"true"})}):null]})}},t))})})]})})]}),(0,x.jsx)("div",{className:"w-full lg:w-1/2",children:(0,x.jsx)(eE,{pairs:y})}),(0,x.jsxs)("div",{className:"flex space-x-4 w-full justify-end",children:[(0,x.jsx)("button",{type:"button",className:"text-slate-100 underline",onClick:()=>s(!t),children:a("cancel")}),(0,x.jsx)(ea,{type:"submit",form:"new-position-form",loading:E,disabled:E,action:E?"".concat(a("processing"),"..."):"".concat(a("start-new-position"))})]})]})]})};var tA=s(56457);let tw=e=>{let[t,s]=(0,T.useState)(new Map),n=(0,T.useRef)(!1);return(0,T.useEffect)(()=>{if(e.length&&!n.current){let t=tg(e);s(t),n.current=!0}},[e]),(0,T.useEffect)(()=>{n.current&&(n.current=!1)},[]),t};var tj=s(48068);let tN=e=>{let{setClose:t,position:s}=e,{t:n}=(0,D.$G)("home"),[a,l]=(0,T.useState)(!1),[i,r]=(0,T.useState)(0),o=tw([s]),{data:c,isLoading:d,isSuccess:p,isError:m,error:y}=eh.Z.useGetTokenPriceQuery(eg[s.coinB]);return(0,T.useEffect)(()=>{if(c&&p){var e;r(null==c?void 0:null===(e=c[eg[s.coinB]])||void 0===e?void 0:e.usd)}m&&console.error(y)},[c,p]),(0,x.jsxs)(x.Fragment,{children:[(0,x.jsxs)("div",{className:"flex items-center justify-start border-b border-slate-600 space-x-4 mb-6 lg:mb-12 pb-2",children:[(0,x.jsxs)("button",{type:"button",className:"outline-none text-primary-500 space-x-2",onClick:()=>t(!0),children:[(0,x.jsx)("span",{className:"no-underline",children:"<"}),(0,x.jsx)("span",{className:"underline",children:n("show-all")})]}),(0,x.jsx)("button",{type:"button",className:A(a?"outline-none text-slate-500 pointer-events-none":"outline-none text-primary-500 underline cursor-pointer"),onClick:()=>l(!0),disabled:a,children:a?"".concat(n("editing-position"),"..."):"".concat(n("edit-position"))})]}),(0,x.jsxs)("div",{className:"flex flex-wrap items-start justify-between space-y-4 md:space-y-0",children:[(0,x.jsxs)("div",{className:"w-full md:w-1/2",children:[(0,x.jsx)("span",{className:"flex items-center justify-start",children:(0,x.jsx)(eU,{coinA:s.coinA,coinB:s.coinB,type:u.ViewPosition})}),(0,x.jsxs)("p",{className:"text-slate-100 my-2",children:[(0,x.jsxs)("span",{className:"text-slate-400",children:[n("total-streamed"),":"]})," ",s.input.toFixed(3)," ",s.coinA,"x (",w(parseFloat(s.streamedUsdValue)),")"]}),(0,x.jsxs)("p",{className:"text-slate-100 my-2",children:[(0,x.jsxs)("span",{className:"text-slate-400",children:[n("stream-rate"),":"]})," ",parseFloat(s.output).toFixed(3)," ",s.coinA,"x (",w(parseFloat(s.rateUsdValue)),")"]})]}),!a&&(0,x.jsx)("div",{className:"w-full md:w-1/2",children:(0,x.jsx)(eE,{pairs:o,position:s})}),a&&(0,x.jsx)("div",{className:"w-full md:w-1/2 mt-4",children:(0,x.jsx)(tb,{setClose:l,position:s})})]})]})},tT=["your markets","stream rate","total streamed"],tk=e=>{let{positions:t,queries:s}=e,{t:n}=(0,D.$G)("home"),[a,l]=(0,T.useState)([]),[i,r]=(0,T.useState)(new Map),[o,c]=(0,T.useState)(!0),d=ef(),u=tw(t),p=ev(u),[m,y]=(0,T.useState)([["0","0"]]),[h,f]=(0,T.useState)(),[b,g]=(0,T.useState)(!0),{address:v,isConnected:A}=(0,S.mA)(),[w]=tj.Z.useQuerySushiPoolPricesMutation();return(0,T.useEffect)(()=>{if(p.size>0&&u.size>0){let e=[];for(let[t,s]of u){if(s[0]===B.sN.USDC||s[0]===B.sN.IbAlluoUSD||s[0]===B.sN.StIbAlluoUSD||s[0]===B.sN.DAI){let{priceSorted:n}=eA(p.get(eg[s[1]]));n.length&&(e.push([n[0][1],n[n.length-1][1]]),y(e))}if(s[1]===B.sN.USDC||s[1]===B.sN.IbAlluoUSD||s[1]===B.sN.StIbAlluoUSD||s[1]===B.sN.DAI){let{priceSorted:a}=eA(p.get(eg[s[0]]));a.length&&(e.push([a[0][1],a[a.length-1][1]]),y(e))}}}},[p,u]),(0,T.useEffect)(()=>{let e=U.ow.map(async e=>{let t=await (0,R.EG)({address:v,chainId:C.yu.id,token:e}).then(e=>null==e?void 0:e.formatted);return{token:e,balance:t}});Promise.all(e).then(e=>{let t=new Map;e.map(e=>t.set(null==e?void 0:e.token,null==e?void 0:e.balance)),r(t)})},[v,A]),(0,T.useEffect)(()=>{if(v&&A&&s.size>0&&t.length>0){let e=[];t.map((t,n)=>{var a,l,i,r,o,c,u,p,y;e.push({...t,positions:(null===(a=s.get(null==t?void 0:t.flowKey))||void 0===a?void 0:a.totalFlows)||0,rateUsdValue:e8(null===(l=s.get(null==t?void 0:t.flowKey))||void 0===l?void 0:l.placeholder,d.get(null==t?void 0:t.tokenA)),streamedUsdValue:e8(null===(i=s.get(null==t?void 0:t.flowKey))||void 0===i?void 0:null===(r=i.streamedSoFar)||void 0===r?void 0:r.toFixed(0),d.get(null==t?void 0:t.tokenA)),input:(null===(o=s.get(null==t?void 0:t.flowKey))||void 0===o?void 0:o.streamedSoFar)||0,output:null===(c=s.get(null==t?void 0:t.flowKey))||void 0===c?void 0:c.placeholder,avgBuyPrice:m.length&&(null===(u=m[n])||void 0===u?void 0:u.length)?((+(null==m?void 0:null===(p=m[n])||void 0===p?void 0:p[0])+ +(null==m?void 0:null===(y=m[n])||void 0===y?void 0:y[1]))/2).toFixed(3):"0"})}),l(e)}},[v,A,m,t,s,d]),(0,x.jsxs)(x.Fragment,{children:[o&&(0,x.jsxs)("div",{className:"mt-4",children:[(0,x.jsx)(eY,{content:(0,x.jsxs)(x.Fragment,{children:[(0,x.jsx)("p",{className:"text-primary-500 uppercase",children:n("your-streams")}),(0,x.jsx)(ea,{icon:(0,x.jsx)(tA.Z,{className:"h-4 w-4"}),type:"button",action:"".concat(n("new-position")),handleClick:()=>{c(!1)}})]})}),b&&(a.length?(0,x.jsx)(eG,{headers:tT,rowData:a,tableLoaderRows:12,selectable:!0,selectData:e=>{f(e),g(!1)}}):(0,x.jsxs)("p",{className:"italic",children:[n("no-positions"),"..."]})),!b&&(0,x.jsx)(tN,{close:b,setClose:g,position:h})]}),!o&&(0,x.jsx)(tv,{close:o,setClose:c})]})};var tS=s(59721),tC=s(64202);let tE=[{inputs:[],stateMutability:"nonpayable",type:"constructor"},{anonymous:!1,inputs:[{indexed:!1,internalType:"string",name:"name",type:"string"},{indexed:!1,internalType:"string",name:"id",type:"string"}],name:"AffiliateApplied",type:"event"},{anonymous:!1,inputs:[{indexed:!1,internalType:"string",name:"affiliateId",type:"string"}],name:"AffiliateWithdrawn",type:"event"},{anonymous:!1,inputs:[{indexed:!1,internalType:"address",name:"customer",type:"address"}],name:"OrganicCustomerRegistered",type:"event"},{anonymous:!1,inputs:[{indexed:!1,internalType:"address",name:"customer",type:"address"},{indexed:!1,internalType:"address",name:"affiliate",type:"address"},{indexed:!1,internalType:"string",name:"affiliateId",type:"string"}],name:"ReferredCustomerRegistered",type:"event"},{anonymous:!1,inputs:[{indexed:!0,internalType:"bytes32",name:"role",type:"bytes32"},{indexed:!0,internalType:"bytes32",name:"previousAdminRole",type:"bytes32"},{indexed:!0,internalType:"bytes32",name:"newAdminRole",type:"bytes32"}],name:"RoleAdminChanged",type:"event"},{anonymous:!1,inputs:[{indexed:!0,internalType:"bytes32",name:"role",type:"bytes32"},{indexed:!0,internalType:"address",name:"account",type:"address"},{indexed:!0,internalType:"address",name:"sender",type:"address"}],name:"RoleGranted",type:"event"},{anonymous:!1,inputs:[{indexed:!0,internalType:"bytes32",name:"role",type:"bytes32"},{indexed:!0,internalType:"address",name:"account",type:"address"},{indexed:!0,internalType:"address",name:"sender",type:"address"}],name:"RoleRevoked",type:"event"},{inputs:[],name:"APP_ROLE",outputs:[{internalType:"bytes32",name:"",type:"bytes32"}],stateMutability:"view",type:"function"},{inputs:[],name:"DEFAULT_ADMIN_ROLE",outputs:[{internalType:"bytes32",name:"",type:"bytes32"}],stateMutability:"view",type:"function"},{inputs:[{internalType:"address",name:"",type:"address"}],name:"addressToAffiliate",outputs:[{internalType:"uint256",name:"",type:"uint256"}],stateMutability:"view",type:"function"},{inputs:[{internalType:"string",name:"",type:"string"}],name:"affiliateIdToAffiliate",outputs:[{internalType:"uint256",name:"",type:"uint256"}],stateMutability:"view",type:"function"},{inputs:[{internalType:"uint256",name:"",type:"uint256"}],name:"affiliates",outputs:[{internalType:"string",name:"name",type:"string"},{internalType:"string",name:"id",type:"string"},{internalType:"bool",name:"enabled",type:"bool"},{internalType:"uint256",name:"totalRef",type:"uint256"},{internalType:"address",name:"addr",type:"address"}],stateMutability:"view",type:"function"},{inputs:[{internalType:"string",name:"name",type:"string"},{internalType:"string",name:"affiliateId",type:"string"}],name:"applyForAffiliate",outputs:[],stateMutability:"nonpayable",type:"function"},{inputs:[{internalType:"address",name:"newAddress",type:"address"}],name:"changeAffiliateAddress",outputs:[],stateMutability:"nonpayable",type:"function"},{inputs:[{internalType:"address",name:"",type:"address"}],name:"customerToAffiliate",outputs:[{internalType:"uint256",name:"",type:"uint256"}],stateMutability:"view",type:"function"},{inputs:[{internalType:"string",name:"affiliateId",type:"string"}],name:"disableAffiliate",outputs:[],stateMutability:"nonpayable",type:"function"},{inputs:[{internalType:"address",name:"customerAddr",type:"address"}],name:"getAffiliateAddress",outputs:[{internalType:"address",name:"",type:"address"}],stateMutability:"view",type:"function"},{inputs:[{internalType:"bytes32",name:"role",type:"bytes32"}],name:"getRoleAdmin",outputs:[{internalType:"bytes32",name:"",type:"bytes32"}],stateMutability:"view",type:"function"},{inputs:[{internalType:"bytes32",name:"role",type:"bytes32"},{internalType:"uint256",name:"index",type:"uint256"}],name:"getRoleMember",outputs:[{internalType:"address",name:"",type:"address"}],stateMutability:"view",type:"function"},{inputs:[{internalType:"bytes32",name:"role",type:"bytes32"}],name:"getRoleMemberCount",outputs:[{internalType:"uint256",name:"",type:"uint256"}],stateMutability:"view",type:"function"},{inputs:[{internalType:"bytes32",name:"role",type:"bytes32"},{internalType:"address",name:"account",type:"address"}],name:"grantRole",outputs:[],stateMutability:"nonpayable",type:"function"},{inputs:[{internalType:"bytes32",name:"role",type:"bytes32"},{internalType:"address",name:"account",type:"address"}],name:"hasRole",outputs:[{internalType:"bool",name:"",type:"bool"}],stateMutability:"view",type:"function"},{inputs:[{internalType:"string",name:"affiliateId",type:"string"}],name:"isAffiliateEnabled",outputs:[{internalType:"bool",name:"",type:"bool"}],stateMutability:"view",type:"function"},{inputs:[{internalType:"address",name:"",type:"address"}],name:"isCustomerOrganic",outputs:[{internalType:"bool",name:"",type:"bool"}],stateMutability:"view",type:"function"},{inputs:[{internalType:"address",name:"contractAddr",type:"address"}],name:"registerApp",outputs:[],stateMutability:"nonpayable",type:"function"},{inputs:[{internalType:"bytes32",name:"role",type:"bytes32"},{internalType:"address",name:"account",type:"address"}],name:"renounceRole",outputs:[],stateMutability:"nonpayable",type:"function"},{inputs:[{internalType:"bytes32",name:"role",type:"bytes32"},{internalType:"address",name:"account",type:"address"}],name:"revokeRole",outputs:[],stateMutability:"nonpayable",type:"function"},{inputs:[{internalType:"address",name:"customerAddr",type:"address"},{internalType:"string",name:"affiliateId",type:"string"}],name:"safeRegisterCustomer",outputs:[],stateMutability:"nonpayable",type:"function"},{inputs:[{internalType:"bytes4",name:"interfaceId",type:"bytes4"}],name:"supportsInterface",outputs:[{internalType:"bool",name:"",type:"bool"}],stateMutability:"view",type:"function"},{inputs:[{internalType:"address",name:"contractAddr",type:"address"}],name:"unregisterApp",outputs:[],stateMutability:"nonpayable",type:"function"},{inputs:[{internalType:"string",name:"affiliateId",type:"string"}],name:"verifyAffiliate",outputs:[],stateMutability:"nonpayable",type:"function"},{inputs:[],name:"withdrawAffiliate",outputs:[],stateMutability:"nonpayable",type:"function"}];(o=y||(y={})).INACTIVE="inactive",o.REGISTERING="registering",o.AWAITING_VERIFICATION="awaitingVerification",o.ENABLED="enabled";let tI=e=>{let t=[[new Blob([e]).size<=32,"Cannot be larger than 32 characters (Some characters count as 2)"],[e.length>1,"Must be at least 2 characters"]];return t},tD=e=>tI(e).reduce((e,t)=>!1===t[0]?[...e,t[1]]:e,[]),tF=async function(e,t){let s=arguments.length>2&&void 0!==arguments[2]?arguments[2]:e=>{},n=await (0,R.a4)({address:t,abi:tE,functionName:"addressToAffiliate",args:[e.toLowerCase()]}),a=await (0,R.a4)({address:t,abi:tE,functionName:"affiliates",args:[n]});return V.O$.from(a.addr).isZero()?y.INACTIVE:!1===a.enabled?y.AWAITING_VERIFICATION:0===tD(a.id).length?(s(a.id),y.ENABLED):void 0},t_=()=>{let{t:e}=(0,D.$G)("home"),{address:t,isConnected:s}=(0,S.mA)(),[n,a]=(0,T.useState)("Copy"),[l,i]=(0,T.useState)("pro.ricochet-exchange.eth.limo/#/ref/"),[r,o]=(0,T.useState)(),[c,d]=(0,T.useState)(!1),[u,p]=(0,T.useState)([]),[m,h]=(0,T.useState)(),[f,b]=(0,T.useState)(U.CU),{chain:g}=(0,S.LN)();(0,T.useEffect)(()=>{h(null==t?void 0:t.toLowerCase().slice(0,10))},[t,s]),(0,T.useEffect)(()=>{g&&(80001===g.id&&b(Z.mr),137===g.id&&b(U.CU),10===g.id&&b(L.aq))},[null==g?void 0:g.id]),(0,T.useEffect)(()=>{(async()=>{if(t&&s&&f){if((null==g?void 0:g.id)!==137)return o(y.INACTIVE);let e=await tF(t,f,h);o(e)}})()},[t,s,f]),(0,T.useEffect)(()=>{if(r===y.REGISTERING&&t&&s&&f){let e=setInterval(async()=>{let e=await tF(t,f,h);o(e)},5e3);return()=>clearInterval(e)}},[r,t,s,f]);let v=()=>{navigator.clipboard.writeText("".concat(l).concat(m)).then(()=>{a("Copied!"),setTimeout(()=>{a("Copy")},3e3)}).catch()},w=e=>{let{value:t}=e.target;h(t),p(tD(t))},j=async e=>{null==e||e.preventDefault(),d(!0);let s=await (0,R.$q)({address:f,abi:tE,functionName:"applyForAffiliate",args:[m,m]}),n=await (0,R.n9)(s);n.wait().then(e=>{e&&(o(y.REGISTERING),(async()=>{let e=await (0,R.$q)({address:f,abi:tE,functionName:"applyForAffiliate",args:[m,m],overrides:{from:t}}),s=await (0,R.n9)(e);s.wait().then(e=>d(!1))})()),d(!1)}).catch(e=>{o(y.INACTIVE),p(["Error registering this url: possible duplicate. Please try another url"]),console.error(e)})};return(0,x.jsxs)("div",{className:"flex flex-col items-center space-y-4",children:[(0,x.jsxs)("div",{className:"flex items-center justify-center text-slate-100 space-x-3",children:[(0,x.jsx)(tS.Z,{className:"h-6 w-6"}),(0,x.jsx)("p",{className:"uppercase tracking-widest",children:e("refer")})]}),(0,x.jsx)("p",{className:"text-slate-100",children:e("apply-refer")}),s&&(r===y.INACTIVE||r===y.REGISTERING)&&(0,x.jsxs)(x.Fragment,{children:[(0,x.jsxs)("p",{className:"text-slate-400",children:[e("customize-url"),":"]}),(0,x.jsxs)("form",{onSubmit:j,className:"w-full space-y-4",children:[(0,x.jsxs)("div",{className:A(u.length>0?"border-red-700":"border-primary-500","inline-flex py-2 pl-3 w-full border rounded-lg"),children:[(0,x.jsx)("div",{className:"w-2/3 text-primary-700 truncate",children:(0,x.jsx)("span",{children:l})}),(0,x.jsx)("input",{type:"text",defaultValue:m,onChange:e=>w(e),className:"w-1/3 pl-1 pr-3 text-primary-100 placeholder-primary-500 bg-transparent focus:outline-none dark:placeholder-primary-500 ",placeholder:"".concat(e("referral-url"))})]}),u.map(t=>(0,x.jsx)("p",{className:"text-red-700 text-xs italic",children:e(t)},t)),(0,x.jsx)(er,{type:"submit",loading:c,disabled:c,primary:!0,action:c?"".concat(e("registering"),"..."):e("register-url")})]})]}),!s&&(0,x.jsxs)("div",{className:"flex flex-col items-center justify-center space-y-4",children:[(0,x.jsxs)("p",{className:"text-primary-500",children:[e("connect-for-referrals"),"."]}),(0,x.jsx)(tn.x3.Custom,{children:t=>{let{isConnected:s,show:n}=t;return(0,x.jsx)(x.Fragment,{children:!s&&(0,x.jsx)(ei,{action:"".concat(e("connect-wallet")),type:"button",handleClick:n})})}})]}),s&&r===y.AWAITING_VERIFICATION&&(0,x.jsx)("div",{children:(0,x.jsxs)("p",{children:[e("Awaiting verification. Come back later or ping us on our discord:"),(0,x.jsx)("br",{}),(0,x.jsx)(tm,{className:"text-slate-200 underline",href:"https://discord.gg/mss4t2ED3y",target:"_blank",rel:"noreferrer",children:"https://discord.gg/mss4t2ED3y"})]})}),s&&r===y.ENABLED&&(0,x.jsxs)("div",{className:"flex flex-col justify-start items-center gap-1",children:[(0,x.jsx)("p",{children:e("your-referral-url")}),(0,x.jsx)("p",{children:l+m}),(0,x.jsxs)("button",{className:"flex justify-center items-center gap-1",onClick:v,children:[(0,x.jsx)(tC.Z,{className:"h-5 w-5"})," ",e(n)]})]}),(0,x.jsx)("a",{className:"inline-flex items-center space-x-1 text-primary-400",href:"https://docs.ricochet.exchange/readme/referral-program",target:"_blank",rel:"noopener noreferrer",children:(0,x.jsx)("span",{className:"underline",children:e("how-does-it-work")})})]})},tM=(e,t)=>{let s=null==e?void 0:e.reduce((e,s)=>s.token.id===t.toLowerCase()?e+parseInt(s.currentFlowRate,10):e,0);return(s/1e18*2592e3).toFixed(3)},tO=(e,t,s)=>{let n=null==e?void 0:e.reduce((e,n)=>{var a,l;return(null==n?void 0:null===(a=n.token)||void 0===a?void 0:a.id)===(null==t?void 0:t.toLowerCase())&&(null==n?void 0:null===(l=n.sender)||void 0===l?void 0:l.id)===(null==s?void 0:s.toLowerCase())?e+parseInt(n.currentFlowRate,10):e},0);return n},tR=(e,t,s,n,a)=>{let l,i;let r=e5.X7.find(t=>t.flowKey===e),o=(null==r?void 0:r.superToken)||"",c=(null==r?void 0:r.tokenA)||"",d=s.get(o),u=tO(null==d?void 0:d.inflows,c,t);Object.keys(n).length>0&&(l=n["".concat(c.toLowerCase(),"-").concat(o.toLowerCase())]),Object.keys(a).length>0&&(i=a["".concat(c.toLowerCase(),"-").concat(o.toLowerCase())]);let p=(u/1e18*2592e3).toFixed(6),m=tM(null==d?void 0:d.inflows,c),y=null==d?void 0:d.inflows.filter(e=>"0"!==e.currentFlowRate);return{flowKey:e,flowsReceived:u,flowsOwned:m,totalFlows:(null==y?void 0:y.length)||0,placeholder:p,streamedSoFar:l,receivedSoFar:i,subsidyRate:{perso:0,total:0,endDate:"unknown"}}},tB=(e,t,s)=>{let n=V.O$.from(e),a=V.O$.from(s),l=V.O$.from(t).mul(1e3),i=V.O$.from(new Date().getTime());return a.isZero()?es.formatEther(n):es.formatEther(n.add(i.sub(l).mul(a).div(1e3)))};var tU=s(68552),tZ=s(9008),tL=s.n(tZ),tW=s(20640);let tP=e=>({10:"/protocol-v1-optimism-mainnet",137:"/protocol-v1-matic",80001:"/protocol-v1-mumbai"})[e],tG=e5.X7.map(e=>e.superToken);var tQ=!0;function tz(){let e=function(){let[e,t]=T.useState(!1);return T.useEffect(()=>t(!0),[]),e}(),{t}=(0,D.$G)("home"),{address:s,isConnected:n}=(0,S.mA)(),[a,l]=(0,T.useState)(new e2.Z(0)),[i,r]=(0,T.useState)("0"),[o,c]=(0,T.useState)(!1),{chain:d}=(0,S.LN)(),u=(0,S.yL)({chainId:(null==d?void 0:d.id)||C.yu.id}),[p,m]=(0,T.useState)(),{data:y,isLoading:h,isSuccess:f,isError:b,error:g}=eh.Z.useGetTokenPriceQuery("richochet"),{data:v,isSuccess:A,isError:j,error:N}=eh.Z.useGetUpgradedTokensListQuery(),[I,F]=(0,T.useState)(new Map),[_,M]=(0,T.useState)({}),[O,B]=(0,T.useState)([]),[Z,L]=(0,T.useState)([]),[Q,z]=(0,T.useState)(0),[H,V]=(0,T.useState)(new Map),[$,K]=(0,T.useState)([0]),[q,J]=(0,T.useState)(0),[X,ee]=(0,T.useState)(!1),[et,es]=(0,T.useState)(!1),[en,ea]=(0,T.useState)([]),el=ef(),[er]=tW.Z.useQueryFlowsMutation(),[eo]=tW.Z.useQueryStreamsMutation(),[ec]=tW.Z.useQueryReceivedMutation(),[ed,eu]=(0,T.useState)();(0,T.useEffect)(()=>{d&&((null==d?void 0:d.id)===80001&&eu(P),(null==d?void 0:d.id)===137&&eu(W),(null==d?void 0:d.id)===10&&eu(G),m((0,e5.st)(null==d?void 0:d.id)))},[null==d?void 0:d.id]),(0,T.useEffect)(()=>{n&&Y(s).then(e=>M(e))},[s,n,null==d?void 0:d.id]),(0,T.useEffect)(()=>{let e=tG.map(async e=>await er({queryAddress:e,network:tP((null==d?void 0:d.id)||137)}).then(e=>{var t,s;return null==e?void 0:null===(t=e.data)||void 0===t?void 0:null===(s=t.data)||void 0===s?void 0:s.account}));Promise.all(e).then(e=>ea(e))},[e,s,n,null==d?void 0:d.id]);let ep=(e,t)=>{(e||[]).forEach(e=>{let s=t["".concat(e.token.id,"-").concat(e.receiver.id)]||0;Object.assign(t,{["".concat(e.token.id,"-").concat(e.receiver.id)]:Number(s)+Number(tB(e.streamedUntilUpdatedAt,e.updatedAtTimestamp,e.currentFlowRate))})})},em=(e,t)=>{(e||[]).forEach(e=>{let s=t["".concat(e.token.id,"-").concat(e.sender.id)]||0;Object.assign(t,{["".concat(e.token.id,"-").concat(e.sender.id)]:Number(s)+Number(tB(e.streamedUntilUpdatedAt,e.updatedAtTimestamp,e.currentFlowRate))})})},ey=(e,t)=>{let n=new Map;tG.forEach((e,t)=>{en.length>0&&(null!==en[t]?n.set(e,en[t]):n.set(e,{inflows:[],outflows:[]}))});let a=new Map;if(n.size>0)for(let[l,i]of Object.entries(e5.he))a.set(i,tR(i,s,n,e,t));F(a)},ex=async()=>{let e={},t={};s&&(await eo({address:s,network:tP(null==d?void 0:d.id)}).then(t=>{var s,n;ep(null==t?void 0:null===(s=t.data)||void 0===s?void 0:null===(n=s.data)||void 0===n?void 0:n.streams,e)}),await ec({receiver:s,network:tP(null==d?void 0:d.id)}).then(e=>{var s,n;em(null==e?void 0:null===(s=e.data)||void 0===s?void 0:null===(n=s.data)||void 0===n?void 0:n.streams,t)})),ey(e,t)},eb=e=>{let t=[U.Ne,U.gI,U.PV,U.Xr,U.dU,U.q9,U.MJ];return!!t.includes(e)};(0,T.useEffect)(()=>{en.length>0&&ex()},[en,s,n,null==d?void 0:d.id]),(0,T.useEffect)(()=>{if(n&&s&&e&&p){let t=p.filter(e=>{var t;let{flowKey:s}=e;return parseFloat(null===(t=I.get(s))||void 0===t?void 0:t.placeholder)>0});L(t)}},[I,s,n,e,p,null==d?void 0:d.id]),(0,T.useEffect)(()=>{if(n&&j&&console.error(N),n&&A&&ed){es(!0);let e=ed.reduce((e,t)=>{let s=Object.keys(_).length&&v&&Object.keys(eg).length&&(parseFloat(_[t.superTokenAddress])*parseFloat(v[eg[t.coin]].usd)).toFixed(6);return isNaN(+s)?e+0:e+parseFloat(s)},0);z(e),es(!1)}},[n,s,_,v,A,null==d?void 0:d.id,ed]),(0,T.useEffect)(()=>{el.size>0&&I.size>0&&p&&B(p.filter(e=>e.type===e5.Z6.market).sort((e,t)=>{let s=parseFloat(e6(e,I,el)),n=parseFloat(e6(t,I,el));return n-s}))},[I,el,null==d?void 0:d.id,p]),(0,T.useEffect)(()=>{if(O.length){ee(!0);let e=new Map;(async()=>await Promise.all(O.map(async t=>{eb(t.superToken)&&await (0,R.a4)({address:t.superToken,abi:tx,functionName:(null==d?void 0:d.id)===137?"getOutputPool":"outputPools",args:(null==d?void 0:d.id)===137?[3]:[1]}).then(s=>{let n=(Number(s.emissionRate)/1e18*2592e3).toFixed(4);e.set(t.superToken,n.toString())}).catch(e=>{console.log("error",e)})})).then(t=>V(e)))()}},[O,null==d?void 0:d.id]),(0,T.useEffect)(()=>{O.length&&I.size>0&&H.size>0&&O.map(e=>{var t,s;let n=+(null===(t=I.get(e.flowKey))||void 0===t?void 0:t.placeholder)/+(null===(s=I.get(e.flowKey))||void 0===s?void 0:s.flowsOwned)*100,a=+n/100*+H.get(e.superToken);a&&K(e=>[...e,a])})},[H,I,O,null==d?void 0:d.id]),(0,T.useEffect)(()=>{if($.length){let e=$.filter((e,t,s)=>s.indexOf(e)===t).reduce((e,t)=>e+t,0);J(e),ee(!1)}},[$,null==d?void 0:d.id]),(0,T.useEffect)(()=>{if(n&&y&&f){var e;l(new e2.Z(parseFloat(null==y?void 0:null===(e=y.richochet)||void 0===e?void 0:e.usd)))}b&&console.error(g)},[n,s,y,f,null==d?void 0:d.id]);let ev=async()=>{c(!0),await (0,tU.x)((null==d?void 0:d.id)||137).then(async e=>{if(Z.length>0){let t=Z.map(async t=>{await e.cfaV1.getNetFlow({superToken:t.tokenA,account:s,providerOrSigner:u})});Promise.all(t).then(e=>{let t=e.reduce((e,t)=>e+parseFloat(t),0).toFixed(0);if(isNaN(+t))return;let s=new e2.Z(t),n=s.times(new e2.Z("2592000")).div(new e2.Z("10e17")).times(a).toFixed(0);r(n),c(!1)})}c(!1)}).catch(e=>c(!1))};return((0,T.useEffect)(()=>{n&&a&&(null==d?void 0:d.id)&&Z&&ev()},[n]),e)?(0,x.jsxs)(x.Fragment,{children:[(0,x.jsxs)(tL(),{children:[(0,x.jsx)("title",{children:"Ricochet | Streaming Exchange"}),(0,x.jsx)("meta",{name:"description",content:"Automatic Real-Time Crypto Investing"}),(0,x.jsx)("link",{rel:"icon",href:"/favicon.ico"}),(0,x.jsx)("link",{rel:"icon",type:"image/svg+xml",href:"/favicon.svg"})]}),(0,x.jsxs)("div",{className:"bg-gradient-to-b from-background-700 via-background-800 to-background-900 overflow-clip",children:[(0,x.jsx)(ty,{}),(0,x.jsx)("main",{children:(0,x.jsxs)("div",{className:"mx-auto w-screen py-6 px-8 lg:px-16",children:[(0,x.jsx)(k,{}),n&&(0,x.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 justify-items-stretch place-items-stretch gap-10",children:[(0,x.jsx)(eJ,{content:(0,x.jsxs)(x.Fragment,{children:[(0,x.jsx)("h6",{className:"font-light uppercase tracking-widest text-primary-500 mb-2",children:t("total-in-positions")}),et&&!Q&&(0,x.jsx)("div",{className:"animate-pulse",children:(0,x.jsx)("div",{className:"h-4 rounded bg-slate-700"})}),(Q||0===Q)&&!et&&(0,x.jsx)("p",{className:"text-slate-100 font-light text-2xl",children:w(Q)})]})}),(0,x.jsx)(eJ,{content:(0,x.jsxs)(x.Fragment,{children:[(0,x.jsx)("h6",{className:"font-light uppercase tracking-widest text-primary-500 mb-2",children:t("net-flow-rate")}),o&&!i&&(0,x.jsx)("div",{className:"animate-pulse",children:(0,x.jsx)("div",{className:"h-4 rounded bg-slate-700"})}),i&&!o&&(0,x.jsxs)("p",{className:"text-slate-100 font-light text-2xl",children:[w(parseFloat(i))," / ",t("month")]})]})}),(0,x.jsx)(eJ,{content:(0,x.jsxs)(x.Fragment,{children:[(0,x.jsx)("h6",{className:"font-light uppercase tracking-widest text-primary-500 mb-2",children:t("ric-balance")}),(0,x.jsx)("div",{className:"text-slate-100 font-light text-2xl space-x-1",children:(0,x.jsx)(E,{tokenAddress:(0,U.P3)((null==d?void 0:d.id)||137),showSymbol:!0})})]})}),(0,x.jsx)(eJ,{content:(0,x.jsxs)(x.Fragment,{children:[(0,x.jsx)("h6",{className:"font-light uppercase tracking-widest text-primary-500 mb-2",children:t("rewards-earned")}),X&&!q&&(0,x.jsx)("p",{className:"text-slate-100 font-light text-2xl",children:"0 RIC / mo"}),(q||0===q)&&!X&&(0,x.jsxs)("p",{className:"text-slate-100 font-light text-2xl",children:[q.toFixed(2)," RIC / mo"]})]})})]}),(0,x.jsxs)("div",{className:"grid grid-cols-1 lg:grid-cols-3 gap-10 place-content-stretch mt-16",children:[(0,x.jsxs)("div",{className:"lg:col-span-2 space-y-10",children:[(0,x.jsx)(eq,{content:n?(0,x.jsx)(tk,{positions:Z,queries:I}):(0,x.jsxs)("div",{className:"flex flex-col items-center justify-center space-y-4 h-96",children:[(0,x.jsxs)("p",{className:"text-primary-500",children:[t("connect-for-positions"),"."]}),(0,x.jsx)(tn.x3.Custom,{children:e=>{let{isConnected:s,show:n}=e;return(0,x.jsx)(x.Fragment,{children:!s&&(0,x.jsx)(ei,{action:"".concat(t("connect-wallet")),type:"button",handleClick:n})})}})]})}),(0,x.jsx)(eq,{content:O&&(0,x.jsx)(e9,{coingeckoPrices:el,sortedList:O,queries:I})})]}),(0,x.jsxs)("div",{className:"space-y-10",children:[(0,x.jsx)(eK,{content:(0,x.jsx)(e4,{})}),(0,x.jsx)(eV,{content:n?(0,x.jsx)(ez,{tokens:v,balances:_}):(0,x.jsxs)("div",{className:"flex flex-col items-center justify-center space-y-4 h-96",children:[(0,x.jsxs)("p",{className:"text-primary-500",children:[t("connect-for-balances"),"."]}),(0,x.jsx)(tn.x3.Custom,{children:e=>{let{isConnected:s,show:n}=e;return(0,x.jsx)(x.Fragment,{children:!s&&(0,x.jsx)(ei,{action:"".concat(t("connect-wallet")),type:"button",handleClick:n})})}})]})}),(0,x.jsx)(e$,{content:(0,x.jsx)(t_,{})})]})]})]})}),(0,x.jsx)(e0,{})]})]}):(0,x.jsx)(x.Fragment,{})}}},function(e){e.O(0,[698,774,888,179],function(){return e(e.s=53124)}),_N_E=e.O()}]);